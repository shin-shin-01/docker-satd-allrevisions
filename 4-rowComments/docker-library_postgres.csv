,CommitID,Dockerfile,Comment
0,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
2,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		krb5-dev \
9,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		openldap-dev \
10,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: prove not found
11,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
20,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
21,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
22,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
23,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
24,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
25,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
26,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
27,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile, # backwards compat
28,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# vim:set ft=dockerfile:
29,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# explicitly set user/group IDs
30,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
31,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
32,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# grab gosu for easy step-down from root
33,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
34,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
35,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
36,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
37,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# see note below about ""*.pyc"" files"
38,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# arches officialy built by upstream
39,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
40,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
41,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
42,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
43,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
44,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
45,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
46,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
47,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
48,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
49,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
50,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
51,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
52,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile, # backwards compat
53,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
54,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
55,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
56,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
57,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		krb5-dev \
58,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		openldap-dev \
59,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: prove not found
60,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
61,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
62,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
63,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
64,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
65,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
66,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
67,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
68,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
69,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
70,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
71,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
72,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
73,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
74,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile, # backwards compat
75,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
76,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
77,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
78,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
79,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		krb5-dev \
80,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		openldap-dev \
81,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
82,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
83,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
84,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
85,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
86,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
87,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
88,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
89,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
90,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
91,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
92,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
93,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
94,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
95,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile, # backwards compat
96,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
97,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
98,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
99,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
100,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		krb5-dev \
101,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		openldap-dev \
102,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: prove not found
103,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
104,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
105,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
106,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
107,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
108,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
109,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
110,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
111,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
112,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
113,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
114,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
115,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
116,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
117,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
118,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
119,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile, # backwards compat
120,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
121,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
122,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
123,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
124,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		krb5-dev \
125,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		openldap-dev \
126,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: prove not found
127,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
128,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
129,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
130,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
131,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
132,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
133,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
134,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
135,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
136,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
137,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
138,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
139,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
140,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
141,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile, # backwards compat
142,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# vim:set ft=dockerfile:
143,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# explicitly set user/group IDs
144,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
145,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
146,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# grab gosu for easy step-down from root
147,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
148,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
149,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
150,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
151,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
152,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# arches officialy built by upstream
153,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
154,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
155,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
156,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
157,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
158,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
159,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
160,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
161,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
162,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
163,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
164,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
165,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
166,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile, # backwards compat
167,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# vim:set ft=dockerfile:
168,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# explicitly set user/group IDs
169,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# grab gosu for easy step-down from root
170,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
171,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
172,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
173,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
174,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
175,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
176,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile, # backwards compat
177,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# vim:set ft=dockerfile:
178,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
179,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# grab gosu for easy step-down from root
180,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
181,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
182,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# vim:set ft=dockerfile:
183,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# explicitly set user/group IDs
184,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# grab gosu for easy step-down from root
185,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
186,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
187,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# arches officialy built by upstream
188,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
189,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
190,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
191,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
192,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
193,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
194,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
195,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
196,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
197,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
198,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
199,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile, # backwards compat
200,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# vim:set ft=dockerfile:
201,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# explicitly set user/group IDs
202,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
203,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
204,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# grab gosu for easy step-down from root
205,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
206,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
207,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
208,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
209,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# see note below about ""*.pyc"" files"
210,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# arches officialy built by upstream
211,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
212,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
213,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
214,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
215,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
216,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
217,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
218,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
219,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
220,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
221,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
222,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
223,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
224,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile, # backwards compat
225,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# vim:set ft=dockerfile:
226,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# explicitly set user/group IDs
227,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# grab gosu for easy step-down from root
228,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
229,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
230,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# arches officialy built by upstream
231,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
232,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
233,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
234,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
235,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
236,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
237,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
238,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
239,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
240,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
241,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
242,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile, # backwards compat
243,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
244,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
245,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
246,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
247,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		krb5-dev \
248,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		openldap-dev \
249,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: prove not found
250,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
251,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
252,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
253,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
254,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
255,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
256,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
257,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
258,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
259,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#p' --recursive /usr/local \
260,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
261,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
262,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
263,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
264,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile, # backwards compat
265,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
266,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
267,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
268,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
269,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		krb5-dev \
270,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		openldap-dev \
271,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
272,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
273,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
274,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
275,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
276,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
277,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
278,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
279,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
280,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
281,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
282,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
283,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
284,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
285,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
286,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile, # backwards compat
287,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# vim:set ft=dockerfile:
288,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# explicitly set user/group IDs
289,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
290,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
291,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# grab gosu for easy step-down from root
292,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
293,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
294,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
295,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
296,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# see note below about ""*.pyc"" files"
297,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# arches officialy built by upstream
298,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
299,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
300,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
301,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
302,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
303,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
304,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
305,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
306,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
307,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
308,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
309,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
310,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
311,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile, # backwards compat
312,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# vim:set ft=dockerfile:
313,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
314,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# grab gosu for easy step-down from root
315,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
316,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
317,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
318,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
319,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
320,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
321,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		krb5-dev \
322,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		openldap-dev \
323,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: prove not found
324,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
325,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
326,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
327,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
328,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
329,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
330,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
331,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
332,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
333,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#p' --recursive /usr/local \
334,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
335,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
336,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
337,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
338,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile, # backwards compat
339,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
340,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
341,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
342,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
343,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		krb5-dev \
344,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		openldap-dev \
345,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
346,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
347,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
348,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
349,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
350,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
351,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
352,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
353,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
354,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
355,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
356,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile, # backwards compat
357,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# vim:set ft=dockerfile:
358,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# explicitly set user/group IDs
359,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
360,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
361,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# grab gosu for easy step-down from root
362,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
363,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
364,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
365,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
366,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
367,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# arches officialy built by upstream
368,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
369,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
370,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
371,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
372,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
373,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
374,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
375,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
376,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
377,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
378,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
379,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
380,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
381,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile, # backwards compat
382,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# vim:set ft=dockerfile:
383,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# explicitly set user/group IDs
384,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
385,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
386,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# grab gosu for easy step-down from root
387,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
388,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
389,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
390,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
391,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# see note below about ""*.pyc"" files"
392,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# arches officialy built by upstream
393,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
394,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
395,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
396,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
397,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
398,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
399,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
400,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
401,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
402,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
403,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
404,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
405,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
406,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile, # backwards compat
407,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# vim:set ft=dockerfile:
408,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# explicitly set user/group IDs
409,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# grab gosu for easy step-down from root
410,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
411,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
412,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
413,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
414,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# vim:set ft=dockerfile:
415,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# explicitly set user/group IDs
416,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# grab gosu for easy step-down from root
417,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
418,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
419,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# vim:set ft=dockerfile:
420,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# explicitly set user/group IDs
421,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
422,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
423,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# grab gosu for easy step-down from root
424,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
425,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
426,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
427,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
428,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
429,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# arches officialy built by upstream
430,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
431,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
432,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
433,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
434,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
435,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
436,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
437,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
438,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
439,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
440,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
441,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
442,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
443,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile, # backwards compat
444,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# vim:set ft=dockerfile:
445,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# explicitly set user/group IDs
446,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
447,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
448,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
449,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
450,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
451,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
452,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
453,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
454,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# see note below about ""*.pyc"" files"
455,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# arches officialy built by upstream
456,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
457,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
458,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
459,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
460,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
461,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
462,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
463,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
464,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
465,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
466,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
467,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
468,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
469,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
470,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile, # backwards compat
471,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
472,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
473,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
474,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
475,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		krb5-dev \
476,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		openldap-dev \
477,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: prove not found
478,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
479,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
480,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
481,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
482,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
483,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
484,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
485,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
486,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
487,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#p' --recursive /usr/local \
488,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
489,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
490,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
491,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
492,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
493,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
494,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
495,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
496,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		krb5-dev \
497,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		openldap-dev \
498,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: prove not found
499,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
500,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
501,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
502,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
503,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
504,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
505,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
506,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
507,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
508,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
509,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
510,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
511,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
512,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
513,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile, # backwards compat
514,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
515,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
516,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
517,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
518,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		krb5-dev \
519,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		openldap-dev \
520,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: prove not found
521,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
522,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
523,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
524,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
525,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
526,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
527,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
528,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
529,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
530,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
531,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
532,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
533,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
534,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
535,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
536,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
537,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile, # backwards compat
538,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# vim:set ft=dockerfile:
539,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# explicitly set user/group IDs
540,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# grab gosu for easy step-down from root
541,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
542,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
543,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
544,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
545,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
546,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
547,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile, # backwards compat
548,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
549,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
550,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
551,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
552,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		krb5-dev \
553,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		openldap-dev \
554,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: prove not found
555,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
556,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
557,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
558,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
559,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
560,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
561,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
562,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
563,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
564,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
565,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
566,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
567,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
568,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile, # backwards compat
569,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# vim:set ft=dockerfile:
570,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# explicitly set user/group IDs
571,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
572,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
573,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# grab gosu for easy step-down from root
574,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
575,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
576,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
577,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
578,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
579,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# arches officialy built by upstream
580,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
581,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
582,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
583,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
584,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
585,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
586,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
587,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
588,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
589,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
590,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
591,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
592,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
593,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile, # backwards compat
594,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# vim:set ft=dockerfile:
595,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# explicitly set user/group IDs
596,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# grab gosu for easy step-down from root
597,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
598,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
599,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
600,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# arches officialy built by upstream
601,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
602,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
603,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
604,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
605,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
606,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
607,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
608,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
609,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
610,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
611,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
612,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile, # backwards compat
613,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
614,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
615,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
616,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
617,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		krb5-dev \
618,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		openldap-dev \
619,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: prove not found
620,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
621,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
622,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
623,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
624,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
625,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
626,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
627,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
628,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
629,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
630,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
631,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
632,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
633,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
634,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile, # backwards compat
635,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
636,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
637,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
638,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
639,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		krb5-dev \
640,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		openldap-dev \
641,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: prove not found
642,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
643,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
644,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
645,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
646,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
647,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
648,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
649,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
650,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
651,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#p' --recursive /usr/local \
652,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
653,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
654,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
655,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
656,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile, # backwards compat
657,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
658,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
659,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
660,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
661,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		krb5-dev \
662,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		openldap-dev \
663,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
664,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
665,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
666,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
667,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
668,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
669,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
670,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
671,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
672,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
673,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# vim:set ft=dockerfile:
674,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# explicitly set user/group IDs
675,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# grab gosu for easy step-down from root
676,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
677,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
678,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# arches officialy built by upstream
679,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
680,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
681,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
682,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
683,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
684,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
685,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
686,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
687,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
688,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
689,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
690,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile, # backwards compat
691,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# vim:set ft=dockerfile:
692,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# explicitly set user/group IDs
693,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# grab gosu for easy step-down from root
694,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
695,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
696,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
697,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
698,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
699,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
700,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
701,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
702,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
703,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
704,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		krb5-dev \
705,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		openldap-dev \
706,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: prove not found
707,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
708,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
709,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
710,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
711,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
712,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
713,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
714,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
715,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
716,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
717,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
718,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
719,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
720,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
721,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile, # backwards compat
722,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
723,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
724,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
725,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
726,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		krb5-dev \
727,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		openldap-dev \
728,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: prove not found
729,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
730,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
731,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
732,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
733,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
734,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
735,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
736,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
737,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
738,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
739,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
740,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
741,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
742,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
743,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile, # backwards compat
744,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# vim:set ft=dockerfile:
745,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# explicitly set user/group IDs
746,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
747,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
748,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# grab gosu for easy step-down from root
749,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
750,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
751,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
752,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
753,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# see note below about ""*.pyc"" files"
754,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# arches officialy built by upstream
755,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
756,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
757,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
758,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
759,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
760,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
761,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
762,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
763,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
764,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
765,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
766,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
767,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
768,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile, # backwards compat
769,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
770,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
771,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# vim:set ft=dockerfile:
772,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# explicitly set user/group IDs
773,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
774,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
775,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# grab gosu for easy step-down from root
776,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
777,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
778,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
779,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
780,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
781,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# arches officialy built by upstream
782,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
783,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
784,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
785,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
786,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
787,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
788,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
789,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
790,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
791,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
792,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
793,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
794,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
795,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile, # backwards compat
796,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# vim:set ft=dockerfile:
797,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# explicitly set user/group IDs
798,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# grab gosu for easy step-down from root
799,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
800,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
801,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# arches officialy built by upstream
802,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
803,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
804,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
805,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
806,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
807,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
808,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
809,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
810,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
811,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
812,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
813,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile, # backwards compat
814,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# vim:set ft=dockerfile:
815,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# explicitly set user/group IDs
816,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# grab gosu for easy step-down from root
817,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
818,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
819,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
820,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# arches officialy built by upstream
821,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
822,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
823,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
824,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
825,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
826,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
827,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
828,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
829,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
830,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
831,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
832,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile, # backwards compat
833,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# vim:set ft=dockerfile:
834,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# explicitly set user/group IDs
835,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
836,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
837,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# grab gosu for easy step-down from root
838,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
839,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
840,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
841,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
842,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
843,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# see note below about ""*.pyc"" files"
844,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# arches officialy built by upstream
845,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
846,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
847,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
848,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
849,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
850,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
851,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
852,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
853,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
854,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
855,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
856,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
857,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
858,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile, # backwards compat
859,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# vim:set ft=dockerfile:
860,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# explicitly set user/group IDs
861,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
862,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
863,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# grab gosu for easy step-down from root
864,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
865,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
866,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
867,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
868,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
869,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# arches officialy built by upstream
870,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
871,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
872,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
873,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
874,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
875,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
876,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
877,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
878,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
879,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
880,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
881,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
882,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
883,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile, # backwards compat
884,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
885,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
886,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
887,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
888,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		krb5-dev \
889,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		openldap-dev \
890,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
891,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
892,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
893,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
894,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
895,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
896,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
897,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
898,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# vim:set ft=dockerfile:
899,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# explicitly set user/group IDs
900,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# grab gosu for easy step-down from root
901,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
902,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
903,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
904,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
905,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# arches officialy built by upstream
906,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
907,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
908,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
909,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
910,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
911,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
912,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
913,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
914,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
915,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
916,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
917,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile, # backwards compat
918,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
919,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
920,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
921,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
922,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		krb5-dev \
923,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		openldap-dev \
924,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: prove not found
925,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
926,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
927,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
928,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
929,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
930,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
931,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
932,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
933,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
934,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#p' --recursive /usr/local \
935,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
936,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
937,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
938,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
939,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile, # backwards compat
940,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# vim:set ft=dockerfile:
941,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# explicitly set user/group IDs
942,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
943,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
944,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
945,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
946,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
947,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
948,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
949,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
950,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# see note below about ""*.pyc"" files"
951,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# arches officialy built by upstream
952,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
953,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
954,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
955,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
956,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
957,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
958,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
959,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
960,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
961,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
962,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
963,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
964,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
965,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile, # backwards compat
966,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# vim:set ft=dockerfile:
967,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# explicitly set user/group IDs
968,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# grab gosu for easy step-down from root
969,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
970,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
971,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
972,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
973,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
974,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
975,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
976,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
977,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		krb5-dev \
978,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		openldap-dev \
979,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: prove not found
980,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
981,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
982,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
983,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
984,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
985,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
986,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
987,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
988,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
989,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
990,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
991,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
992,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
993,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
994,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile, # backwards compat
995,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
996,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
997,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
998,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
999,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		krb5-dev \
1000,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		openldap-dev \
1001,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1002,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1003,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1004,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1005,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1006,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1007,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1008,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1009,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1010,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1011,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1012,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1013,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile, # backwards compat
1014,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1015,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1016,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1017,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1018,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		krb5-dev \
1019,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		openldap-dev \
1020,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1021,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1022,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1023,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1024,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1025,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1026,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1027,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1028,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1029,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1030,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# vim:set ft=dockerfile:
1031,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# explicitly set user/group IDs
1032,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1033,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1034,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# grab gosu for easy step-down from root
1035,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1036,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1037,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1038,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1039,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1040,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# arches officialy built by upstream
1041,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1042,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1043,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1044,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1045,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1046,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1047,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1048,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1049,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1050,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1051,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1052,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1053,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1054,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile, # backwards compat
1055,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# vim:set ft=dockerfile:
1056,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# explicitly set user/group IDs
1057,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1058,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1059,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# grab gosu for easy step-down from root
1060,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1061,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1062,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1063,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1064,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1065,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1066,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# arches officialy built by upstream
1067,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1068,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1069,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1070,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1071,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1072,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1073,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1074,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1075,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1076,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1077,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1078,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1079,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1080,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile, # backwards compat
1081,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1082,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# explicitly set user/group IDs
1083,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1084,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1085,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1086,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# vim:set ft=dockerfile:
1087,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1088,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# grab gosu for easy step-down from root
1089,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1090,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1091,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1092,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1093,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1094,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1095,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		krb5-dev \
1096,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		openldap-dev \
1097,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: prove not found
1098,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1099,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1100,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1101,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1102,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1103,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1104,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1105,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1106,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1107,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1108,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1109,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1110,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1111,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile, # backwards compat
1112,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# vim:set ft=dockerfile:
1113,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# explicitly set user/group IDs
1114,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1115,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1116,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
1117,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1118,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1119,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1120,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1121,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1122,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1123,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# arches officialy built by upstream
1124,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1125,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1126,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1127,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1128,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1129,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1130,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1131,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1132,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1133,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1134,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1135,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1136,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1137,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile, # backwards compat
1138,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# vim:set ft=dockerfile:
1139,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# explicitly set user/group IDs
1140,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# grab gosu for easy step-down from root
1141,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1142,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1143,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# arches officialy built by upstream
1144,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1145,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1146,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1147,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1148,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1149,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1150,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1151,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1152,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1153,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1154,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1155,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile, # backwards compat
1156,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# vim:set ft=dockerfile:
1157,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# explicitly set user/group IDs
1158,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# grab gosu for easy step-down from root
1159,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1160,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1161,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1162,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1163,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1164,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# vim:set ft=dockerfile:
1165,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# explicitly set user/group IDs
1166,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# grab gosu for easy step-down from root
1167,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1168,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1169,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# vim:set ft=dockerfile:
1170,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1171,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# grab gosu for easy step-down from root
1172,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1173,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1174,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1175,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1176,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1177,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1178,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		krb5-dev \
1179,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		openldap-dev \
1180,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
1181,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1182,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1183,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1184,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1185,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1186,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1187,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1188,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1189,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1190,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
1191,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1192,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1193,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1194,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1195,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile, # backwards compat
1196,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1197,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1198,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1199,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1200,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		krb5-dev \
1201,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		openldap-dev \
1202,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1203,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1204,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1205,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1206,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1207,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1208,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1209,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1210,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1211,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1212,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1213,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile, # backwards compat
1214,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1215,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1216,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1217,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1218,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		krb5-dev \
1219,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		openldap-dev \
1220,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1221,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1222,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1223,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1224,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1225,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1226,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1227,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1228,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1229,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1230,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1231,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile, # backwards compat
1232,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1233,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1234,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1235,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1236,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		krb5-dev \
1237,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		openldap-dev \
1238,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: prove not found
1239,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1240,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1241,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1242,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1243,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1244,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1245,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1246,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1247,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1248,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1249,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1250,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1251,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1252,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1253,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile, # backwards compat
1254,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# vim:set ft=dockerfile:
1255,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1256,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# grab gosu for easy step-down from root
1257,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1258,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1259,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# vim:set ft=dockerfile:
1260,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# explicitly set user/group IDs
1261,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1262,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1263,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# grab gosu for easy step-down from root
1264,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1265,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1266,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1267,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1268,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1269,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# arches officialy built by upstream
1270,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1271,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1272,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1273,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1274,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1275,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1276,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1277,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1278,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1279,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1280,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1281,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1282,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1283,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile, # backwards compat
1284,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# vim:set ft=dockerfile:
1285,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# explicitly set user/group IDs
1286,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# grab gosu for easy step-down from root
1287,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1288,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1289,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1290,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1291,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1292,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1293,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile, # backwards compat
1294,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1295,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1296,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1297,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1298,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		krb5-dev \
1299,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		openldap-dev \
1300,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1301,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1302,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1303,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1304,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1305,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1306,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1307,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1308,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# vim:set ft=dockerfile:
1309,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# explicitly set user/group IDs
1310,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1311,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1312,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# grab gosu for easy step-down from root
1313,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1314,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1315,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1316,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1317,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1318,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# arches officialy built by upstream
1319,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1320,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1321,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1322,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1323,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1324,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1325,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1326,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1327,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1328,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1329,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1330,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1331,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1332,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile, # backwards compat
1333,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# vim:set ft=dockerfile:
1334,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# explicitly set user/group IDs
1335,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# grab gosu for easy step-down from root
1336,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1337,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1338,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1339,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1340,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1341,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1342,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile, # backwards compat
1343,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# vim:set ft=dockerfile:
1344,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# explicitly set user/group IDs
1345,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1346,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1347,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# grab gosu for easy step-down from root
1348,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1349,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1350,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1351,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1352,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1353,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# arches officialy built by upstream
1354,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1355,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1356,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1357,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1358,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1359,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1360,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1361,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1362,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1363,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1364,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1365,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1366,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1367,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile, # backwards compat
1368,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# vim:set ft=dockerfile:
1369,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# explicitly set user/group IDs
1370,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# grab gosu for easy step-down from root
1371,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1372,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1373,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# arches officialy built by upstream
1374,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1375,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1376,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1377,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1378,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1379,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1380,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1381,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1382,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1383,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1384,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1385,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile, # backwards compat
1386,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# vim:set ft=dockerfile:
1387,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# explicitly set user/group IDs
1388,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# grab gosu for easy step-down from root
1389,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1390,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1391,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1392,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1393,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1394,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1395,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1396,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1397,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1398,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		krb5-dev \
1399,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		openldap-dev \
1400,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1401,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1402,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1403,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1404,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1405,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1406,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1407,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1408,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1409,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1410,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1411,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1412,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile, # backwards compat
1413,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1414,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1415,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1416,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1417,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		krb5-dev \
1418,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		openldap-dev \
1419,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: prove not found
1420,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1421,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1422,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1423,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1424,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1425,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1426,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1427,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1428,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1429,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1430,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1431,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1432,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1433,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1434,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile, # backwards compat
1435,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1436,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1437,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1438,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1439,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1440,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# vim:set ft=dockerfile:
1441,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# explicitly set user/group IDs
1442,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# grab gosu for easy step-down from root
1443,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1444,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1445,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1446,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1447,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# arches officialy built by upstream
1448,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1449,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1450,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1451,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1452,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1453,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1454,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1455,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1456,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1457,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1458,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1459,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile, # backwards compat
1460,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# vim:set ft=dockerfile:
1461,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1462,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# grab gosu for easy step-down from root
1463,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1464,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1465,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# vim:set ft=dockerfile:
1466,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1467,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# grab gosu for easy step-down from root
1468,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1469,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1470,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# vim:set ft=dockerfile:
1471,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# explicitly set user/group IDs
1472,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1473,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1474,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# grab gosu for easy step-down from root
1475,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1476,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1477,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1478,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1479,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1480,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
1481,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# arches officialy built by upstream
1482,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1483,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1484,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1485,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1486,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1487,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1488,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1489,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1490,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1491,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1492,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1493,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1494,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1495,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile, # backwards compat
1496,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1497,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1498,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1499,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1500,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		krb5-dev \
1501,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		openldap-dev \
1502,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: prove not found
1503,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1504,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1505,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1506,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1507,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1508,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1509,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1510,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1511,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1512,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1513,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1514,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1515,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1516,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1517,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1518,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# explicitly set user/group IDs
1519,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1520,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1521,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1522,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# arches officialy built by upstream
1523,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1524,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1525,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1526,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1527,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1528,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1529,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1530,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1531,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1532,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1533,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1534,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile, # backwards compat
1535,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# vim:set ft=dockerfile:
1536,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1537,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# grab gosu for easy step-down from root
1538,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1539,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1540,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# vim:set ft=dockerfile:
1541,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# explicitly set user/group IDs
1542,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# grab gosu for easy step-down from root
1543,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1544,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1545,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1546,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1547,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1548,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1549,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile, # backwards compat
1550,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# vim:set ft=dockerfile:
1551,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# explicitly set user/group IDs
1552,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# grab gosu for easy step-down from root
1553,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1554,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1555,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1556,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1557,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# vim:set ft=dockerfile:
1558,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# explicitly set user/group IDs
1559,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# grab gosu for easy step-down from root
1560,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1561,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1562,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1563,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1564,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# arches officialy built by upstream
1565,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1566,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1567,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1568,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1569,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1570,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1571,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1572,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1573,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1574,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1575,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1576,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile, # backwards compat
1577,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1578,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1579,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1580,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1581,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		krb5-dev \
1582,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		openldap-dev \
1583,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: prove not found
1584,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1585,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1586,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1587,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1588,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1589,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1590,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1591,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1592,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1593,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1594,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1595,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1596,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1597,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1598,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile, # backwards compat
1599,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1600,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1601,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1602,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1603,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		krb5-dev \
1604,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		openldap-dev \
1605,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: prove not found
1606,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1607,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1608,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1609,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
1610,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1611,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1612,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1613,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1614,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1615,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1616,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1617,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1618,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1619,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1620,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# vim:set ft=dockerfile:
1621,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# explicitly set user/group IDs
1622,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1623,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1624,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# grab gosu for easy step-down from root
1625,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1626,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1627,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1628,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1629,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1630,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# arches officialy built by upstream
1631,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1632,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1633,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1634,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1635,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1636,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1637,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1638,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1639,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1640,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1641,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1642,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1643,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1644,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile, # backwards compat
1645,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1646,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1647,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1648,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1649,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		krb5-dev \
1650,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		openldap-dev \
1651,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: prove not found
1652,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1653,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1654,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1655,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1656,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1657,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1658,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1659,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1660,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1661,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
1662,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1663,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1664,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1665,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1666,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile, # backwards compat
1667,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1668,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# explicitly set user/group IDs
1669,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1670,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1671,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1672,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1673,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1674,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1675,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1676,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile, # backwards compat
1677,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# vim:set ft=dockerfile:
1678,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# explicitly set user/group IDs
1679,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# grab gosu for easy step-down from root
1680,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1681,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1682,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1683,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1684,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1685,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1686,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile, # backwards compat
1687,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# vim:set ft=dockerfile:
1688,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# explicitly set user/group IDs
1689,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# grab gosu for easy step-down from root
1690,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1691,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1692,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1693,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1694,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# arches officialy built by upstream
1695,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1696,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1697,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1698,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1699,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1700,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1701,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1702,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1703,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1704,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1705,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1706,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile, # backwards compat
1707,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1708,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1709,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1710,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1711,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		krb5-dev \
1712,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		openldap-dev \
1713,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: prove not found
1714,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1715,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1716,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1717,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1718,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1719,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1720,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1721,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1722,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1723,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1724,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1725,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1726,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1727,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1728,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile, # backwards compat
1729,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1730,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1731,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1732,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1733,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		krb5-dev \
1734,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		openldap-dev \
1735,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1736,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1737,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1738,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1739,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1740,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1741,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1742,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1743,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1744,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1745,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1746,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1747,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1748,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1749,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1750,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		krb5-dev \
1751,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		openldap-dev \
1752,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1753,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1754,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1755,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1756,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1757,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1758,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1759,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1760,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# vim:set ft=dockerfile:
1761,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1762,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# grab gosu for easy step-down from root
1763,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1764,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1765,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# vim:set ft=dockerfile:
1766,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# explicitly set user/group IDs
1767,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# grab gosu for easy step-down from root
1768,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1769,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1770,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1771,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1772,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# vim:set ft=dockerfile:
1773,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1774,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# grab gosu for easy step-down from root
1775,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1776,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1777,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# vim:set ft=dockerfile:
1778,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# explicitly set user/group IDs
1779,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# grab gosu for easy step-down from root
1780,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1781,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1782,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# vim:set ft=dockerfile:
1783,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1784,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# grab gosu for easy step-down from root
1785,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1786,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1787,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# vim:set ft=dockerfile:
1788,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# explicitly set user/group IDs
1789,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# grab gosu for easy step-down from root
1790,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1791,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1792,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1793,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1794,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1795,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1796,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile, # backwards compat
1797,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1798,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1799,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1800,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1801,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		krb5-dev \
1802,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		openldap-dev \
1803,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: prove not found
1804,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1805,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1806,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1807,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1808,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1809,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1810,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1811,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1812,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1813,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1814,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1815,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1816,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1817,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1818,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile, # backwards compat
1819,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1820,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# explicitly set user/group IDs
1821,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1822,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1823,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1824,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# vim:set ft=dockerfile:
1825,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# explicitly set user/group IDs
1826,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# grab gosu for easy step-down from root
1827,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1828,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1829,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1830,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1831,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1832,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1833,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		krb5-dev \
1834,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		openldap-dev \
1835,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1836,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1837,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1838,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1839,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1840,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1841,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1842,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1843,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# vim:set ft=dockerfile:
1844,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# explicitly set user/group IDs
1845,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1846,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1847,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# grab gosu for easy step-down from root
1848,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1849,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1850,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1851,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1852,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1853,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# arches officialy built by upstream
1854,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1855,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1856,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1857,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1858,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1859,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1860,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1861,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1862,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1863,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1864,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1865,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1866,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1867,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile, # backwards compat
1868,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# vim:set ft=dockerfile:
1869,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# explicitly set user/group IDs
1870,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# grab gosu for easy step-down from root
1871,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1872,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1873,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1874,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1875,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1876,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1877,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1878,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1879,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		krb5-dev \
1880,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		openldap-dev \
1881,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1882,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1883,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1884,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1885,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1886,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1887,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1888,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1889,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1890,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1891,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1892,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile, # backwards compat
1893,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# vim:set ft=dockerfile:
1894,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# explicitly set user/group IDs
1895,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# grab gosu for easy step-down from root
1896,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1897,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1898,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1899,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1900,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
1901,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1902,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1903,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1904,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		krb5-dev \
1905,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		openldap-dev \
1906,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: prove not found
1907,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1908,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1909,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1910,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1911,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1912,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1913,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1914,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1915,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1916,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#p' --recursive /usr/local \
1917,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1918,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1919,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1920,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1921,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile, # backwards compat
1922,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# vim:set ft=dockerfile:
1923,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1924,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# grab gosu for easy step-down from root
1925,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1926,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1927,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1928,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1929,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1930,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1931,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		krb5-dev \
1932,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		openldap-dev \
1933,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: prove not found
1934,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1935,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1936,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1937,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1938,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1939,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1940,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1941,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1942,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1943,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1944,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1945,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1946,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1947,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1948,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1949,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1950,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1951,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1952,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		krb5-dev \
1953,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		openldap-dev \
1954,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1955,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1956,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1957,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1958,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1959,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1960,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1961,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1962,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1963,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1964,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1965,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile, # backwards compat
1966,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# vim:set ft=dockerfile:
1967,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# explicitly set user/group IDs
1968,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1969,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1970,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# grab gosu for easy step-down from root
1971,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1972,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1973,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1974,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1975,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1976,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
1977,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# arches officialy built by upstream
1978,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1979,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1980,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1981,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1982,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1983,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1984,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1985,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1986,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1987,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1988,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1989,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1990,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1991,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile, # backwards compat
1992,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# vim:set ft=dockerfile:
1993,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1994,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# grab gosu for easy step-down from root
1995,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1996,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1997,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1998,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1999,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2000,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2001,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		krb5-dev \
2002,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		openldap-dev \
2003,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: prove not found
2004,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2005,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2006,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2007,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2008,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2009,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2010,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2011,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2012,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2013,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
2014,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2015,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2016,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2017,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2018,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile, # backwards compat
2019,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# vim:set ft=dockerfile:
2020,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2021,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# grab gosu for easy step-down from root
2022,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2023,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2024,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# vim:set ft=dockerfile:
2025,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# explicitly set user/group IDs
2026,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2027,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2028,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# grab gosu for easy step-down from root
2029,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2030,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2031,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2032,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2033,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2034,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# arches officialy built by upstream
2035,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2036,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2037,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2038,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2039,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2040,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2041,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2042,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2043,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2044,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2045,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2046,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2047,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2048,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile, # backwards compat
2049,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# vim:set ft=dockerfile:
2050,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2051,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# grab gosu for easy step-down from root
2052,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2053,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2054,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
2055,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
2056,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2057,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2058,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		krb5-dev \
2059,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		openldap-dev \
2060,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: prove not found
2061,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2062,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2063,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2064,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2065,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2066,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2067,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2068,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2069,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2070,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
2071,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2072,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2073,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2074,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2075,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# vim:set ft=dockerfile:
2076,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# explicitly set user/group IDs
2077,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# grab gosu for easy step-down from root
2078,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2079,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2080,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# vim:set ft=dockerfile:
2081,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2082,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# grab gosu for easy step-down from root
2083,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2084,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2085,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# vim:set ft=dockerfile:
2086,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# explicitly set user/group IDs
2087,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# grab gosu for easy step-down from root
2088,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2089,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2090,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# vim:set ft=dockerfile:
2091,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# explicitly set user/group IDs
2092,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2093,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2094,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# grab gosu for easy step-down from root
2095,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2096,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2097,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2098,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2099,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# arches officialy built by upstream
2100,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2101,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2102,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2103,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2104,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2105,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2106,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2107,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2108,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2109,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2110,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2111,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile, # backwards compat
2112,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2113,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2114,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2115,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2116,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		krb5-dev \
2117,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		openldap-dev \
2118,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: prove not found
2119,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2120,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2121,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2122,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2123,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2124,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2125,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2126,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2127,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2128,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2129,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2130,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2131,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2132,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile, # backwards compat
2133,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
2134,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# explicitly set user/group IDs
2135,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
2136,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2137,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2138,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2139,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2140,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# vim:set ft=dockerfile:
2141,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# explicitly set user/group IDs
2142,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# grab gosu for easy step-down from root
2143,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2144,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2145,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2146,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2147,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2148,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2149,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		krb5-dev \
2150,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		openldap-dev \
2151,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2152,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2153,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2154,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2155,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2156,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2157,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2158,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2159,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2160,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2161,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2162,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile, # backwards compat
2163,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# vim:set ft=dockerfile:
2164,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2165,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# grab gosu for easy step-down from root
2166,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2167,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2168,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
2169,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# explicitly set user/group IDs
2170,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
2171,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2172,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2173,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2174,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2175,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2176,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
2177,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# explicitly set user/group IDs
2178,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
2179,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2180,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2181,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2182,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# arches officialy built by upstream
2183,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2184,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2185,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2186,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2187,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2188,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2189,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2190,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2191,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2192,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2193,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2194,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile, # backwards compat
2195,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,# vim:set ft=dockerfile:
2196,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2197,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2198,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2199,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2200,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2201,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2202,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		krb5-dev \
2203,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		openldap-dev \
2204,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: prove not found
2205,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2206,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2207,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2208,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2209,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2210,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2211,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2212,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2213,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2214,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2215,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2216,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2217,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2218,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2219,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile, # backwards compat
2220,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2221,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2222,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2223,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2224,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		krb5-dev \
2225,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		openldap-dev \
2226,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: prove not found
2227,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2228,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2229,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2230,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2231,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2232,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2233,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2234,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2235,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2236,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2237,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2238,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2239,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2240,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2241,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile, # backwards compat
2242,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# vim:set ft=dockerfile:
2243,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# explicitly set user/group IDs
2244,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# grab gosu for easy step-down from root
2245,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2246,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2247,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# arches officialy built by upstream
2248,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2249,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2250,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2251,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2252,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2253,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2254,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2255,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2256,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2257,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2258,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2259,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile, # backwards compat
2260,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# vim:set ft=dockerfile:
2261,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# explicitly set user/group IDs
2262,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# grab gosu for easy step-down from root
2263,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2264,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2265,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2266,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2267,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# arches officialy built by upstream
2268,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2269,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2270,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2271,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2272,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2273,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2274,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2275,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2276,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2277,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2278,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2279,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile, # backwards compat
2280,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# vim:set ft=dockerfile:
2281,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# explicitly set user/group IDs
2282,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2283,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2284,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# grab gosu for easy step-down from root
2285,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2286,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2287,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2288,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2289,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2290,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# arches officialy built by upstream
2291,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2292,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2293,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2294,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2295,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2296,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2297,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2298,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2299,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2300,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2301,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2302,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2303,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2304,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile, # backwards compat
2305,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# vim:set ft=dockerfile:
2306,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# explicitly set user/group IDs
2307,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# grab gosu for easy step-down from root
2308,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2309,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2310,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2311,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2312,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2313,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2314,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile, # backwards compat
2315,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# vim:set ft=dockerfile:
2316,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2317,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# grab gosu for easy step-down from root
2318,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2319,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2320,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# vim:set ft=dockerfile:
2321,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# explicitly set user/group IDs
2322,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# grab gosu for easy step-down from root
2323,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2324,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2325,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2326,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2327,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2328,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2329,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile, # backwards compat
2330,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2331,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2332,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2333,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2334,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		krb5-dev \
2335,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		openldap-dev \
2336,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2337,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2338,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2339,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2340,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2341,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2342,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2343,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2344,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# vim:set ft=dockerfile:
2345,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# explicitly set user/group IDs
2346,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2347,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2348,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# grab gosu for easy step-down from root
2349,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2350,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2351,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2352,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2353,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2354,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# arches officialy built by upstream
2355,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2356,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2357,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2358,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2359,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2360,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2361,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2362,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2363,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2364,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2365,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2366,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2367,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2368,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile, # backwards compat
2369,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# vim:set ft=dockerfile:
2370,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# explicitly set user/group IDs
2371,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# grab gosu for easy step-down from root
2372,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2373,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2374,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2375,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2376,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2377,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2378,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile, # backwards compat
2379,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2380,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2381,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2382,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2383,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		krb5-dev \
2384,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		openldap-dev \
2385,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2386,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2387,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2388,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2389,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2390,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2391,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2392,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2393,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# vim:set ft=dockerfile:
2394,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2395,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# grab gosu for easy step-down from root
2396,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2397,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2398,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# vim:set ft=dockerfile:
2399,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# explicitly set user/group IDs
2400,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# grab gosu for easy step-down from root
2401,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2402,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2403,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# arches officialy built by upstream
2404,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2405,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2406,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2407,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2408,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2409,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2410,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2411,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2412,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2413,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2414,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2415,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile, # backwards compat
2416,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# vim:set ft=dockerfile:
2417,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# explicitly set user/group IDs
2418,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# grab gosu for easy step-down from root
2419,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2420,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2421,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2422,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2423,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# arches officialy built by upstream
2424,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2425,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2426,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2427,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2428,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2429,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2430,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2431,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2432,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2433,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2434,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2435,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile, # backwards compat
2436,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# vim:set ft=dockerfile:
2437,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2438,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# grab gosu for easy step-down from root
2439,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2440,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2441,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2442,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# explicitly set user/group IDs
2443,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2444,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2445,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2446,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2447,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2448,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# arches officialy built by upstream
2449,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2450,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2451,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2452,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2453,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2454,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2455,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2456,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2457,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2458,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2459,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2460,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile, # backwards compat
2461,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# vim:set ft=dockerfile:
2462,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# explicitly set user/group IDs
2463,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# grab gosu for easy step-down from root
2464,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2465,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2466,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2467,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2468,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2469,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# explicitly set user/group IDs
2470,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2471,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2472,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2473,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2474,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2475,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2476,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2477,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2478,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# arches officialy built by upstream
2479,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2480,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2481,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2482,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2483,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2484,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2485,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2486,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2487,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2488,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2489,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2490,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2491,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2492,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile, # backwards compat
2493,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2494,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2495,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2496,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2497,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		krb5-dev \
2498,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		openldap-dev \
2499,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2500,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2501,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2502,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2503,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2504,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2505,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2506,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2507,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2508,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2509,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2510,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2511,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		krb5-dev \
2512,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		openldap-dev \
2513,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2514,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2515,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2516,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2517,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2518,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2519,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2520,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2521,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2522,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2523,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2524,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# vim:set ft=dockerfile:
2525,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# explicitly set user/group IDs
2526,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2527,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2528,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# grab gosu for easy step-down from root
2529,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2530,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2531,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2532,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2533,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# arches officialy built by upstream
2534,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2535,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2536,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2537,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2538,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2539,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2540,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2541,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2542,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2543,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2544,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2545,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile, # backwards compat
2546,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# vim:set ft=dockerfile:
2547,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2548,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# grab gosu for easy step-down from root
2549,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2550,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2551,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# vim:set ft=dockerfile:
2552,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# explicitly set user/group IDs
2553,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2554,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2555,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# grab gosu for easy step-down from root
2556,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2557,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2558,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2559,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2560,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2561,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# arches officialy built by upstream
2562,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2563,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2564,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2565,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2566,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2567,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2568,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2569,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2570,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2571,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2572,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2573,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2574,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2575,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile, # backwards compat
2576,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# vim:set ft=dockerfile:
2577,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# explicitly set user/group IDs
2578,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# grab gosu for easy step-down from root
2579,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2580,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2581,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2582,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2583,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2584,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2585,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2586,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2587,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		krb5-dev \
2588,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		openldap-dev \
2589,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: prove not found
2590,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2591,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2592,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2593,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2594,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2595,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2596,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2597,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2598,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2599,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2600,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2601,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2602,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2603,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2604,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile, # backwards compat
2605,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# vim:set ft=dockerfile:
2606,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# explicitly set user/group IDs
2607,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2608,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2609,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# grab gosu for easy step-down from root
2610,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2611,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2612,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2613,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2614,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2615,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2616,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# arches officialy built by upstream
2617,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2618,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2619,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2620,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2621,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2622,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2623,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2624,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2625,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2626,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2627,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2628,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2629,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2630,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile, # backwards compat
2631,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# vim:set ft=dockerfile:
2632,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# explicitly set user/group IDs
2633,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# grab gosu for easy step-down from root
2634,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2635,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2636,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2637,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2638,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2639,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2640,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile, # backwards compat
2641,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
2642,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
2643,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2644,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2645,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		krb5-dev \
2646,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		openldap-dev \
2647,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: prove not found
2648,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2649,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2650,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2651,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2652,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2653,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2654,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2655,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2656,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2657,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
2658,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2659,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2660,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2661,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2662,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile, # backwards compat
2663,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2664,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2665,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2666,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2667,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		krb5-dev \
2668,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		openldap-dev \
2669,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: prove not found
2670,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2671,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2672,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2673,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2674,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2675,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2676,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2677,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2678,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2679,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
2680,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2681,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2682,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2683,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2684,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile, # backwards compat
2685,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# vim:set ft=dockerfile:
2686,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# explicitly set user/group IDs
2687,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# grab gosu for easy step-down from root
2688,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2689,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2690,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2691,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2692,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# arches officialy built by upstream
2693,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2694,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2695,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2696,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2697,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2698,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2699,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2700,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2701,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2702,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2703,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2704,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile, # backwards compat
2705,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# vim:set ft=dockerfile:
2706,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2707,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# grab gosu for easy step-down from root
2708,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2709,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2710,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# vim:set ft=dockerfile:
2711,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# explicitly set user/group IDs
2712,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# grab gosu for easy step-down from root
2713,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2714,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2715,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# arches officialy built by upstream
2716,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2717,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2718,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2719,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2720,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2721,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2722,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2723,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2724,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2725,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2726,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2727,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile, # backwards compat
2728,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# vim:set ft=dockerfile:
2729,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# explicitly set user/group IDs
2730,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2731,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2732,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# grab gosu for easy step-down from root
2733,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2734,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2735,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2736,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2737,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# see note below about ""*.pyc"" files"
2738,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# arches officialy built by upstream
2739,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2740,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2741,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2742,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2743,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2744,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2745,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2746,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2747,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2748,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2749,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2750,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2751,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2752,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile, # backwards compat
2753,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2754,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2755,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2756,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2757,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2758,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2759,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# vim:set ft=dockerfile:
2760,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# explicitly set user/group IDs
2761,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# grab gosu for easy step-down from root
2762,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2763,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2764,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2765,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2766,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2767,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2768,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2769,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2770,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2771,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2772,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		krb5-dev \
2773,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		openldap-dev \
2774,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2775,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2776,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2777,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2778,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2779,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2780,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2781,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2782,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# vim:set ft=dockerfile:
2783,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# explicitly set user/group IDs
2784,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# grab gosu for easy step-down from root
2785,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2786,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2787,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2788,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2789,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2790,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2791,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile, # backwards compat
2792,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2793,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2794,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2795,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2796,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		krb5-dev \
2797,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		openldap-dev \
2798,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2799,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2800,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2801,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2802,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2803,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2804,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2805,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2806,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2807,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2808,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2809,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile, # backwards compat
2810,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# vim:set ft=dockerfile:
2811,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# explicitly set user/group IDs
2812,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2813,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2814,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# grab gosu for easy step-down from root
2815,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2816,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2817,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2818,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2819,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2820,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# see note below about ""*.pyc"" files"
2821,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# arches officialy built by upstream
2822,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2823,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2824,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2825,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2826,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2827,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2828,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2829,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2830,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2831,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2832,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2833,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2834,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2835,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile, # backwards compat
2836,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2837,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
2838,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2839,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2840,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		krb5-dev \
2841,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		openldap-dev \
2842,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: prove not found
2843,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2844,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2845,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2846,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
2847,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2848,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2849,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2850,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2851,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2852,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2853,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2854,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2855,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2856,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2857,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile, # backwards compat
2858,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# vim:set ft=dockerfile:
2859,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# explicitly set user/group IDs
2860,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# grab gosu for easy step-down from root
2861,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2862,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2863,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# arches officialy built by upstream
2864,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2865,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2866,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2867,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2868,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2869,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2870,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2871,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2872,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2873,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2874,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2875,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile, # backwards compat
2876,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# vim:set ft=dockerfile:
2877,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# explicitly set user/group IDs
2878,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# grab gosu for easy step-down from root
2879,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2880,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2881,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2882,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2883,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2884,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2885,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile, # backwards compat
2886,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2887,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2888,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2889,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2890,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		krb5-dev \
2891,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		openldap-dev \
2892,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2893,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2894,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2895,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2896,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2897,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2898,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2899,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2900,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2901,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2902,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2903,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# vim:set ft=dockerfile:
2904,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# explicitly set user/group IDs
2905,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# grab gosu for easy step-down from root
2906,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2907,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2908,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2909,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2910,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# vim:set ft=dockerfile:
2911,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# explicitly set user/group IDs
2912,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2913,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2914,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# grab gosu for easy step-down from root
2915,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2916,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2917,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2918,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2919,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
2920,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# arches officialy built by upstream
2921,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2922,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2923,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2924,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2925,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2926,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2927,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2928,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2929,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2930,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2931,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2932,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2933,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2934,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile, # backwards compat
2935,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# vim:set ft=dockerfile:
2936,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2937,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# grab gosu for easy step-down from root
2938,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2939,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2940,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# vim:set ft=dockerfile:
2941,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# explicitly set user/group IDs
2942,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# grab gosu for easy step-down from root
2943,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2944,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2945,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2946,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2947,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# vim:set ft=dockerfile:
2948,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2949,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# grab gosu for easy step-down from root
2950,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2951,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2952,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# vim:set ft=dockerfile:
2953,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# explicitly set user/group IDs
2954,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2955,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2956,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# grab gosu for easy step-down from root
2957,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2958,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2959,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2960,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2961,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2962,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# arches officialy built by upstream
2963,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2964,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2965,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2966,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2967,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2968,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2969,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2970,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2971,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2972,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2973,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2974,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2975,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2976,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile, # backwards compat
2977,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# vim:set ft=dockerfile:
2978,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# explicitly set user/group IDs
2979,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# grab gosu for easy step-down from root
2980,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2981,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2982,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2983,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# arches officialy built by upstream
2984,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2985,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2986,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2987,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2988,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2989,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2990,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2991,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2992,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2993,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2994,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2995,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile, # backwards compat
2996,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# vim:set ft=dockerfile:
2997,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# explicitly set user/group IDs
2998,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# grab gosu for easy step-down from root
2999,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3000,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3001,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3002,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3003,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3004,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3005,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3006,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3007,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3008,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		krb5-dev \
3009,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		openldap-dev \
3010,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3011,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3012,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3013,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3014,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3015,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3016,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3017,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3018,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3019,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3020,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3021,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3022,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile, # backwards compat
3023,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# vim:set ft=dockerfile:
3024,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3025,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# grab gosu for easy step-down from root
3026,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3027,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3028,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# vim:set ft=dockerfile:
3029,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# explicitly set user/group IDs
3030,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3031,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3032,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# grab gosu for easy step-down from root
3033,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3034,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3035,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3036,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3037,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3038,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# see note below about ""*.pyc"" files"
3039,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# arches officialy built by upstream
3040,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3041,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3042,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3043,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3044,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3045,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3046,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3047,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3048,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3049,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3050,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3051,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3052,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3053,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile, # backwards compat
3054,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3055,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3056,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3057,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3058,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		krb5-dev \
3059,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		openldap-dev \
3060,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: prove not found
3061,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3062,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3063,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3064,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3065,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3066,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3067,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3068,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3069,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3070,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3071,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3072,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3073,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3074,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile, # backwards compat
3075,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3076,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3077,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3078,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3079,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		krb5-dev \
3080,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		openldap-dev \
3081,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
3082,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3083,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3084,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3085,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3086,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3087,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3088,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3089,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3090,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3091,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3092,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3093,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
3094,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3095,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3096,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3097,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3098,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile, # backwards compat
3099,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# vim:set ft=dockerfile:
3100,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3101,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# grab gosu for easy step-down from root
3102,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3103,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3104,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# vim:set ft=dockerfile:
3105,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3106,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# grab gosu for easy step-down from root
3107,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3108,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3109,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,# vim:set ft=dockerfile:
3110,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3111,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3112,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
3113,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3114,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3115,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3116,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		krb5-dev \
3117,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		openldap-dev \
3118,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: prove not found
3119,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3120,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3121,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3122,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3123,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3124,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3125,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3126,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3127,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3128,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
3129,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3130,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3131,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3132,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3133,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3134,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3135,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3136,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3137,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		krb5-dev \
3138,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		openldap-dev \
3139,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3140,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3141,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3142,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3143,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3144,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3145,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3146,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3147,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3148,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3149,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3150,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3151,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3152,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3153,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile, # backwards compat
3154,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# vim:set ft=dockerfile:
3155,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# explicitly set user/group IDs
3156,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# grab gosu for easy step-down from root
3157,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3158,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3159,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3160,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3161,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3162,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3163,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile, # backwards compat
3164,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3165,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3166,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3167,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3168,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		krb5-dev \
3169,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		openldap-dev \
3170,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: prove not found
3171,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3172,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3173,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3174,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3175,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3176,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3177,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3178,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3179,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3180,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3181,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3182,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3183,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3184,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3185,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile, # backwards compat
3186,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# vim:set ft=dockerfile:
3187,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# explicitly set user/group IDs
3188,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# grab gosu for easy step-down from root
3189,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3190,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3191,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3192,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3193,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3194,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3195,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile, # backwards compat
3196,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3197,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3198,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,# vim:set ft=dockerfile:
3199,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3200,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3201,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# vim:set ft=dockerfile:
3202,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# explicitly set user/group IDs
3203,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# grab gosu for easy step-down from root
3204,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3205,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3206,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# arches officialy built by upstream
3207,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3208,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3209,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3210,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3211,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3212,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3213,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3214,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3215,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3216,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3217,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3218,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile, # backwards compat
3219,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# vim:set ft=dockerfile:
3220,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3221,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# grab gosu for easy step-down from root
3222,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3223,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3224,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3225,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3226,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3227,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3228,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		krb5-dev \
3229,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		openldap-dev \
3230,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3231,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3232,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3233,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3234,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3235,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3236,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3237,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3238,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3239,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3240,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3241,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# vim:set ft=dockerfile:
3242,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# explicitly set user/group IDs
3243,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# grab gosu for easy step-down from root
3244,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3245,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3246,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3247,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3248,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# arches officialy built by upstream
3249,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3250,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3251,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3252,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3253,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3254,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3255,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3256,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3257,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3258,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3259,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3260,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile, # backwards compat
3261,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# vim:set ft=dockerfile:
3262,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# explicitly set user/group IDs
3263,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# grab gosu for easy step-down from root
3264,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3265,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3266,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3267,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3268,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3269,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3270,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile, # backwards compat
3271,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# vim:set ft=dockerfile:
3272,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# explicitly set user/group IDs
3273,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3274,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3275,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# grab gosu for easy step-down from root
3276,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3277,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3278,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3279,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3280,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3281,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# arches officialy built by upstream
3282,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3283,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3284,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3285,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3286,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3287,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3288,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3289,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3290,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3291,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3292,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3293,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3294,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3295,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile, # backwards compat
3296,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
3297,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3298,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3299,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3300,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		krb5-dev \
3301,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		openldap-dev \
3302,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3303,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3304,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3305,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3306,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3307,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
3308,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3309,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3310,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3311,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3312,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3313,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3314,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		krb5-dev \
3315,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		openldap-dev \
3316,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# configure: error: prove not found
3317,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3318,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3319,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3320,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3321,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3322,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3323,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3324,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3325,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3326,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3327,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3328,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3329,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile, # backwards compat
3330,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3331,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3332,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3333,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3334,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		krb5-dev \
3335,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		openldap-dev \
3336,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: prove not found
3337,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3338,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3339,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3340,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3341,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3342,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3343,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3344,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3345,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3346,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3347,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3348,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3349,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3350,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3351,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile, # backwards compat
3352,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# vim:set ft=dockerfile:
3353,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# explicitly set user/group IDs
3354,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# grab gosu for easy step-down from root
3355,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3356,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3357,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# arches officialy built by upstream
3358,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3359,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3360,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3361,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3362,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3363,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3364,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3365,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3366,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3367,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3368,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3369,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile, # backwards compat
3370,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# vim:set ft=dockerfile:
3371,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# explicitly set user/group IDs
3372,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# grab gosu for easy step-down from root
3373,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3374,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3375,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# vim:set ft=dockerfile:
3376,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# explicitly set user/group IDs
3377,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# grab gosu for easy step-down from root
3378,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3379,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3380,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3381,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3382,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# arches officialy built by upstream
3383,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3384,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3385,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3386,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3387,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3388,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3389,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3390,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3391,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3392,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3393,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3394,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile, # backwards compat
3395,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# vim:set ft=dockerfile:
3396,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3397,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# grab gosu for easy step-down from root
3398,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3399,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3400,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# vim:set ft=dockerfile:
3401,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# explicitly set user/group IDs
3402,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3403,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3404,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# grab gosu for easy step-down from root
3405,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3406,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3407,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3408,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3409,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3410,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# see note below about ""*.pyc"" files"
3411,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# arches officialy built by upstream
3412,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3413,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3414,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3415,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3416,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3417,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3418,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3419,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3420,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3421,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3422,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3423,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3424,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3425,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile, # backwards compat
3426,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3427,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3428,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3429,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3430,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		krb5-dev \
3431,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		openldap-dev \
3432,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: prove not found
3433,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3434,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3435,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3436,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3437,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3438,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3439,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3440,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3441,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3442,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3443,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3444,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3445,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3446,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3447,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile, # backwards compat
3448,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3449,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3450,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3451,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3452,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		krb5-dev \
3453,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		openldap-dev \
3454,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: prove not found
3455,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3456,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3457,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3458,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3459,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3460,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3461,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3462,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3463,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3464,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3465,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3466,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3467,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3468,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3469,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile, # backwards compat
3470,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3471,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3472,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3473,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3474,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		krb5-dev \
3475,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		openldap-dev \
3476,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3477,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3478,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3479,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3480,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3481,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3482,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3483,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3484,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# vim:set ft=dockerfile:
3485,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# explicitly set user/group IDs
3486,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3487,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3488,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
3489,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3490,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3491,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3492,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3493,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3494,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# see note below about ""*.pyc"" files"
3495,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# arches officialy built by upstream
3496,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3497,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3498,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3499,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3500,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3501,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3502,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3503,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3504,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3505,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3506,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3507,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3508,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3509,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile, # backwards compat
3510,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3511,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3512,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3513,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3514,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		krb5-dev \
3515,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		openldap-dev \
3516,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3517,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3518,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3519,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3520,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3521,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3522,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3523,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3524,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3525,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
3526,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3527,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3528,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		krb5-dev \
3529,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		openldap-dev \
3530,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: prove not found
3531,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3532,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3533,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3534,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3535,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3536,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3537,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3538,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3539,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3540,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3541,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3542,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3543,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3544,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3545,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile, # backwards compat
3546,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
3547,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3548,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3549,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3550,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		krb5-dev \
3551,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		openldap-dev \
3552,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: prove not found
3553,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3554,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3555,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3556,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3557,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3558,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3559,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3560,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3561,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3562,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
3563,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3564,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3565,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3566,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3567,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile, # backwards compat
3568,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# vim:set ft=dockerfile:
3569,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# explicitly set user/group IDs
3570,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3571,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3572,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# grab gosu for easy step-down from root
3573,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3574,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3575,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3576,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3577,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3578,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# arches officialy built by upstream
3579,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3580,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3581,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3582,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3583,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3584,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3585,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3586,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3587,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3588,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3589,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3590,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3591,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3592,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile, # backwards compat
3593,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3594,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3595,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3596,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3597,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		krb5-dev \
3598,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		openldap-dev \
3599,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: prove not found
3600,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3601,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3602,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3603,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3604,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3605,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3606,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3607,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3608,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3609,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3610,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3611,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
3612,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3613,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3614,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3615,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3616,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile, # backwards compat
3617,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# vim:set ft=dockerfile:
3618,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3619,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# grab gosu for easy step-down from root
3620,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3621,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3622,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3623,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3624,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3625,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3626,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		krb5-dev \
3627,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		openldap-dev \
3628,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: prove not found
3629,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3630,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3631,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3632,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3633,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3634,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3635,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3636,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3637,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3638,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3639,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3640,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3641,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3642,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3643,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile, # backwards compat
3644,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# vim:set ft=dockerfile:
3645,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# explicitly set user/group IDs
3646,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3647,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3648,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# grab gosu for easy step-down from root
3649,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3650,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3651,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3652,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3653,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# arches officialy built by upstream
3654,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3655,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3656,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3657,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3658,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3659,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3660,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3661,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3662,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3663,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3664,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3665,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile, # backwards compat
3666,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3667,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3668,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3669,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3670,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		krb5-dev \
3671,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		openldap-dev \
3672,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3673,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3674,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3675,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3676,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3677,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3678,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3679,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3680,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3681,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3682,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3683,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3684,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3685,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3686,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		krb5-dev \
3687,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		openldap-dev \
3688,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: prove not found
3689,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3690,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3691,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3692,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3693,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3694,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3695,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3696,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3697,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3698,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3699,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3700,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3701,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3702,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3703,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile, # backwards compat
3704,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# vim:set ft=dockerfile:
3705,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# explicitly set user/group IDs
3706,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3707,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3708,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# grab gosu for easy step-down from root
3709,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3710,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3711,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3712,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3713,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
3714,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# arches officialy built by upstream
3715,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3716,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3717,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3718,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3719,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3720,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3721,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3722,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3723,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3724,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3725,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3726,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3727,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3728,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile, # backwards compat
3729,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# vim:set ft=dockerfile:
3730,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# explicitly set user/group IDs
3731,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# grab gosu for easy step-down from root
3732,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3733,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3734,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# arches officialy built by upstream
3735,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3736,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3737,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3738,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3739,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3740,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3741,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3742,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3743,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3744,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3745,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3746,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile, # backwards compat
3747,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3748,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3749,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3750,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3751,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		krb5-dev \
3752,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		openldap-dev \
3753,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3754,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3755,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3756,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3757,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3758,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3759,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3760,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3761,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3762,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3763,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3764,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3765,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile, # backwards compat
3766,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# vim:set ft=dockerfile:
3767,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3768,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# grab gosu for easy step-down from root
3769,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3770,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3771,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3772,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
3773,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3774,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3775,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		krb5-dev \
3776,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		openldap-dev \
3777,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: prove not found
3778,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3779,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3780,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3781,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3782,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3783,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3784,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3785,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3786,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3787,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3788,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3789,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3790,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3791,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3792,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile, # backwards compat
3793,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# vim:set ft=dockerfile:
3794,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# explicitly set user/group IDs
3795,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# grab gosu for easy step-down from root
3796,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3797,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3798,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3799,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3800,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3801,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3802,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3803,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3804,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3805,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		krb5-dev \
3806,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		openldap-dev \
3807,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: prove not found
3808,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3809,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3810,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3811,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3812,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3813,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3814,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3815,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3816,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3817,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3818,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3819,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3820,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3821,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3822,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3823,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile, # backwards compat
3824,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# vim:set ft=dockerfile:
3825,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# explicitly set user/group IDs
3826,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# grab gosu for easy step-down from root
3827,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3828,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3829,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3830,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3831,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# vim:set ft=dockerfile:
3832,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# explicitly set user/group IDs
3833,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# grab gosu for easy step-down from root
3834,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3835,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3836,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3837,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3838,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3839,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3840,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile, # backwards compat
3841,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3842,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3843,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3844,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3845,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		krb5-dev \
3846,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		openldap-dev \
3847,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: prove not found
3848,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3849,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3850,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3851,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3852,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3853,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3854,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3855,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3856,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3857,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
3858,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3859,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3860,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3861,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3862,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile, # backwards compat
3863,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
3864,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3865,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3866,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3867,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		krb5-dev \
3868,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		openldap-dev \
3869,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3870,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3871,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3872,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3873,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3874,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3875,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3876,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3877,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3878,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3879,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3880,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3881,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile, # backwards compat
3882,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
3883,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3884,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3885,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3886,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		krb5-dev \
3887,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		openldap-dev \
3888,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: prove not found
3889,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3890,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3891,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3892,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3893,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3894,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3895,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3896,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3897,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3898,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
3899,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3900,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3901,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3902,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3903,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile, # backwards compat
3904,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
3905,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
3906,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3907,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3908,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		krb5-dev \
3909,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		openldap-dev \
3910,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: prove not found
3911,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3912,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3913,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3914,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3915,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3916,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3917,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3918,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3919,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3920,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#p' --recursive /usr/local \
3921,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3922,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3923,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3924,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3925,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3926,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3927,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3928,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3929,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		krb5-dev \
3930,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		openldap-dev \
3931,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3932,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3933,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3934,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3935,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3936,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3937,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3938,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3939,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3940,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3941,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3942,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile, # backwards compat
3943,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3944,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3945,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3946,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3947,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		krb5-dev \
3948,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		openldap-dev \
3949,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3950,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3951,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3952,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3953,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3954,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3955,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3956,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3957,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3958,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3959,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3960,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile, # backwards compat
3961,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
3962,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# explicitly set user/group IDs
3963,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3964,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3965,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
3966,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3967,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3968,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3969,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3970,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
3971,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# arches officialy built by upstream
3972,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3973,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3974,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3975,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3976,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3977,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3978,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3979,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3980,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3981,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3982,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3983,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3984,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3985,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile, # backwards compat
3986,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3987,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3988,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3989,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3990,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		krb5-dev \
3991,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		openldap-dev \
3992,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
3993,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3994,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3995,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3996,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3997,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3998,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3999,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4000,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4001,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4002,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4003,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4004,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
4005,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4006,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4007,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4008,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4009,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile, # backwards compat
4010,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
4011,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4012,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4013,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4014,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		krb5-dev \
4015,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		openldap-dev \
4016,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: prove not found
4017,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4018,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4019,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4020,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4021,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4022,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4023,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4024,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4025,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4026,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#p' --recursive /usr/local \
4027,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4028,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4029,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4030,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4031,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile, # backwards compat
4032,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# vim:set ft=dockerfile:
4033,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# explicitly set user/group IDs
4034,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# grab gosu for easy step-down from root
4035,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4036,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4037,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4038,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4039,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4040,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4041,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile, # backwards compat
4042,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4043,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4044,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4045,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4046,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		krb5-dev \
4047,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		openldap-dev \
4048,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4049,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4050,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4051,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4052,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4053,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4054,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4055,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4056,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4057,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4058,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4059,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4060,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile, # backwards compat
4061,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4062,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4063,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4064,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4065,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		krb5-dev \
4066,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		openldap-dev \
4067,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4068,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4069,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4070,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4071,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4072,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4073,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4074,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4075,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4076,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4077,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4078,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4079,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile, # backwards compat
4080,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# vim:set ft=dockerfile:
4081,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# explicitly set user/group IDs
4082,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# grab gosu for easy step-down from root
4083,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4084,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4085,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4086,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4087,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4088,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4089,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile, # backwards compat
4090,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# vim:set ft=dockerfile:
4091,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# explicitly set user/group IDs
4092,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# grab gosu for easy step-down from root
4093,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4094,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4095,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
4096,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# explicitly set user/group IDs
4097,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
4098,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4099,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4100,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# arches officialy built by upstream
4101,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4102,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4103,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4104,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4105,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4106,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4107,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4108,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4109,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4110,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4111,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4112,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile, # backwards compat
4113,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# vim:set ft=dockerfile:
4114,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# explicitly set user/group IDs
4115,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4116,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4117,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# grab gosu for easy step-down from root
4118,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4119,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4120,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4121,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4122,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4123,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4124,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# arches officialy built by upstream
4125,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4126,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4127,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4128,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4129,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4130,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4131,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4132,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4133,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4134,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4135,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4136,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4137,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4138,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile, # backwards compat
4139,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4140,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4141,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4142,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4143,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		krb5-dev \
4144,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		openldap-dev \
4145,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4146,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4147,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4148,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4149,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4150,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4151,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4152,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4153,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4154,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4155,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4156,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4157,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile, # backwards compat
4158,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# vim:set ft=dockerfile:
4159,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# explicitly set user/group IDs
4160,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4161,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4162,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# grab gosu for easy step-down from root
4163,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4164,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4165,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4166,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4167,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4168,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# arches officialy built by upstream
4169,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4170,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4171,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4172,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4173,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4174,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4175,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4176,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4177,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4178,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4179,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4180,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4181,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4182,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile, # backwards compat
4183,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4184,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4185,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4186,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4187,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		krb5-dev \
4188,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		openldap-dev \
4189,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4190,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4191,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4192,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4193,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4194,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4195,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4196,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4197,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4198,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4199,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4200,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4201,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile, # backwards compat
4202,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
4203,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4204,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4205,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4206,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		krb5-dev \
4207,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		openldap-dev \
4208,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4209,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4210,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4211,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4212,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4213,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4214,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4215,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4216,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4217,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4218,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4219,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4220,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4221,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4222,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile, # backwards compat
4223,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# vim:set ft=dockerfile:
4224,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# explicitly set user/group IDs
4225,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# grab gosu for easy step-down from root
4226,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4227,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4228,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4229,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4230,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# arches officialy built by upstream
4231,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4232,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4233,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4234,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4235,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4236,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4237,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4238,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4239,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4240,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4241,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4242,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile, # backwards compat
4243,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# vim:set ft=dockerfile:
4244,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# explicitly set user/group IDs
4245,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# grab gosu for easy step-down from root
4246,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4247,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4248,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4249,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# explicitly set user/group IDs
4250,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4251,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4252,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4253,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4254,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4255,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4256,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4257,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4258,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4259,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		krb5-dev \
4260,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		openldap-dev \
4261,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: prove not found
4262,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4263,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4264,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4265,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4266,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4267,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4268,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4269,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4270,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4271,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4272,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4273,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4274,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4275,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4276,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile, # backwards compat
4277,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4278,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4279,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4280,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4281,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		krb5-dev \
4282,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		openldap-dev \
4283,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
4284,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4285,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4286,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4287,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4288,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4289,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4290,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4291,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4292,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4293,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4294,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4295,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4296,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4297,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4298,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile, # backwards compat
4299,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# vim:set ft=dockerfile:
4300,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# explicitly set user/group IDs
4301,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4302,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4303,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# grab gosu for easy step-down from root
4304,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4305,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4306,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4307,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4308,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4309,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4310,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# arches officialy built by upstream
4311,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4312,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4313,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4314,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4315,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4316,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4317,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4318,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4319,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4320,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4321,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4322,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4323,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4324,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile, # backwards compat
4325,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4326,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4327,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4328,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4329,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		krb5-dev \
4330,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		openldap-dev \
4331,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4332,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4333,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4334,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4335,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4336,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4337,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4338,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4339,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4340,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4341,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4342,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4343,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4344,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4345,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile, # backwards compat
4346,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# vim:set ft=dockerfile:
4347,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# explicitly set user/group IDs
4348,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4349,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4350,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# grab gosu for easy step-down from root
4351,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4352,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4353,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4354,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4355,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# arches officialy built by upstream
4356,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4357,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4358,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4359,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4360,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4361,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4362,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4363,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4364,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4365,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4366,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4367,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile, # backwards compat
4368,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# vim:set ft=dockerfile:
4369,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# explicitly set user/group IDs
4370,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4371,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4372,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# grab gosu for easy step-down from root
4373,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4374,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4375,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4376,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4377,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4378,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4379,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# arches officialy built by upstream
4380,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4381,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4382,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4383,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4384,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4385,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4386,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4387,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4388,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4389,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4390,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4391,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4392,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4393,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile, # backwards compat
4394,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4395,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# explicitly set user/group IDs
4396,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4397,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4398,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4399,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4400,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4401,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4402,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4403,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4404,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4405,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# arches officialy built by upstream
4406,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4407,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4408,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4409,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4410,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4411,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4412,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4413,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4414,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4415,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4416,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4417,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4418,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4419,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile, # backwards compat
4420,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# vim:set ft=dockerfile:
4421,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4422,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# grab gosu for easy step-down from root
4423,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4424,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4425,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4426,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4427,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4428,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4429,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		krb5-dev \
4430,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		openldap-dev \
4431,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4432,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4433,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4434,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4435,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4436,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4437,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4438,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4439,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4440,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4441,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4442,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4443,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile, # backwards compat
4444,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4445,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4446,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4447,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4448,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		krb5-dev \
4449,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		openldap-dev \
4450,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# configure: error: prove not found
4451,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4452,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4453,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4454,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4455,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4456,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4457,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4458,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4459,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4460,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4461,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4462,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4463,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile, # backwards compat
4464,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4465,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4466,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4467,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4468,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		krb5-dev \
4469,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		openldap-dev \
4470,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: prove not found
4471,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4472,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4473,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4474,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4475,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4476,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4477,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4478,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4479,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4480,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4481,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4482,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4483,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4484,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4485,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile, # backwards compat
4486,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# vim:set ft=dockerfile:
4487,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# explicitly set user/group IDs
4488,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4489,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4490,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
4491,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4492,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4493,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4494,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4495,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4496,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4497,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# arches officialy built by upstream
4498,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4499,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4500,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4501,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4502,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4503,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4504,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4505,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4506,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4507,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4508,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4509,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4510,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4511,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile, # backwards compat
4512,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# vim:set ft=dockerfile:
4513,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# explicitly set user/group IDs
4514,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4515,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4516,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# grab gosu for easy step-down from root
4517,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4518,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4519,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4520,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4521,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4522,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# arches officialy built by upstream
4523,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4524,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4525,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4526,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4527,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4528,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4529,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4530,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4531,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4532,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4533,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4534,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4535,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4536,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile, # backwards compat
4537,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# vim:set ft=dockerfile:
4538,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# explicitly set user/group IDs
4539,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4540,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4541,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# grab gosu for easy step-down from root
4542,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4543,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4544,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4545,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4546,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
4547,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# arches officialy built by upstream
4548,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4549,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4550,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4551,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4552,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4553,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4554,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4555,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4556,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4557,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4558,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4559,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4560,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4561,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile, # backwards compat
4562,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4563,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4564,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4565,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4566,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# vim:set ft=dockerfile:
4567,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# explicitly set user/group IDs
4568,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4569,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4570,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# grab gosu for easy step-down from root
4571,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4572,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4573,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4574,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4575,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4576,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# arches officialy built by upstream
4577,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4578,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4579,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4580,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4581,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4582,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4583,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4584,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4585,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4586,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4587,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4588,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4589,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4590,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile, # backwards compat
4591,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4592,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4593,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4594,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4595,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		krb5-dev \
4596,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		openldap-dev \
4597,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: prove not found
4598,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4599,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4600,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4601,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4602,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4603,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4604,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4605,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4606,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4607,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4608,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4609,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4610,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4611,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile, # backwards compat
4612,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# vim:set ft=dockerfile:
4613,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# explicitly set user/group IDs
4614,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4615,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4616,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# grab gosu for easy step-down from root
4617,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4618,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4619,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4620,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4621,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4622,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4623,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# arches officialy built by upstream
4624,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4625,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4626,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4627,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4628,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4629,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4630,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4631,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4632,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4633,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4634,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4635,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4636,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4637,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile, # backwards compat
4638,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4639,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4640,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4641,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4642,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		krb5-dev \
4643,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		openldap-dev \
4644,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: prove not found
4645,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4646,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4647,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4648,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4649,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4650,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4651,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4652,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4653,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4654,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4655,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4656,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4657,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4658,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4659,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile, # backwards compat
4660,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# vim:set ft=dockerfile:
4661,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# explicitly set user/group IDs
4662,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# grab gosu for easy step-down from root
4663,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4664,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4665,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# arches officialy built by upstream
4666,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4667,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4668,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4669,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4670,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4671,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4672,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4673,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4674,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4675,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4676,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4677,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile, # backwards compat
4678,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4679,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4680,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
4681,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4682,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4683,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4684,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		krb5-dev \
4685,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		openldap-dev \
4686,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: prove not found
4687,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4688,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4689,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4690,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4691,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4692,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4693,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4694,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4695,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4696,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#p' --recursive /usr/local \
4697,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4698,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4699,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4700,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4701,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# vim:set ft=dockerfile:
4702,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# explicitly set user/group IDs
4703,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4704,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4705,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# grab gosu for easy step-down from root
4706,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4707,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4708,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4709,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4710,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# see note below about ""*.pyc"" files"
4711,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# arches officialy built by upstream
4712,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4713,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4714,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4715,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4716,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4717,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4718,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4719,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4720,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4721,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4722,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4723,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4724,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4725,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile, # backwards compat
4726,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4727,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4728,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4729,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4730,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		krb5-dev \
4731,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		openldap-dev \
4732,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4733,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4734,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4735,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4736,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4737,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4738,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4739,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4740,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4741,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4742,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4743,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile, # backwards compat
4744,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# vim:set ft=dockerfile:
4745,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# explicitly set user/group IDs
4746,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# grab gosu for easy step-down from root
4747,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4748,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4749,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4750,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4751,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4752,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4753,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# vim:set ft=dockerfile:
4754,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# explicitly set user/group IDs
4755,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# grab gosu for easy step-down from root
4756,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4757,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4758,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4759,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4760,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# arches officialy built by upstream
4761,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4762,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4763,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4764,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4765,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4766,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4767,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4768,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4769,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4770,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4771,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4772,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile, # backwards compat
4773,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4774,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4775,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
4776,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4777,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4778,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4779,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		krb5-dev \
4780,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		openldap-dev \
4781,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: prove not found
4782,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4783,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4784,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4785,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4786,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4787,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4788,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4789,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4790,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4791,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
4792,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4793,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4794,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4795,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4796,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile, # backwards compat
4797,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# vim:set ft=dockerfile:
4798,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# explicitly set user/group IDs
4799,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4800,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4801,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# grab gosu for easy step-down from root
4802,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4803,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4804,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4805,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4806,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
4807,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# arches officialy built by upstream
4808,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4809,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4810,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4811,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4812,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4813,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4814,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4815,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4816,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4817,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4818,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4819,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4820,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4821,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile, # backwards compat
4822,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
4823,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# explicitly set user/group IDs
4824,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4825,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4826,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
4827,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4828,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4829,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4830,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4831,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
4832,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# arches officialy built by upstream
4833,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4834,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4835,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4836,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4837,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4838,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4839,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4840,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4841,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4842,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4843,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4844,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4845,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4846,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile, # backwards compat
4847,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# vim:set ft=dockerfile:
4848,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# explicitly set user/group IDs
4849,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4850,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4851,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# grab gosu for easy step-down from root
4852,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4853,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4854,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4855,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4856,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4857,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# arches officialy built by upstream
4858,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4859,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4860,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4861,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4862,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4863,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4864,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4865,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4866,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4867,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4868,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4869,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4870,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4871,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile, # backwards compat
4872,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# vim:set ft=dockerfile:
4873,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# explicitly set user/group IDs
4874,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4875,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4876,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# grab gosu for easy step-down from root
4877,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4878,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4879,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4880,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4881,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4882,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# arches officialy built by upstream
4883,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4884,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4885,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4886,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4887,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4888,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4889,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4890,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4891,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4892,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4893,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4894,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4895,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4896,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile, # backwards compat
4897,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# vim:set ft=dockerfile:
4898,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# explicitly set user/group IDs
4899,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# grab gosu for easy step-down from root
4900,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4901,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4902,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# vim:set ft=dockerfile:
4903,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# explicitly set user/group IDs
4904,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# grab gosu for easy step-down from root
4905,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4906,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4907,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4908,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4909,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# vim:set ft=dockerfile:
4910,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# explicitly set user/group IDs
4911,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# grab gosu for easy step-down from root
4912,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4913,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4914,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4915,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4916,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# vim:set ft=dockerfile:
4917,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# explicitly set user/group IDs
4918,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4919,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4920,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# grab gosu for easy step-down from root
4921,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4922,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4923,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4924,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4925,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
4926,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# arches officialy built by upstream
4927,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4928,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4929,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4930,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4931,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4932,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4933,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4934,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4935,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4936,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4937,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4938,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4939,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4940,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile, # backwards compat
4941,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4942,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4943,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4944,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4945,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		krb5-dev \
4946,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		openldap-dev \
4947,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4948,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4949,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4950,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4951,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4952,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4953,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4954,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4955,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# vim:set ft=dockerfile:
4956,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# explicitly set user/group IDs
4957,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4958,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4959,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# grab gosu for easy step-down from root
4960,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4961,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4962,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4963,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4964,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
4965,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# arches officialy built by upstream
4966,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4967,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4968,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4969,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4970,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4971,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4972,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4973,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4974,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4975,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4976,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4977,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4978,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4979,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile, # backwards compat
4980,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4981,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4982,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4983,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4984,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		krb5-dev \
4985,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		openldap-dev \
4986,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4987,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4988,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4989,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4990,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4991,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4992,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4993,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4994,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# vim:set ft=dockerfile:
4995,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# explicitly set user/group IDs
4996,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# grab gosu for easy step-down from root
4997,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4998,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4999,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5000,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5001,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5002,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5003,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile, # backwards compat
5004,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# vim:set ft=dockerfile:
5005,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# explicitly set user/group IDs
5006,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# grab gosu for easy step-down from root
5007,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5008,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5009,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5010,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5011,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5012,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5013,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		krb5-dev \
5014,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		openldap-dev \
5015,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: prove not found
5016,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5017,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5018,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5019,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5020,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5021,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5022,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5023,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5024,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5025,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5026,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5027,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5028,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5029,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5030,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile, # backwards compat
5031,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5032,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5033,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5034,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5035,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		krb5-dev \
5036,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		openldap-dev \
5037,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: prove not found
5038,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5039,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5040,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5041,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5042,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5043,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5044,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5045,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5046,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5047,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5048,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5049,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5050,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5051,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5052,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile, # backwards compat
5053,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# vim:set ft=dockerfile:
5054,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# explicitly set user/group IDs
5055,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# grab gosu for easy step-down from root
5056,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5057,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5058,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5059,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5060,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5061,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5062,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5063,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5064,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		krb5-dev \
5065,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		openldap-dev \
5066,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5067,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5068,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5069,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5070,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5071,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5072,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5073,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5074,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5075,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5076,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5077,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5078,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile, # backwards compat
5079,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5080,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5081,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5082,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5083,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		krb5-dev \
5084,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		openldap-dev \
5085,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5086,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5087,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5088,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5089,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5090,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
5091,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5092,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5093,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
5094,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5095,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5096,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5097,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		krb5-dev \
5098,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		openldap-dev \
5099,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: prove not found
5100,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5101,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5102,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5103,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5104,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5105,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5106,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5107,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5108,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5109,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#p' --recursive /usr/local \
5110,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5111,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5112,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5113,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5114,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# vim:set ft=dockerfile:
5115,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# explicitly set user/group IDs
5116,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5117,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5118,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
5119,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5120,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5121,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5122,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5123,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5124,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# see note below about ""*.pyc"" files"
5125,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# arches officialy built by upstream
5126,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5127,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5128,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5129,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5130,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5131,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5132,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5133,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5134,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5135,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5136,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5137,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5138,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5139,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile, # backwards compat
5140,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5141,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5142,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5143,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5144,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		krb5-dev \
5145,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		openldap-dev \
5146,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: prove not found
5147,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5148,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5149,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5150,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5151,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5152,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5153,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5154,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5155,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5156,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5157,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5158,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
5159,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5160,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5161,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5162,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5163,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile, # backwards compat
5164,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5165,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5166,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5167,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5168,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		krb5-dev \
5169,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		openldap-dev \
5170,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: prove not found
5171,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5172,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5173,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5174,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5175,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5176,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5177,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5178,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5179,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5180,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5181,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5182,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5183,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5184,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5185,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile, # backwards compat
5186,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# vim:set ft=dockerfile:
5187,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# explicitly set user/group IDs
5188,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# grab gosu for easy step-down from root
5189,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5190,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5191,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5192,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5193,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5194,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5195,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile, # backwards compat
5196,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5197,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5198,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5199,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5200,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		krb5-dev \
5201,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		openldap-dev \
5202,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: prove not found
5203,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5204,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5205,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5206,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5207,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5208,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5209,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5210,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5211,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5212,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5213,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5214,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5215,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5216,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5217,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile, # backwards compat
5218,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# vim:set ft=dockerfile:
5219,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# explicitly set user/group IDs
5220,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5221,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5222,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# grab gosu for easy step-down from root
5223,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5224,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5225,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5226,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5227,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5228,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5229,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# arches officialy built by upstream
5230,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5231,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5232,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5233,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5234,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5235,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5236,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5237,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5238,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5239,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5240,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5241,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5242,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5243,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile, # backwards compat
5244,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5245,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5246,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5247,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5248,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		krb5-dev \
5249,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		openldap-dev \
5250,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5251,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5252,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5253,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5254,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5255,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5256,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5257,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5258,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5259,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5260,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5261,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5262,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile, # backwards compat
5263,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5264,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5265,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5266,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5267,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		krb5-dev \
5268,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		openldap-dev \
5269,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5270,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5271,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5272,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5273,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5274,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5275,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5276,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5277,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5278,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5279,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5280,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5281,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5282,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5283,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		krb5-dev \
5284,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		openldap-dev \
5285,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: prove not found
5286,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5287,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5288,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5289,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5290,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5291,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5292,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5293,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5294,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5295,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5296,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5297,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5298,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5299,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5300,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile, # backwards compat
5301,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
5302,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5303,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5304,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5305,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		krb5-dev \
5306,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		openldap-dev \
5307,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: prove not found
5308,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5309,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5310,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5311,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5312,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5313,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5314,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5315,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5316,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5317,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#p' --recursive /usr/local \
5318,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5319,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5320,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5321,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5322,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile, # backwards compat
5323,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# vim:set ft=dockerfile:
5324,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# explicitly set user/group IDs
5325,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# grab gosu for easy step-down from root
5326,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5327,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5328,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5329,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5330,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5331,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# vim:set ft=dockerfile:
5332,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5333,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# grab gosu for easy step-down from root
5334,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5335,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5336,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5337,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5338,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5339,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5340,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		krb5-dev \
5341,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		openldap-dev \
5342,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# configure: error: prove not found
5343,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5344,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5345,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5346,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5347,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5348,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5349,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5350,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5351,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5352,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5353,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5354,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5355,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile, # backwards compat
5356,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5357,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5358,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5359,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5360,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		krb5-dev \
5361,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		openldap-dev \
5362,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: prove not found
5363,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5364,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5365,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5366,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5367,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5368,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5369,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5370,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5371,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5372,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5373,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5374,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5375,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5376,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5377,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile, # backwards compat
5378,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5379,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5380,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5381,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5382,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		krb5-dev \
5383,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		openldap-dev \
5384,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5385,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5386,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5387,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5388,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5389,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5390,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5391,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5392,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5393,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5394,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5395,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# vim:set ft=dockerfile:
5396,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5397,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# grab gosu for easy step-down from root
5398,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5399,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5400,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5401,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
5402,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5403,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5404,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		krb5-dev \
5405,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		openldap-dev \
5406,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: prove not found
5407,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5408,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5409,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5410,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5411,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5412,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5413,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5414,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5415,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5416,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5417,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5418,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5419,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5420,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5421,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile, # backwards compat
5422,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# vim:set ft=dockerfile:
5423,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# explicitly set user/group IDs
5424,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5425,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5426,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# grab gosu for easy step-down from root
5427,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5428,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5429,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5430,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5431,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5432,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# arches officialy built by upstream
5433,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5434,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5435,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5436,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5437,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5438,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5439,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5440,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5441,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5442,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5443,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5444,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5445,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5446,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile, # backwards compat
5447,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# vim:set ft=dockerfile:
5448,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# explicitly set user/group IDs
5449,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5450,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5451,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# grab gosu for easy step-down from root
5452,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5453,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5454,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5455,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5456,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# see note below about ""*.pyc"" files"
5457,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# arches officialy built by upstream
5458,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5459,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5460,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5461,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5462,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5463,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5464,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5465,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5466,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5467,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5468,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5469,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5470,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5471,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile, # backwards compat
5472,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
5473,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
5474,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5475,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5476,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		krb5-dev \
5477,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		openldap-dev \
5478,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: prove not found
5479,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5480,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5481,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5482,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5483,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5484,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5485,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5486,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5487,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5488,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#p' --recursive /usr/local \
5489,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5490,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5491,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5492,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5493,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# vim:set ft=dockerfile:
5494,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# explicitly set user/group IDs
5495,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5496,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5497,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# grab gosu for easy step-down from root
5498,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5499,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5500,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5501,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5502,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5503,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
5504,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# arches officialy built by upstream
5505,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5506,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5507,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5508,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5509,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5510,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5511,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5512,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5513,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5514,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5515,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5516,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5517,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5518,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile, # backwards compat
5519,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5520,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5521,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5522,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5523,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		krb5-dev \
5524,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		openldap-dev \
5525,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# configure: error: prove not found
5526,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5527,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5528,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5529,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5530,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5531,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5532,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5533,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5534,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5535,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5536,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5537,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5538,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5539,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5540,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile, # backwards compat
5541,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# vim:set ft=dockerfile:
5542,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5543,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# grab gosu for easy step-down from root
5544,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5545,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5546,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# vim:set ft=dockerfile:
5547,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5548,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# grab gosu for easy step-down from root
5549,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5550,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5551,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
5552,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5553,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5554,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5555,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		krb5-dev \
5556,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		openldap-dev \
5557,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5558,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5559,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5560,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5561,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5562,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5563,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5564,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5565,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5566,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5567,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5568,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5569,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5570,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5571,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile, # backwards compat
5572,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5573,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5574,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5575,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5576,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		krb5-dev \
5577,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		openldap-dev \
5578,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5579,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5580,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5581,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5582,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5583,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5584,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5585,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5586,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5587,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5588,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5589,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile, # backwards compat
5590,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# vim:set ft=dockerfile:
5591,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5592,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# grab gosu for easy step-down from root
5593,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5594,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5595,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# vim:set ft=dockerfile:
5596,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# explicitly set user/group IDs
5597,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# grab gosu for easy step-down from root
5598,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5599,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5600,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# vim:set ft=dockerfile:
5601,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5602,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# grab gosu for easy step-down from root
5603,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5604,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5605,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# vim:set ft=dockerfile:
5606,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5607,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# grab gosu for easy step-down from root
5608,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5609,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5610,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5611,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5612,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5613,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5614,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		krb5-dev \
5615,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		openldap-dev \
5616,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5617,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5618,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5619,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5620,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5621,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5622,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5623,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5624,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5625,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5626,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5627,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# vim:set ft=dockerfile:
5628,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5629,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# grab gosu for easy step-down from root
5630,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5631,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5632,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# vim:set ft=dockerfile:
5633,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5634,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# grab gosu for easy step-down from root
5635,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5636,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5637,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# vim:set ft=dockerfile:
5638,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# explicitly set user/group IDs
5639,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5640,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5641,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# grab gosu for easy step-down from root
5642,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5643,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5644,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5645,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5646,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5647,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# arches officialy built by upstream
5648,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5649,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5650,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5651,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5652,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5653,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5654,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5655,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5656,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5657,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5658,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5659,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5660,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5661,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile, # backwards compat
5662,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
5663,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5664,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5665,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5666,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		krb5-dev \
5667,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		openldap-dev \
5668,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: prove not found
5669,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5670,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5671,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5672,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5673,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5674,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5675,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5676,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5677,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5678,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#p' --recursive /usr/local \
5679,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5680,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5681,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5682,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5683,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5684,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5685,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5686,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5687,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		krb5-dev \
5688,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		openldap-dev \
5689,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: prove not found
5690,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5691,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5692,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5693,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5694,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5695,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5696,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5697,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5698,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5699,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5700,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5701,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5702,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5703,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5704,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile, # backwards compat
5705,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5706,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5707,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5708,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5709,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		krb5-dev \
5710,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		openldap-dev \
5711,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5712,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5713,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5714,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5715,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5716,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5717,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5718,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5719,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5720,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5721,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5722,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile, # backwards compat
5723,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5724,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5725,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5726,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5727,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		krb5-dev \
5728,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		openldap-dev \
5729,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
5730,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5731,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5732,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5733,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5734,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5735,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5736,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5737,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5738,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5739,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5740,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5741,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5742,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5743,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5744,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile, # backwards compat
5745,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# vim:set ft=dockerfile:
5746,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# explicitly set user/group IDs
5747,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# grab gosu for easy step-down from root
5748,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5749,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5750,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5751,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# arches officialy built by upstream
5752,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5753,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5754,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5755,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5756,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5757,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5758,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5759,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5760,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5761,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5762,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5763,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile, # backwards compat
5764,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# vim:set ft=dockerfile:
5765,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# explicitly set user/group IDs
5766,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# grab gosu for easy step-down from root
5767,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5768,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5769,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5770,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5771,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# arches officialy built by upstream
5772,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5773,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5774,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5775,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5776,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5777,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5778,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5779,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5780,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5781,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5782,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5783,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile, # backwards compat
5784,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# vim:set ft=dockerfile:
5785,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5786,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# grab gosu for easy step-down from root
5787,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5788,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5789,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# vim:set ft=dockerfile:
5790,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5791,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# grab gosu for easy step-down from root
5792,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5793,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5794,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5795,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5796,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5797,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5798,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		krb5-dev \
5799,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		openldap-dev \
5800,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5801,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5802,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5803,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5804,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5805,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,# vim:set ft=dockerfile:
5806,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5807,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5808,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# vim:set ft=dockerfile:
5809,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# explicitly set user/group IDs
5810,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5811,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5812,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# grab gosu for easy step-down from root
5813,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5814,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5815,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5816,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5817,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# see note below about ""*.pyc"" files"
5818,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# arches officialy built by upstream
5819,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5820,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5821,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5822,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5823,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5824,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5825,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5826,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5827,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5828,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5829,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5830,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5831,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5832,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile, # backwards compat
5833,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# vim:set ft=dockerfile:
5834,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# explicitly set user/group IDs
5835,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# grab gosu for easy step-down from root
5836,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5837,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5838,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5839,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# arches officialy built by upstream
5840,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5841,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5842,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5843,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5844,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5845,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5846,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5847,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5848,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5849,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5850,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5851,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile, # backwards compat
5852,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5853,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5854,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5855,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5856,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		krb5-dev \
5857,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		openldap-dev \
5858,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: prove not found
5859,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5860,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5861,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5862,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5863,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5864,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5865,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5866,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5867,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5868,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5869,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5870,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
5871,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5872,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5873,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5874,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5875,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile, # backwards compat
5876,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5877,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5878,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
5879,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5880,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5881,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5882,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		krb5-dev \
5883,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		openldap-dev \
5884,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: prove not found
5885,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5886,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5887,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5888,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5889,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5890,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5891,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5892,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5893,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5894,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
5895,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5896,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5897,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5898,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5899,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile, # backwards compat
5900,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# vim:set ft=dockerfile:
5901,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5902,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# grab gosu for easy step-down from root
5903,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5904,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5905,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# vim:set ft=dockerfile:
5906,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# explicitly set user/group IDs
5907,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5908,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5909,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
5910,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5911,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5912,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5913,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5914,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5915,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# see note below about ""*.pyc"" files"
5916,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# arches officialy built by upstream
5917,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5918,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5919,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5920,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5921,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5922,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5923,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5924,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5925,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5926,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5927,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5928,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5929,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5930,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile, # backwards compat
5931,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# vim:set ft=dockerfile:
5932,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# explicitly set user/group IDs
5933,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# grab gosu for easy step-down from root
5934,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5935,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5936,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# vim:set ft=dockerfile:
5937,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# explicitly set user/group IDs
5938,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5939,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5940,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# grab gosu for easy step-down from root
5941,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5942,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5943,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5944,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5945,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# arches officialy built by upstream
5946,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5947,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5948,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5949,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5950,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5951,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5952,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5953,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5954,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5955,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5956,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5957,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile, # backwards compat
5958,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# vim:set ft=dockerfile:
5959,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5960,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# grab gosu for easy step-down from root
5961,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5962,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5963,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# vim:set ft=dockerfile:
5964,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# explicitly set user/group IDs
5965,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# grab gosu for easy step-down from root
5966,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5967,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5968,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# vim:set ft=dockerfile:
5969,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# explicitly set user/group IDs
5970,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# grab gosu for easy step-down from root
5971,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5972,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5973,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5974,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5975,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5976,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5977,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile, # backwards compat
5978,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# vim:set ft=dockerfile:
5979,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# explicitly set user/group IDs
5980,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# grab gosu for easy step-down from root
5981,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5982,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5983,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5984,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5985,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5986,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5987,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile, # backwards compat
5988,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# vim:set ft=dockerfile:
5989,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# explicitly set user/group IDs
5990,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# grab gosu for easy step-down from root
5991,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5992,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5993,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5994,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5995,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5996,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5997,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile, # backwards compat
5998,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# vim:set ft=dockerfile:
5999,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# explicitly set user/group IDs
6000,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6001,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6002,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# grab gosu for easy step-down from root
6003,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6004,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6005,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6006,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6007,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6008,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# arches officialy built by upstream
6009,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6010,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6011,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6012,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6013,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6014,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6015,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6016,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6017,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6018,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6019,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6020,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6021,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6022,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile, # backwards compat
6023,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6024,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6025,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6026,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6027,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		krb5-dev \
6028,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		openldap-dev \
6029,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: prove not found
6030,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6031,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6032,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6033,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6034,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6035,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6036,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6037,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6038,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6039,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6040,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6041,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6042,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6043,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6044,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile, # backwards compat
6045,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6046,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6047,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6048,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6049,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		krb5-dev \
6050,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		openldap-dev \
6051,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: prove not found
6052,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6053,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6054,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6055,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6056,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6057,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6058,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6059,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6060,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6061,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6062,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6063,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6064,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6065,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6066,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile, # backwards compat
6067,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6068,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6069,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6070,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6071,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		krb5-dev \
6072,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		openldap-dev \
6073,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: prove not found
6074,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6075,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6076,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6077,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
6078,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6079,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6080,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6081,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6082,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6083,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6084,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6085,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6086,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6087,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6088,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile, # backwards compat
6089,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6090,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6091,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6092,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6093,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		krb5-dev \
6094,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		openldap-dev \
6095,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: prove not found
6096,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6097,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6098,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6099,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6100,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6101,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6102,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6103,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6104,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6105,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6106,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6107,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6108,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6109,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6110,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile, # backwards compat
6111,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# vim:set ft=dockerfile:
6112,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# explicitly set user/group IDs
6113,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# grab gosu for easy step-down from root
6114,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6115,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6116,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6117,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6118,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# arches officialy built by upstream
6119,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6120,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6121,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6122,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6123,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6124,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6125,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6126,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6127,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6128,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6129,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6130,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile, # backwards compat
6131,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# vim:set ft=dockerfile:
6132,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# explicitly set user/group IDs
6133,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6134,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6135,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# grab gosu for easy step-down from root
6136,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6137,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6138,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6139,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6140,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6141,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# arches officialy built by upstream
6142,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6143,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6144,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6145,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6146,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6147,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6148,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6149,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6150,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6151,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6152,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6153,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6154,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6155,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile, # backwards compat
6156,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# vim:set ft=dockerfile:
6157,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6158,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# grab gosu for easy step-down from root
6159,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6160,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6161,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# vim:set ft=dockerfile:
6162,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# explicitly set user/group IDs
6163,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# grab gosu for easy step-down from root
6164,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6165,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6166,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6167,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6168,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6169,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6170,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile, # backwards compat
6171,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# vim:set ft=dockerfile:
6172,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# explicitly set user/group IDs
6173,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# grab gosu for easy step-down from root
6174,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6175,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6176,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# arches officialy built by upstream
6177,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6178,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6179,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6180,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6181,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6182,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6183,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6184,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6185,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6186,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6187,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6188,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile, # backwards compat
6189,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6190,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6191,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6192,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6193,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		krb5-dev \
6194,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		openldap-dev \
6195,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6196,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6197,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6198,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6199,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6200,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6201,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6202,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6203,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# vim:set ft=dockerfile:
6204,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# explicitly set user/group IDs
6205,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6206,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6207,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# grab gosu for easy step-down from root
6208,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6209,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6210,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6211,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6212,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6213,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# arches officialy built by upstream
6214,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6215,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6216,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6217,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6218,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6219,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6220,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6221,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6222,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6223,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6224,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6225,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6226,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6227,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile, # backwards compat
6228,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6229,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6230,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6231,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6232,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		krb5-dev \
6233,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		openldap-dev \
6234,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: prove not found
6235,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6236,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6237,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6238,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6239,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6240,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6241,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6242,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6243,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6244,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6245,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6246,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6247,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6248,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6249,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile, # backwards compat
6250,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6251,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6252,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6253,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6254,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		krb5-dev \
6255,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		openldap-dev \
6256,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6257,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6258,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6259,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6260,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6261,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6262,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6263,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6264,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6265,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6266,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6267,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6268,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		krb5-dev \
6269,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		openldap-dev \
6270,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: prove not found
6271,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6272,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6273,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6274,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6275,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6276,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6277,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6278,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6279,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6280,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6281,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6282,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6283,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6284,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6285,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# vim:set ft=dockerfile:
6286,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# explicitly set user/group IDs
6287,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6288,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6289,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6290,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6291,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6292,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6293,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6294,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6295,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# see note below about ""*.pyc"" files"
6296,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# arches officialy built by upstream
6297,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6298,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6299,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6300,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
6301,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6302,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6303,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6304,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6305,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6306,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6307,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6308,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6309,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6310,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6311,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile, # backwards compat
6312,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# vim:set ft=dockerfile:
6313,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6314,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# grab gosu for easy step-down from root
6315,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6316,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6317,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# vim:set ft=dockerfile:
6318,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6319,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# grab gosu for easy step-down from root
6320,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6321,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6322,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# vim:set ft=dockerfile:
6323,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# explicitly set user/group IDs
6324,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# grab gosu for easy step-down from root
6325,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6326,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6327,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6328,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6329,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6330,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# vim:set ft=dockerfile:
6331,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# explicitly set user/group IDs
6332,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# grab gosu for easy step-down from root
6333,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6334,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6335,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6336,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# arches officialy built by upstream
6337,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6338,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6339,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6340,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6341,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6342,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6343,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6344,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6345,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6346,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6347,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6348,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile, # backwards compat
6349,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
6350,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6351,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6352,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6353,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		krb5-dev \
6354,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		openldap-dev \
6355,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: prove not found
6356,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6357,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6358,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6359,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6360,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6361,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6362,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6363,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6364,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6365,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6366,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6367,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6368,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6369,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile, # backwards compat
6370,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6371,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6372,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6373,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6374,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		krb5-dev \
6375,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		openldap-dev \
6376,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6377,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6378,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6379,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6380,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6381,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6382,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6383,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6384,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6385,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6386,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6387,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6388,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		krb5-dev \
6389,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		openldap-dev \
6390,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6391,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6392,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6393,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6394,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6395,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6396,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6397,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6398,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# vim:set ft=dockerfile:
6399,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6400,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# grab gosu for easy step-down from root
6401,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6402,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6403,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# vim:set ft=dockerfile:
6404,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# explicitly set user/group IDs
6405,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6406,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6407,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# grab gosu for easy step-down from root
6408,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6409,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6410,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6411,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6412,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
6413,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# arches officialy built by upstream
6414,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6415,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6416,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6417,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6418,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6419,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6420,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6421,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6422,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6423,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6424,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6425,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6426,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6427,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile, # backwards compat
6428,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6429,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6430,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6431,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6432,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		krb5-dev \
6433,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		openldap-dev \
6434,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: prove not found
6435,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6436,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6437,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6438,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6439,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6440,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6441,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6442,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6443,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6444,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6445,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6446,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6447,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6448,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6449,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6450,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile, # backwards compat
6451,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6452,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6453,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6454,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6455,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		krb5-dev \
6456,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		openldap-dev \
6457,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: prove not found
6458,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6459,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6460,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6461,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6462,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6463,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6464,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6465,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6466,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6467,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6468,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6469,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6470,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6471,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6472,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile, # backwards compat
6473,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6474,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6475,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6476,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6477,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		krb5-dev \
6478,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		openldap-dev \
6479,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: prove not found
6480,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6481,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6482,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6483,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6484,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6485,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6486,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6487,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6488,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6489,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6490,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6491,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6492,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6493,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6494,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile, # backwards compat
6495,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# vim:set ft=dockerfile:
6496,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# explicitly set user/group IDs
6497,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# grab gosu for easy step-down from root
6498,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6499,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6500,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# arches officialy built by upstream
6501,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6502,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6503,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6504,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6505,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6506,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6507,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6508,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6509,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6510,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6511,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6512,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile, # backwards compat
6513,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# vim:set ft=dockerfile:
6514,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# explicitly set user/group IDs
6515,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6516,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6517,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6518,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6519,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6520,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6521,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6522,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6523,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6524,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# arches officialy built by upstream
6525,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6526,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6527,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6528,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6529,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6530,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6531,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6532,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6533,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6534,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6535,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6536,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6537,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6538,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile, # backwards compat
6539,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# vim:set ft=dockerfile:
6540,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# explicitly set user/group IDs
6541,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# grab gosu for easy step-down from root
6542,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6543,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6544,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# arches officialy built by upstream
6545,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6546,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6547,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6548,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6549,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6550,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6551,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6552,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6553,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6554,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6555,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6556,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile, # backwards compat
6557,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
6558,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6559,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6560,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6561,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		krb5-dev \
6562,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		openldap-dev \
6563,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: prove not found
6564,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6565,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6566,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6567,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6568,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6569,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6570,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6571,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6572,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6573,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
6574,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6575,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6576,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6577,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6578,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile, # backwards compat
6579,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# vim:set ft=dockerfile:
6580,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# explicitly set user/group IDs
6581,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6582,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6583,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# grab gosu for easy step-down from root
6584,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6585,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6586,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6587,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6588,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6589,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# arches officialy built by upstream
6590,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6591,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6592,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6593,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6594,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6595,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6596,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6597,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6598,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6599,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6600,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6601,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6602,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6603,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile, # backwards compat
6604,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# vim:set ft=dockerfile:
6605,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# explicitly set user/group IDs
6606,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6607,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6608,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# grab gosu for easy step-down from root
6609,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6610,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6611,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6612,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6613,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6614,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# arches officialy built by upstream
6615,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6616,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6617,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6618,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6619,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6620,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6621,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6622,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6623,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6624,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6625,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6626,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6627,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6628,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile, # backwards compat
6629,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# vim:set ft=dockerfile:
6630,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6631,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# grab gosu for easy step-down from root
6632,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6633,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6634,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# vim:set ft=dockerfile:
6635,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# explicitly set user/group IDs
6636,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# grab gosu for easy step-down from root
6637,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6638,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6639,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6640,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6641,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6642,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6643,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# vim:set ft=dockerfile:
6644,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# explicitly set user/group IDs
6645,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# grab gosu for easy step-down from root
6646,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6647,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6648,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6649,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6650,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6651,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# vim:set ft=dockerfile:
6652,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# explicitly set user/group IDs
6653,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# grab gosu for easy step-down from root
6654,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6655,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6656,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
6657,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6658,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6659,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6660,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		krb5-dev \
6661,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		openldap-dev \
6662,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6663,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6664,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6665,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6666,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6667,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6668,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6669,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6670,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6671,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6672,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6673,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile, # backwards compat
6674,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6675,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6676,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6677,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6678,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		krb5-dev \
6679,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		openldap-dev \
6680,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: prove not found
6681,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6682,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6683,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6684,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6685,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6686,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6687,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6688,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6689,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6690,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6691,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6692,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6693,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6694,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6695,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile, # backwards compat
6696,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# vim:set ft=dockerfile:
6697,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6698,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# grab gosu for easy step-down from root
6699,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6700,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6701,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6702,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6703,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6704,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6705,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		krb5-dev \
6706,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		openldap-dev \
6707,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: prove not found
6708,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6709,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6710,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6711,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6712,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6713,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6714,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6715,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6716,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6717,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6718,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6719,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6720,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6721,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6722,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile, # backwards compat
6723,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
6724,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6725,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6726,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6727,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		krb5-dev \
6728,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		openldap-dev \
6729,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: prove not found
6730,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6731,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6732,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6733,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6734,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6735,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6736,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6737,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6738,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6739,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
6740,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6741,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6742,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6743,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6744,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile, # backwards compat
6745,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# vim:set ft=dockerfile:
6746,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6747,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# grab gosu for easy step-down from root
6748,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6749,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6750,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# vim:set ft=dockerfile:
6751,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6752,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# grab gosu for easy step-down from root
6753,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6754,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6755,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
6756,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6757,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6758,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6759,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		krb5-dev \
6760,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		openldap-dev \
6761,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6762,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6763,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6764,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6765,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6766,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
6767,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6768,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6769,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# vim:set ft=dockerfile:
6770,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# explicitly set user/group IDs
6771,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6772,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6773,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6774,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6775,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6776,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6777,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6778,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6779,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
6780,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# arches officialy built by upstream
6781,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6782,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6783,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6784,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6785,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6786,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6787,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6788,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6789,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6790,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6791,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6792,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6793,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6794,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile, # backwards compat
6795,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# vim:set ft=dockerfile:
6796,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6797,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# grab gosu for easy step-down from root
6798,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6799,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6800,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
6801,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6802,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6803,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6804,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		krb5-dev \
6805,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		openldap-dev \
6806,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: prove not found
6807,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6808,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6809,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6810,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6811,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6812,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6813,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6814,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6815,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6816,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6817,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6818,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
6819,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6820,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6821,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6822,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6823,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile, # backwards compat
6824,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6825,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6826,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6827,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6828,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		krb5-dev \
6829,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		openldap-dev \
6830,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6831,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6832,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6833,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6834,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6835,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6836,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6837,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6838,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6839,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6840,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6841,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6842,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile, # backwards compat
6843,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# vim:set ft=dockerfile:
6844,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6845,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# grab gosu for easy step-down from root
6846,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6847,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6848,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6849,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6850,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6851,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6852,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		krb5-dev \
6853,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		openldap-dev \
6854,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: prove not found
6855,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6856,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6857,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6858,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6859,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6860,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6861,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6862,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6863,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6864,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
6865,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6866,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6867,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6868,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6869,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile, # backwards compat
6870,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# vim:set ft=dockerfile:
6871,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# explicitly set user/group IDs
6872,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# grab gosu for easy step-down from root
6873,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6874,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6875,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# arches officialy built by upstream
6876,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6877,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6878,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6879,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6880,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6881,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6882,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6883,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6884,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6885,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6886,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6887,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile, # backwards compat
6888,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6889,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6890,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6891,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6892,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		krb5-dev \
6893,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		openldap-dev \
6894,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6895,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6896,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6897,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6898,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6899,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
6900,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6901,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6902,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
6903,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6904,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6905,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6906,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		krb5-dev \
6907,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		openldap-dev \
6908,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: prove not found
6909,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6910,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6911,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6912,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6913,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6914,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6915,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6916,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6917,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6918,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#p' --recursive /usr/local \
6919,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6920,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6921,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6922,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6923,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile, # backwards compat
6924,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6925,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6926,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6927,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6928,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		krb5-dev \
6929,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		openldap-dev \
6930,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: prove not found
6931,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6932,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6933,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6934,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6935,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6936,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6937,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6938,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6939,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6940,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
6941,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6942,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6943,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6944,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6945,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile, # backwards compat
6946,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# vim:set ft=dockerfile:
6947,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# explicitly set user/group IDs
6948,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# grab gosu for easy step-down from root
6949,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6950,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6951,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6952,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6953,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6954,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6955,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile, # backwards compat
6956,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6957,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6958,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6959,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6960,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		krb5-dev \
6961,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		openldap-dev \
6962,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: prove not found
6963,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6964,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6965,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6966,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6967,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6968,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6969,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6970,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6971,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6972,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6973,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6974,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6975,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6976,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6977,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile, # backwards compat
6978,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
6979,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6980,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6981,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6982,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		krb5-dev \
6983,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		openldap-dev \
6984,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: prove not found
6985,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6986,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6987,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6988,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6989,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6990,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6991,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6992,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6993,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6994,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6995,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6996,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6997,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6998,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile, # backwards compat
6999,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# vim:set ft=dockerfile:
7000,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# explicitly set user/group IDs
7001,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7002,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7003,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# grab gosu for easy step-down from root
7004,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7005,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7006,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7007,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7008,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7009,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# see note below about ""*.pyc"" files"
7010,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# arches officialy built by upstream
7011,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7012,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7013,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7014,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7015,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7016,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7017,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7018,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7019,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7020,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7021,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7022,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7023,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7024,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile, # backwards compat
7025,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7026,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7027,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7028,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7029,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		krb5-dev \
7030,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		openldap-dev \
7031,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: prove not found
7032,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7033,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7034,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7035,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7036,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7037,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7038,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7039,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7040,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7041,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7042,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7043,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7044,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7045,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7046,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile, # backwards compat
7047,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# vim:set ft=dockerfile:
7048,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# explicitly set user/group IDs
7049,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# grab gosu for easy step-down from root
7050,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7051,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7052,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7053,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7054,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7055,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7056,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile, # backwards compat
7057,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# vim:set ft=dockerfile:
7058,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# explicitly set user/group IDs
7059,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# grab gosu for easy step-down from root
7060,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7061,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7062,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7063,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7064,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7065,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7066,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7067,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7068,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		krb5-dev \
7069,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		openldap-dev \
7070,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: prove not found
7071,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7072,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7073,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7074,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7075,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7076,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7077,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7078,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7079,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7080,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7081,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7082,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7083,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7084,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7085,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile, # backwards compat
7086,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7087,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7088,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7089,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7090,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7091,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7092,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7093,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7094,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7095,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7096,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		krb5-dev \
7097,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		openldap-dev \
7098,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: prove not found
7099,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7100,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7101,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7102,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7103,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7104,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7105,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7106,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7107,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7108,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7109,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7110,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7111,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7112,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7113,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile, # backwards compat
7114,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# vim:set ft=dockerfile:
7115,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# explicitly set user/group IDs
7116,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# grab gosu for easy step-down from root
7117,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7118,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7119,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7120,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7121,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7122,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7123,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# vim:set ft=dockerfile:
7124,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# explicitly set user/group IDs
7125,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# grab gosu for easy step-down from root
7126,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7127,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7128,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7129,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7130,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7131,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7132,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7133,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7134,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7135,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		krb5-dev \
7136,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		openldap-dev \
7137,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7138,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7139,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7140,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7141,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7142,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7143,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7144,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7145,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# vim:set ft=dockerfile:
7146,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# explicitly set user/group IDs
7147,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# grab gosu for easy step-down from root
7148,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7149,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7150,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7151,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7152,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7153,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7154,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		krb5-dev \
7155,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		openldap-dev \
7156,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: prove not found
7157,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7158,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7159,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7160,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7161,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7162,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7163,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7164,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7165,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7166,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7167,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7168,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7169,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7170,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7171,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile, # backwards compat
7172,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7173,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7174,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7175,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7176,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		krb5-dev \
7177,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		openldap-dev \
7178,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: prove not found
7179,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7180,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7181,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7182,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7183,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7184,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7185,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7186,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7187,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7188,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7189,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7190,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7191,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7192,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7193,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile, # backwards compat
7194,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# vim:set ft=dockerfile:
7195,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# explicitly set user/group IDs
7196,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# grab gosu for easy step-down from root
7197,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7198,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7199,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# arches officialy built by upstream
7200,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7201,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7202,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7203,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7204,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7205,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7206,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7207,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7208,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7209,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7210,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7211,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile, # backwards compat
7212,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# vim:set ft=dockerfile:
7213,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# explicitly set user/group IDs
7214,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# grab gosu for easy step-down from root
7215,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7216,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7217,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7218,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7219,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# arches officialy built by upstream
7220,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7221,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7222,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7223,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7224,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7225,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7226,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7227,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7228,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7229,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7230,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7231,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile, # backwards compat
7232,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7233,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7234,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7235,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7236,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		krb5-dev \
7237,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		openldap-dev \
7238,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: prove not found
7239,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7240,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7241,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7242,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7243,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7244,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7245,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7246,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7247,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7248,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7249,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7250,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7251,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7252,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7253,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile, # backwards compat
7254,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# vim:set ft=dockerfile:
7255,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# explicitly set user/group IDs
7256,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# grab gosu for easy step-down from root
7257,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7258,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7259,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7260,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7261,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7262,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7263,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile, # backwards compat
7264,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# vim:set ft=dockerfile:
7265,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# explicitly set user/group IDs
7266,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# grab gosu for easy step-down from root
7267,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7268,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7269,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7270,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7271,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7272,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7273,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile, # backwards compat
7274,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7275,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7276,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7277,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7278,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		krb5-dev \
7279,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		openldap-dev \
7280,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7281,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7282,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7283,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7284,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7285,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7286,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7287,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7288,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7289,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7290,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7291,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7292,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		krb5-dev \
7293,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		openldap-dev \
7294,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: prove not found
7295,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7296,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7297,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7298,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7299,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7300,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7301,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7302,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7303,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7304,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7305,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7306,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7307,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7308,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7309,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile, # backwards compat
7310,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7311,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7312,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7313,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7314,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		krb5-dev \
7315,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		openldap-dev \
7316,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: prove not found
7317,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7318,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7319,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7320,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7321,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7322,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7323,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7324,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7325,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7326,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7327,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7328,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7329,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7330,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7331,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile, # backwards compat
7332,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7333,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7334,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7335,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7336,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		krb5-dev \
7337,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		openldap-dev \
7338,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: prove not found
7339,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7340,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7341,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7342,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7343,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7344,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7345,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7346,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7347,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7348,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7349,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7350,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7351,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7352,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7353,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile, # backwards compat
7354,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# vim:set ft=dockerfile:
7355,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# explicitly set user/group IDs
7356,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# grab gosu for easy step-down from root
7357,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7358,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7359,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# arches officialy built by upstream
7360,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7361,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7362,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7363,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7364,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7365,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7366,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7367,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7368,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7369,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7370,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7371,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile, # backwards compat
7372,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# vim:set ft=dockerfile:
7373,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# explicitly set user/group IDs
7374,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# grab gosu for easy step-down from root
7375,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7376,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7377,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7378,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7379,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
7380,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7381,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7382,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7383,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		krb5-dev \
7384,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		openldap-dev \
7385,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: prove not found
7386,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7387,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7388,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7389,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7390,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7391,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7392,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7393,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7394,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7395,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#p' --recursive /usr/local \
7396,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7397,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7398,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7399,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7400,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# vim:set ft=dockerfile:
7401,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# explicitly set user/group IDs
7402,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7403,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7404,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# grab gosu for easy step-down from root
7405,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7406,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7407,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7408,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7409,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7410,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# arches officialy built by upstream
7411,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7412,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7413,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7414,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7415,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7416,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7417,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7418,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7419,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7420,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7421,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7422,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7423,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7424,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile, # backwards compat
7425,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# vim:set ft=dockerfile:
7426,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7427,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# grab gosu for easy step-down from root
7428,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7429,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7430,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# vim:set ft=dockerfile:
7431,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7432,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# grab gosu for easy step-down from root
7433,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7434,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7435,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# vim:set ft=dockerfile:
7436,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# explicitly set user/group IDs
7437,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7438,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7439,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# grab gosu for easy step-down from root
7440,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7441,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7442,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7443,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7444,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# arches officialy built by upstream
7445,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7446,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7447,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7448,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7449,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7450,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7451,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7452,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7453,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7454,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7455,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7456,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile, # backwards compat
7457,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# vim:set ft=dockerfile:
7458,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# explicitly set user/group IDs
7459,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# grab gosu for easy step-down from root
7460,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7461,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7462,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7463,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7464,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7465,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7466,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7467,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7468,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		krb5-dev \
7469,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		openldap-dev \
7470,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: prove not found
7471,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7472,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7473,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7474,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7475,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7476,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7477,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7478,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7479,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7480,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7481,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7482,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7483,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7484,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7485,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile, # backwards compat
7486,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# vim:set ft=dockerfile:
7487,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# explicitly set user/group IDs
7488,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# grab gosu for easy step-down from root
7489,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7490,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7491,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7492,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# arches officialy built by upstream
7493,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7494,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7495,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7496,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7497,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7498,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7499,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7500,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7501,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7502,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7503,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7504,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile, # backwards compat
7505,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7506,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7507,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7508,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7509,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		krb5-dev \
7510,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		openldap-dev \
7511,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: prove not found
7512,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7513,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7514,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7515,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7516,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7517,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7518,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7519,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7520,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7521,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7522,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7523,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7524,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7525,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7526,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile, # backwards compat
7527,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7528,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7529,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7530,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7531,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		krb5-dev \
7532,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		openldap-dev \
7533,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: prove not found
7534,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7535,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7536,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7537,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7538,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7539,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7540,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7541,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7542,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7543,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7544,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7545,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7546,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7547,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7548,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile, # backwards compat
7549,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7550,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7551,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7552,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7553,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		krb5-dev \
7554,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		openldap-dev \
7555,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: prove not found
7556,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7557,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7558,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7559,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7560,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7561,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7562,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7563,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7564,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7565,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
7566,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7567,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7568,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7569,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7570,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile, # backwards compat
7571,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# vim:set ft=dockerfile:
7572,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# explicitly set user/group IDs
7573,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# grab gosu for easy step-down from root
7574,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7575,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7576,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7577,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7578,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# arches officialy built by upstream
7579,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7580,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7581,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7582,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7583,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7584,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7585,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7586,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7587,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7588,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7589,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7590,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile, # backwards compat
7591,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# vim:set ft=dockerfile:
7592,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# explicitly set user/group IDs
7593,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7594,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7595,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7596,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7597,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7598,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7599,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7600,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7601,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# see note below about ""*.pyc"" files"
7602,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# arches officialy built by upstream
7603,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7604,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7605,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7606,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7607,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7608,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7609,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7610,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7611,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7612,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7613,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7614,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7615,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7616,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile, # backwards compat
7617,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# vim:set ft=dockerfile:
7618,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# explicitly set user/group IDs
7619,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7620,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7621,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# grab gosu for easy step-down from root
7622,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7623,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7624,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7625,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7626,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7627,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# arches officialy built by upstream
7628,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7629,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7630,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7631,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7632,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7633,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7634,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7635,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7636,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7637,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7638,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7639,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7640,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7641,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile, # backwards compat
7642,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# vim:set ft=dockerfile:
7643,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# explicitly set user/group IDs
7644,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# grab gosu for easy step-down from root
7645,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7646,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7647,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# arches officialy built by upstream
7648,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7649,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7650,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7651,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7652,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7653,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7654,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7655,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7656,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7657,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7658,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7659,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile, # backwards compat
7660,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7661,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7662,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7663,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7664,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		krb5-dev \
7665,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		openldap-dev \
7666,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: prove not found
7667,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7668,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7669,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7670,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7671,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7672,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7673,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7674,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7675,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7676,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7677,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7678,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7679,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7680,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile, # backwards compat
7681,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7682,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7683,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7684,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7685,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		krb5-dev \
7686,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		openldap-dev \
7687,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7688,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7689,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7690,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7691,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7692,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# vim:set ft=dockerfile:
7693,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# explicitly set user/group IDs
7694,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# grab gosu for easy step-down from root
7695,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7696,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7697,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7698,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# arches officialy built by upstream
7699,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7700,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7701,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7702,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7703,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7704,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7705,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7706,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7707,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7708,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7709,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7710,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile, # backwards compat
7711,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
7712,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# explicitly set user/group IDs
7713,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
7714,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7715,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7716,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7717,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7718,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
7719,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
7720,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7721,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7722,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		krb5-dev \
7723,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		openldap-dev \
7724,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: prove not found
7725,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7726,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7727,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7728,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
7729,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7730,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7731,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7732,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7733,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7734,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#p' --recursive /usr/local \
7735,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7736,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7737,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7738,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7739,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7740,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7741,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7742,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7743,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		krb5-dev \
7744,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		openldap-dev \
7745,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7746,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7747,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7748,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7749,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7750,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7751,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7752,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7753,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7754,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7755,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7756,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile, # backwards compat
7757,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# vim:set ft=dockerfile:
7758,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# explicitly set user/group IDs
7759,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# grab gosu for easy step-down from root
7760,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7761,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7762,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,# vim:set ft=dockerfile:
7763,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7764,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7765,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7766,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7767,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7768,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7769,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		krb5-dev \
7770,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		openldap-dev \
7771,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7772,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7773,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7774,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7775,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7776,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7777,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7778,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7779,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7780,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7781,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7782,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7783,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7784,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7785,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile, # backwards compat
7786,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7787,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7788,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7789,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7790,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		krb5-dev \
7791,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		openldap-dev \
7792,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7793,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7794,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7795,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7796,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7797,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7798,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7799,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7800,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7801,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7802,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7803,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
7804,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# explicitly set user/group IDs
7805,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
7806,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7807,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7808,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7809,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7810,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7811,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# vim:set ft=dockerfile:
7812,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7813,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# grab gosu for easy step-down from root
7814,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7815,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7816,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# vim:set ft=dockerfile:
7817,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# explicitly set user/group IDs
7818,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# grab gosu for easy step-down from root
7819,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7820,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7821,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# arches officialy built by upstream
7822,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7823,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7824,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7825,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7826,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7827,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7828,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7829,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7830,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7831,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7832,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7833,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile, # backwards compat
7834,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7835,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7836,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7837,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7838,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		krb5-dev \
7839,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		openldap-dev \
7840,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7841,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7842,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7843,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7844,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7845,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7846,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7847,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7848,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7849,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7850,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7851,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# vim:set ft=dockerfile:
7852,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# explicitly set user/group IDs
7853,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# grab gosu for easy step-down from root
7854,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7855,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7856,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7857,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7858,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7859,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7860,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile, # backwards compat
7861,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7862,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7863,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7864,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7865,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		krb5-dev \
7866,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		openldap-dev \
7867,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# configure: error: prove not found
7868,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7869,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7870,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7871,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7872,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7873,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7874,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7875,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7876,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7877,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7878,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7879,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7880,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile, # backwards compat
7881,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7882,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7883,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7884,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7885,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		krb5-dev \
7886,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		openldap-dev \
7887,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: prove not found
7888,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7889,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7890,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7891,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7892,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7893,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7894,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7895,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7896,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7897,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7898,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7899,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7900,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7901,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7902,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile, # backwards compat
7903,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# vim:set ft=dockerfile:
7904,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# explicitly set user/group IDs
7905,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# grab gosu for easy step-down from root
7906,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7907,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7908,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7909,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# arches officialy built by upstream
7910,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7911,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7912,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7913,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7914,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7915,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7916,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7917,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7918,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7919,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7920,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7921,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile, # backwards compat
7922,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7923,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7924,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7925,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7926,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		krb5-dev \
7927,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		openldap-dev \
7928,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: prove not found
7929,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7930,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7931,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7932,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7933,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7934,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7935,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7936,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7937,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7938,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7939,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7940,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7941,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7942,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7943,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile, # backwards compat
7944,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# vim:set ft=dockerfile:
7945,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# explicitly set user/group IDs
7946,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# grab gosu for easy step-down from root
7947,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7948,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7949,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# vim:set ft=dockerfile:
7950,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# explicitly set user/group IDs
7951,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# grab gosu for easy step-down from root
7952,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7953,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7954,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# arches officialy built by upstream
7955,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7956,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7957,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7958,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7959,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7960,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7961,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7962,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7963,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7964,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7965,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7966,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile, # backwards compat
7967,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# vim:set ft=dockerfile:
7968,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# explicitly set user/group IDs
7969,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7970,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7971,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7972,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7973,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7974,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7975,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7976,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7977,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
7978,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# arches officialy built by upstream
7979,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7980,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7981,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7982,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7983,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7984,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7985,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7986,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7987,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7988,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7989,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7990,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7991,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7992,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile, # backwards compat
7993,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7994,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7995,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7996,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7997,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		krb5-dev \
7998,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		openldap-dev \
7999,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8000,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8001,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8002,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8003,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8004,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8005,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8006,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8007,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8008,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8009,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8010,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8011,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8012,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8013,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		krb5-dev \
8014,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		openldap-dev \
8015,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: prove not found
8016,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8017,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8018,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8019,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8020,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8021,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8022,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8023,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8024,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8025,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8026,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8027,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8028,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8029,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8030,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile, # backwards compat
8031,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8032,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8033,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8034,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8035,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		krb5-dev \
8036,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		openldap-dev \
8037,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# configure: error: prove not found
8038,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8039,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8040,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8041,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8042,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8043,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8044,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8045,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8046,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8047,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8048,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8049,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8050,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8051,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8052,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile, # backwards compat
8053,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# vim:set ft=dockerfile:
8054,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# explicitly set user/group IDs
8055,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8056,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8057,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# grab gosu for easy step-down from root
8058,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8059,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8060,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8061,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8062,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8063,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# arches officialy built by upstream
8064,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8065,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8066,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8067,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8068,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8069,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8070,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8071,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8072,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8073,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8074,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8075,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8076,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8077,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile, # backwards compat
8078,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# vim:set ft=dockerfile:
8079,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# explicitly set user/group IDs
8080,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# grab gosu for easy step-down from root
8081,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8082,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8083,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# arches officialy built by upstream
8084,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8085,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8086,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8087,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8088,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8089,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8090,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8091,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8092,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8093,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8094,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8095,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile, # backwards compat
8096,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8097,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8098,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8099,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8100,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		krb5-dev \
8101,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		openldap-dev \
8102,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: prove not found
8103,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8104,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8105,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8106,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8107,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8108,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8109,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8110,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8111,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8112,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8113,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8114,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8115,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8116,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8117,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile, # backwards compat
8118,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8119,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8120,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8121,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8122,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		krb5-dev \
8123,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		openldap-dev \
8124,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8125,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8126,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8127,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8128,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8129,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
8130,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8131,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8132,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# vim:set ft=dockerfile:
8133,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# explicitly set user/group IDs
8134,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# grab gosu for easy step-down from root
8135,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8136,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8137,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8138,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8139,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8140,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8141,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile, # backwards compat
8142,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# vim:set ft=dockerfile:
8143,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# explicitly set user/group IDs
8144,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8145,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8146,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# grab gosu for easy step-down from root
8147,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8148,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8149,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8150,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8151,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8152,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# arches officialy built by upstream
8153,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8154,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8155,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8156,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8157,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8158,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8159,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8160,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8161,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8162,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8163,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8164,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8165,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8166,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile, # backwards compat
8167,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8168,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8169,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8170,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8171,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		krb5-dev \
8172,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		openldap-dev \
8173,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8174,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8175,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8176,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8177,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8178,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8179,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8180,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8181,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8182,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8183,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8184,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile, # backwards compat
8185,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8186,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8187,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8188,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8189,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		krb5-dev \
8190,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		openldap-dev \
8191,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: prove not found
8192,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8193,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8194,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8195,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8196,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8197,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8198,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8199,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8200,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8201,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8202,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8203,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8204,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8205,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8206,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8207,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8208,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8209,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8210,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		krb5-dev \
8211,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		openldap-dev \
8212,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: prove not found
8213,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8214,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8215,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8216,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8217,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8218,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8219,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8220,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8221,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8222,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8223,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8224,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8225,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8226,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8227,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile, # backwards compat
8228,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8229,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8230,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8231,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8232,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		krb5-dev \
8233,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		openldap-dev \
8234,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: prove not found
8235,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8236,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8237,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8238,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8239,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8240,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8241,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8242,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8243,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8244,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8245,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8246,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8247,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8248,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8249,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8250,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8251,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8252,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8253,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		krb5-dev \
8254,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		openldap-dev \
8255,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: prove not found
8256,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8257,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8258,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8259,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8260,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8261,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8262,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8263,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8264,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8265,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8266,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8267,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8268,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8269,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8270,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile, # backwards compat
8271,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8272,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8273,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8274,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8275,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		krb5-dev \
8276,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		openldap-dev \
8277,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: prove not found
8278,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8279,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8280,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8281,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8282,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8283,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8284,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8285,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8286,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8287,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8288,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8289,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
8290,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8291,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8292,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8293,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8294,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile, # backwards compat
8295,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# vim:set ft=dockerfile:
8296,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# explicitly set user/group IDs
8297,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# grab gosu for easy step-down from root
8298,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8299,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8300,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8301,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8302,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# arches officialy built by upstream
8303,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8304,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8305,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8306,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8307,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8308,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8309,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8310,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8311,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8312,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8313,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8314,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile, # backwards compat
8315,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8316,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8317,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8318,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8319,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		krb5-dev \
8320,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		openldap-dev \
8321,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: prove not found
8322,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8323,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8324,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8325,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8326,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8327,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8328,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8329,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8330,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8331,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8332,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8333,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8334,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8335,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8336,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile, # backwards compat
8337,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# vim:set ft=dockerfile:
8338,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# explicitly set user/group IDs
8339,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# grab gosu for easy step-down from root
8340,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8341,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8342,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# arches officialy built by upstream
8343,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8344,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8345,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8346,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8347,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8348,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8349,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8350,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8351,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8352,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8353,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8354,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile, # backwards compat
8355,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# vim:set ft=dockerfile:
8356,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# explicitly set user/group IDs
8357,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# grab gosu for easy step-down from root
8358,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8359,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8360,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# arches officialy built by upstream
8361,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8362,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8363,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8364,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8365,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8366,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8367,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8368,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8369,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8370,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8371,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8372,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile, # backwards compat
8373,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8374,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8375,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8376,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8377,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		krb5-dev \
8378,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		openldap-dev \
8379,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: prove not found
8380,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8381,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8382,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8383,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8384,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8385,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8386,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8387,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8388,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8389,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8390,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8391,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8392,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8393,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8394,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile, # backwards compat
8395,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8396,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8397,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8398,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8399,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		krb5-dev \
8400,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		openldap-dev \
8401,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: prove not found
8402,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8403,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8404,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8405,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8406,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8407,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8408,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8409,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8410,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8411,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8412,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8413,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8414,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8415,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8416,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile, # backwards compat
8417,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8418,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8419,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8420,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8421,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		krb5-dev \
8422,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		openldap-dev \
8423,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8424,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8425,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8426,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8427,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8428,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8429,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8430,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8431,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# vim:set ft=dockerfile:
8432,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# explicitly set user/group IDs
8433,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8434,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8435,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# grab gosu for easy step-down from root
8436,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8437,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8438,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8439,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8440,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
8441,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# arches officialy built by upstream
8442,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8443,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8444,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8445,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8446,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8447,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8448,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8449,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8450,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8451,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8452,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8453,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8454,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8455,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile, # backwards compat
8456,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# vim:set ft=dockerfile:
8457,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# explicitly set user/group IDs
8458,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# grab gosu for easy step-down from root
8459,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8460,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8461,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8462,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8463,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8464,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# vim:set ft=dockerfile:
8465,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8466,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# grab gosu for easy step-down from root
8467,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8468,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8469,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8470,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8471,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8472,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8473,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		krb5-dev \
8474,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		openldap-dev \
8475,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8476,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8477,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8478,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8479,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8480,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8481,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8482,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8483,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# vim:set ft=dockerfile:
8484,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# explicitly set user/group IDs
8485,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8486,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8487,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8488,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8489,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8490,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8491,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8492,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8493,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
8494,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# arches officialy built by upstream
8495,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8496,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8497,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8498,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8499,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8500,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8501,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8502,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8503,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8504,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8505,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8506,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8507,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8508,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile, # backwards compat
8509,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8510,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8511,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8512,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8513,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		krb5-dev \
8514,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		openldap-dev \
8515,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: prove not found
8516,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8517,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8518,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8519,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8520,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8521,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8522,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8523,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8524,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8525,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8526,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8527,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8528,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8529,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8530,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile, # backwards compat
8531,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8532,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8533,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8534,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8535,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		krb5-dev \
8536,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		openldap-dev \
8537,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: prove not found
8538,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8539,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8540,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8541,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8542,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8543,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8544,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8545,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8546,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8547,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8548,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8549,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8550,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8551,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8552,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile, # backwards compat
8553,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# vim:set ft=dockerfile:
8554,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8555,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# grab gosu for easy step-down from root
8556,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8557,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8558,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8559,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8560,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8561,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8562,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		krb5-dev \
8563,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		openldap-dev \
8564,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8565,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8566,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8567,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8568,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8569,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8570,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8571,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8572,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8573,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8574,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8575,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8576,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile, # backwards compat
8577,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# vim:set ft=dockerfile:
8578,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8579,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# grab gosu for easy step-down from root
8580,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8581,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8582,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# vim:set ft=dockerfile:
8583,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# explicitly set user/group IDs
8584,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8585,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8586,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# grab gosu for easy step-down from root
8587,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8588,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8589,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8590,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8591,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8592,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# see note below about ""*.pyc"" files"
8593,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# arches officialy built by upstream
8594,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8595,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8596,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8597,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8598,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8599,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8600,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8601,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8602,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8603,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8604,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8605,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8606,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8607,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile, # backwards compat
8608,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8609,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8610,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8611,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8612,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		krb5-dev \
8613,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		openldap-dev \
8614,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
8615,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8616,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8617,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8618,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8619,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8620,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8621,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8622,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8623,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8624,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8625,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8626,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8627,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8628,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile, # backwards compat
8629,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8630,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8631,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8632,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8633,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		krb5-dev \
8634,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		openldap-dev \
8635,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: prove not found
8636,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8637,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8638,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8639,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8640,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8641,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8642,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8643,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8644,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8645,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
8646,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8647,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8648,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8649,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8650,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile, # backwards compat
8651,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# vim:set ft=dockerfile:
8652,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# explicitly set user/group IDs
8653,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# grab gosu for easy step-down from root
8654,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8655,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8656,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8657,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# arches officialy built by upstream
8658,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8659,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8660,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8661,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8662,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8663,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8664,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8665,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8666,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8667,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8668,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8669,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile, # backwards compat
8670,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8671,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8672,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8673,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8674,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		krb5-dev \
8675,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		openldap-dev \
8676,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: prove not found
8677,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8678,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8679,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8680,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8681,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8682,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8683,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8684,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8685,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8686,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8687,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8688,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8689,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8690,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8691,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8692,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8693,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8694,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8695,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		krb5-dev \
8696,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		openldap-dev \
8697,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: prove not found
8698,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8699,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8700,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8701,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8702,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8703,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8704,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8705,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8706,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8707,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8708,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8709,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8710,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8711,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8712,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile, # backwards compat
8713,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8714,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8715,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8716,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8717,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		krb5-dev \
8718,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		openldap-dev \
8719,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8720,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8721,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8722,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8723,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8724,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8725,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8726,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8727,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8728,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8729,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8730,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8731,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8732,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8733,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile, # backwards compat
8734,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8735,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8736,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8737,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8738,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		krb5-dev \
8739,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		openldap-dev \
8740,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8741,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8742,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8743,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8744,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8745,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8746,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8747,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8748,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8749,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8750,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8751,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8752,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile, # backwards compat
8753,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# vim:set ft=dockerfile:
8754,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8755,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# grab gosu for easy step-down from root
8756,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8757,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8758,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# vim:set ft=dockerfile:
8759,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# explicitly set user/group IDs
8760,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# grab gosu for easy step-down from root
8761,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8762,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8763,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# vim:set ft=dockerfile:
8764,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# explicitly set user/group IDs
8765,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8766,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8767,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# grab gosu for easy step-down from root
8768,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8769,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8770,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8771,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8772,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# see note below about ""*.pyc"" files"
8773,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# arches officialy built by upstream
8774,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8775,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8776,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8777,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8778,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8779,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8780,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8781,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8782,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8783,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8784,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8785,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8786,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8787,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile, # backwards compat
8788,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8789,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8790,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8791,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8792,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		krb5-dev \
8793,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		openldap-dev \
8794,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: prove not found
8795,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8796,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8797,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8798,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8799,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8800,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8801,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8802,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8803,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8804,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8805,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8806,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8807,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8808,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8809,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile, # backwards compat
8810,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8811,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8812,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8813,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8814,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		krb5-dev \
8815,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		openldap-dev \
8816,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: prove not found
8817,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8818,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8819,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8820,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8821,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8822,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8823,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8824,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8825,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8826,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8827,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8828,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8829,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8830,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8831,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile, # backwards compat
8832,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8833,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8834,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8835,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8836,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		krb5-dev \
8837,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		openldap-dev \
8838,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8839,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8840,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8841,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8842,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8843,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8844,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8845,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8846,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8847,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8848,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8849,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8850,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile, # backwards compat
8851,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8852,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8853,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8854,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8855,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		krb5-dev \
8856,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		openldap-dev \
8857,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8858,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8859,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8860,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8861,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8862,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8863,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8864,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8865,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8866,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8867,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8868,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile, # backwards compat
8869,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# vim:set ft=dockerfile:
8870,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# explicitly set user/group IDs
8871,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# grab gosu for easy step-down from root
8872,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8873,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8874,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# arches officialy built by upstream
8875,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8876,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8877,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8878,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8879,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8880,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8881,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8882,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8883,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8884,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8885,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8886,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile, # backwards compat
8887,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,# vim:set ft=dockerfile:
8888,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8889,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8890,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8891,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8892,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# vim:set ft=dockerfile:
8893,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# explicitly set user/group IDs
8894,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# grab gosu for easy step-down from root
8895,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8896,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8897,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8898,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8899,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8900,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8901,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile, # backwards compat
8902,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# vim:set ft=dockerfile:
8903,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# explicitly set user/group IDs
8904,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# grab gosu for easy step-down from root
8905,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8906,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8907,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# arches officialy built by upstream
8908,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8909,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8910,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8911,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8912,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8913,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8914,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8915,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8916,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8917,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8918,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8919,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile, # backwards compat
8920,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8921,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8922,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8923,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8924,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		krb5-dev \
8925,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		openldap-dev \
8926,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: prove not found
8927,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8928,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8929,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8930,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8931,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8932,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8933,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8934,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8935,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8936,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8937,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8938,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8939,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8940,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8941,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile, # backwards compat
8942,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8943,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8944,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8945,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8946,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		krb5-dev \
8947,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		openldap-dev \
8948,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8949,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8950,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8951,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8952,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8953,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8954,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8955,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8956,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8957,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8958,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8959,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8960,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile, # backwards compat
8961,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8962,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8963,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8964,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8965,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		krb5-dev \
8966,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		openldap-dev \
8967,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: prove not found
8968,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8969,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8970,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8971,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8972,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8973,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8974,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8975,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8976,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8977,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8978,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8979,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8980,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8981,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8982,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile, # backwards compat
8983,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# vim:set ft=dockerfile:
8984,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8985,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# grab gosu for easy step-down from root
8986,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8987,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8988,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# vim:set ft=dockerfile:
8989,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# explicitly set user/group IDs
8990,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# grab gosu for easy step-down from root
8991,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8992,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8993,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8994,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8995,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# vim:set ft=dockerfile:
8996,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# explicitly set user/group IDs
8997,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8998,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8999,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# grab gosu for easy step-down from root
9000,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9001,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9002,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9003,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9004,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
9005,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# arches officialy built by upstream
9006,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9007,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9008,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9009,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9010,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9011,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9012,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9013,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9014,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9015,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9016,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9017,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9018,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9019,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile, # backwards compat
9020,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# vim:set ft=dockerfile:
9021,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# explicitly set user/group IDs
9022,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# grab gosu for easy step-down from root
9023,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9024,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9025,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9026,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9027,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9028,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9029,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9030,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9031,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		krb5-dev \
9032,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		openldap-dev \
9033,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: prove not found
9034,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9035,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9036,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9037,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9038,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9039,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9040,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9041,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9042,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9043,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9044,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9045,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9046,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9047,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9048,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile, # backwards compat
9049,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9050,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9051,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9052,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9053,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		krb5-dev \
9054,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		openldap-dev \
9055,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: prove not found
9056,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9057,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9058,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9059,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9060,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9061,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9062,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9063,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9064,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9065,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9066,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9067,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9068,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9069,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile, # backwards compat
9070,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# vim:set ft=dockerfile:
9071,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9072,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# grab gosu for easy step-down from root
9073,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9074,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9075,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9076,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9077,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9078,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9079,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		krb5-dev \
9080,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		openldap-dev \
9081,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: prove not found
9082,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9083,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9084,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9085,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9086,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9087,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9088,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9089,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9090,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9091,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9092,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9093,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9094,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9095,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9096,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile, # backwards compat
9097,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# vim:set ft=dockerfile:
9098,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# explicitly set user/group IDs
9099,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9100,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9101,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# grab gosu for easy step-down from root
9102,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9103,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9104,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9105,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9106,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
9107,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# arches officialy built by upstream
9108,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9109,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9110,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9111,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9112,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9113,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9114,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9115,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9116,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9117,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9118,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9119,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9120,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9121,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile, # backwards compat
9122,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# vim:set ft=dockerfile:
9123,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# explicitly set user/group IDs
9124,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# grab gosu for easy step-down from root
9125,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9126,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9127,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# vim:set ft=dockerfile:
9128,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9129,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# grab gosu for easy step-down from root
9130,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9131,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9132,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# vim:set ft=dockerfile:
9133,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9134,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# grab gosu for easy step-down from root
9135,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9136,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9137,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# vim:set ft=dockerfile:
9138,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9139,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# grab gosu for easy step-down from root
9140,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9141,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9142,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# vim:set ft=dockerfile:
9143,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9144,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# grab gosu for easy step-down from root
9145,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9146,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9147,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# vim:set ft=dockerfile:
9148,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# explicitly set user/group IDs
9149,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# grab gosu for easy step-down from root
9150,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9151,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9152,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# arches officialy built by upstream
9153,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9154,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9155,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9156,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9157,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9158,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9159,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9160,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9161,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9162,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9163,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9164,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile, # backwards compat
9165,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# vim:set ft=dockerfile:
9166,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# explicitly set user/group IDs
9167,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9168,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9169,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# grab gosu for easy step-down from root
9170,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9171,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9172,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9173,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9174,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9175,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# arches officialy built by upstream
9176,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9177,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9178,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9179,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9180,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9181,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9182,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9183,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9184,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9185,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9186,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9187,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9188,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9189,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile, # backwards compat
9190,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9191,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9192,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9193,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9194,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		krb5-dev \
9195,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		openldap-dev \
9196,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: prove not found
9197,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9198,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9199,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9200,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9201,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9202,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9203,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9204,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9205,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9206,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
9207,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9208,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9209,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9210,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9211,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile, # backwards compat
9212,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9213,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9214,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9215,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9216,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		krb5-dev \
9217,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		openldap-dev \
9218,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9219,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9220,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9221,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9222,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9223,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9224,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9225,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9226,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9227,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9228,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9229,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9230,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile, # backwards compat
9231,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# vim:set ft=dockerfile:
9232,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# explicitly set user/group IDs
9233,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# grab gosu for easy step-down from root
9234,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9235,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9236,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9237,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9238,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9239,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9240,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile, # backwards compat
9241,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9242,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9243,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9244,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9245,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		krb5-dev \
9246,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		openldap-dev \
9247,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9248,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9249,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9250,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9251,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9252,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9253,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9254,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9255,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9256,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9257,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9258,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9259,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile, # backwards compat
9260,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# vim:set ft=dockerfile:
9261,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# explicitly set user/group IDs
9262,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9263,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9264,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# grab gosu for easy step-down from root
9265,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9266,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9267,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9268,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9269,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
9270,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# arches officialy built by upstream
9271,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9272,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9273,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9274,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9275,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9276,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9277,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9278,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9279,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9280,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9281,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9282,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9283,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9284,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile, # backwards compat
9285,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9286,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9287,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9288,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9289,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		krb5-dev \
9290,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		openldap-dev \
9291,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9292,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9293,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9294,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9295,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9296,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9297,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9298,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9299,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9300,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9301,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9302,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9303,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9304,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9305,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile, # backwards compat
9306,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# vim:set ft=dockerfile:
9307,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# explicitly set user/group IDs
9308,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# grab gosu for easy step-down from root
9309,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9310,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9311,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9312,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9313,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# vim:set ft=dockerfile:
9314,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# explicitly set user/group IDs
9315,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9316,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9317,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# grab gosu for easy step-down from root
9318,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9319,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9320,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9321,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9322,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
9323,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# arches officialy built by upstream
9324,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9325,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9326,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9327,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9328,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9329,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9330,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9331,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9332,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9333,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9334,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9335,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9336,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9337,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile, # backwards compat
9338,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
9339,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# explicitly set user/group IDs
9340,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
9341,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9342,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9343,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9344,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9345,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# vim:set ft=dockerfile:
9346,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9347,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# grab gosu for easy step-down from root
9348,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9349,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9350,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# vim:set ft=dockerfile:
9351,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# explicitly set user/group IDs
9352,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9353,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9354,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# grab gosu for easy step-down from root
9355,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9356,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9357,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9358,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9359,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# arches officialy built by upstream
9360,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9361,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9362,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9363,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9364,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9365,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9366,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9367,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9368,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9369,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9370,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9371,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile, # backwards compat
9372,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9373,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9374,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9375,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9376,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		krb5-dev \
9377,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		openldap-dev \
9378,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: prove not found
9379,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9380,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9381,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9382,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9383,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9384,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9385,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9386,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9387,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9388,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9389,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9390,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
9391,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9392,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9393,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9394,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9395,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile, # backwards compat
9396,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# vim:set ft=dockerfile:
9397,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9398,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# grab gosu for easy step-down from root
9399,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9400,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9401,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# vim:set ft=dockerfile:
9402,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9403,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# grab gosu for easy step-down from root
9404,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9405,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9406,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9407,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9408,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9409,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9410,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		krb5-dev \
9411,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		openldap-dev \
9412,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9413,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9414,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9415,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9416,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9417,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9418,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9419,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9420,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9421,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9422,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9423,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9424,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile, # backwards compat
9425,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
9426,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# explicitly set user/group IDs
9427,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
9428,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9429,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9430,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9431,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9432,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9433,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9434,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9435,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9436,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9437,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		krb5-dev \
9438,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		openldap-dev \
9439,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9440,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9441,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9442,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9443,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9444,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9445,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9446,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9447,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9448,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9449,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9450,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile, # backwards compat
9451,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# vim:set ft=dockerfile:
9452,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# explicitly set user/group IDs
9453,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# grab gosu for easy step-down from root
9454,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9455,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9456,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9457,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# arches officialy built by upstream
9458,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9459,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9460,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9461,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9462,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9463,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9464,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9465,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9466,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9467,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9468,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9469,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile, # backwards compat
9470,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# vim:set ft=dockerfile:
9471,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# explicitly set user/group IDs
9472,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9473,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9474,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# grab gosu for easy step-down from root
9475,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9476,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9477,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9478,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9479,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# see note below about ""*.pyc"" files"
9480,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# arches officialy built by upstream
9481,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9482,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9483,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9484,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9485,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9486,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9487,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9488,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9489,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9490,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9491,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9492,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9493,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9494,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile, # backwards compat
9495,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9496,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9497,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9498,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9499,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		krb5-dev \
9500,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		openldap-dev \
9501,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: prove not found
9502,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9503,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9504,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9505,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9506,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9507,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9508,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9509,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9510,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9511,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
9512,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9513,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9514,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9515,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9516,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile, # backwards compat
9517,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9518,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9519,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9520,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9521,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		krb5-dev \
9522,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		openldap-dev \
9523,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# configure: error: prove not found
9524,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9525,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9526,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9527,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9528,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9529,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9530,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9531,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9532,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9533,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9534,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9535,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9536,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile, # backwards compat
9537,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9538,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9539,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9540,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9541,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		krb5-dev \
9542,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		openldap-dev \
9543,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: prove not found
9544,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9545,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9546,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9547,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9548,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9549,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9550,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9551,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9552,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9553,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9554,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9555,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9556,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9557,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9558,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile, # backwards compat
9559,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9560,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9561,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9562,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9563,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		krb5-dev \
9564,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		openldap-dev \
9565,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9566,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9567,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9568,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9569,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9570,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9571,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9572,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9573,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9574,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9575,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9576,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# vim:set ft=dockerfile:
9577,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9578,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# grab gosu for easy step-down from root
9579,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9580,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9581,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9582,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9583,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9584,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9585,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		krb5-dev \
9586,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		openldap-dev \
9587,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: prove not found
9588,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9589,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9590,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9591,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9592,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9593,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9594,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9595,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9596,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9597,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9598,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9599,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9600,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9601,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9602,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# vim:set ft=dockerfile:
9603,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# explicitly set user/group IDs
9604,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# grab gosu for easy step-down from root
9605,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9606,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9607,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9608,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9609,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# vim:set ft=dockerfile:
9610,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# explicitly set user/group IDs
9611,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# grab gosu for easy step-down from root
9612,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9613,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9614,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9615,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9616,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9617,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9618,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile, # backwards compat
9619,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# vim:set ft=dockerfile:
9620,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# explicitly set user/group IDs
9621,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9622,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9623,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# grab gosu for easy step-down from root
9624,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9625,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9626,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9627,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
9628,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9629,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9630,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# arches officialy built by upstream
9631,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9632,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9633,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9634,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9635,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9636,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9637,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9638,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9639,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9640,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9641,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9642,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9643,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9644,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile, # backwards compat
9645,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9646,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9647,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9648,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9649,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		krb5-dev \
9650,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		openldap-dev \
9651,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# configure: error: prove not found
9652,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9653,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9654,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9655,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9656,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9657,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9658,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9659,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9660,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9661,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9662,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9663,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9664,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9665,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9666,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile, # backwards compat
9667,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# vim:set ft=dockerfile:
9668,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# explicitly set user/group IDs
9669,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# grab gosu for easy step-down from root
9670,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9671,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9672,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9673,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9674,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# arches officialy built by upstream
9675,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9676,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9677,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9678,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9679,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9680,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9681,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9682,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9683,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9684,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9685,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9686,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile, # backwards compat
9687,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# vim:set ft=dockerfile:
9688,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9689,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# grab gosu for easy step-down from root
9690,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9691,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9692,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9693,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9694,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9695,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9696,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		krb5-dev \
9697,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		openldap-dev \
9698,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9699,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9700,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9701,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9702,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9703,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9704,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9705,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9706,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9707,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9708,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# vim:set ft=dockerfile:
9709,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# explicitly set user/group IDs
9710,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9711,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9712,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# grab gosu for easy step-down from root
9713,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9714,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9715,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9716,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9717,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
9718,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# arches officialy built by upstream
9719,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9720,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9721,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9722,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9723,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9724,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9725,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9726,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9727,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9728,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9729,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9730,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9731,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9732,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile, # backwards compat
9733,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# vim:set ft=dockerfile:
9734,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# explicitly set user/group IDs
9735,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# grab gosu for easy step-down from root
9736,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9737,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9738,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9739,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9740,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# arches officialy built by upstream
9741,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9742,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9743,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9744,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9745,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9746,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9747,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9748,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9749,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9750,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9751,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9752,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile, # backwards compat
9753,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# vim:set ft=dockerfile:
9754,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# explicitly set user/group IDs
9755,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# grab gosu for easy step-down from root
9756,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9757,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9758,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9759,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9760,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9761,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9762,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9763,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9764,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		krb5-dev \
9765,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		openldap-dev \
9766,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: prove not found
9767,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9768,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9769,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9770,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
9771,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9772,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9773,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9774,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9775,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9776,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9777,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9778,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9779,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9780,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9781,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile, # backwards compat
9782,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9783,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9784,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9785,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9786,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		krb5-dev \
9787,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		openldap-dev \
9788,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: prove not found
9789,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9790,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9791,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9792,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9793,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9794,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9795,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9796,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9797,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9798,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
9799,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9800,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9801,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9802,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9803,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile, # backwards compat
9804,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9805,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9806,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9807,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9808,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		krb5-dev \
9809,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		openldap-dev \
9810,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: prove not found
9811,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9812,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9813,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9814,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9815,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9816,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9817,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9818,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9819,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9820,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9821,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9822,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9823,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9824,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile, # backwards compat
9825,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# vim:set ft=dockerfile:
9826,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# explicitly set user/group IDs
9827,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9828,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9829,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# grab gosu for easy step-down from root
9830,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9831,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9832,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9833,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9834,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# see note below about ""*.pyc"" files"
9835,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# arches officialy built by upstream
9836,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9837,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9838,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9839,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9840,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9841,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9842,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9843,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9844,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9845,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9846,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9847,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9848,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9849,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile, # backwards compat
9850,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9851,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9852,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9853,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9854,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		krb5-dev \
9855,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		openldap-dev \
9856,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: prove not found
9857,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9858,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9859,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9860,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9861,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9862,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9863,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9864,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9865,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9866,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9867,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9868,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9869,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9870,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9871,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile, # backwards compat
9872,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
9873,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9874,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9875,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9876,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		krb5-dev \
9877,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		openldap-dev \
9878,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: prove not found
9879,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9880,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9881,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9882,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9883,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9884,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9885,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9886,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9887,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9888,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#p' --recursive /usr/local \
9889,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9890,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9891,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9892,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9893,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# vim:set ft=dockerfile:
9894,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# explicitly set user/group IDs
9895,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# grab gosu for easy step-down from root
9896,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9897,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9898,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9899,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9900,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9901,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9902,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile, # backwards compat
9903,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9904,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9905,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9906,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9907,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		krb5-dev \
9908,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		openldap-dev \
9909,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9910,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9911,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9912,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9913,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9914,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9915,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9916,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9917,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9918,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9919,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9920,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9921,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9922,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9923,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		krb5-dev \
9924,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		openldap-dev \
9925,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: prove not found
9926,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9927,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9928,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9929,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9930,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9931,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9932,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9933,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9934,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9935,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9936,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9937,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9938,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9939,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9940,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# vim:set ft=dockerfile:
9941,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9942,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# grab gosu for easy step-down from root
9943,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9944,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9945,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9946,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9947,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9948,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9949,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		krb5-dev \
9950,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		openldap-dev \
9951,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: prove not found
9952,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9953,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9954,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9955,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9956,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9957,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9958,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9959,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9960,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9961,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9962,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9963,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
9964,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9965,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9966,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9967,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9968,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile, # backwards compat
9969,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# vim:set ft=dockerfile:
9970,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# explicitly set user/group IDs
9971,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# grab gosu for easy step-down from root
9972,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9973,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9974,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9975,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9976,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9977,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9978,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# vim:set ft=dockerfile:
9979,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9980,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# grab gosu for easy step-down from root
9981,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9982,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9983,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9984,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9985,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9986,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9987,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		krb5-dev \
9988,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		openldap-dev \
9989,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: prove not found
9990,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9991,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9992,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9993,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9994,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9995,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9996,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9997,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9998,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9999,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10000,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10001,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10002,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10003,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10004,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile, # backwards compat
10005,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10006,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10007,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10008,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10009,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		krb5-dev \
10010,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		openldap-dev \
10011,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10012,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10013,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10014,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10015,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10016,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
10017,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10018,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10019,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# vim:set ft=dockerfile:
10020,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# explicitly set user/group IDs
10021,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10022,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10023,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
10024,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10025,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10026,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10027,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10028,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10029,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10030,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# arches officialy built by upstream
10031,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10032,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10033,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10034,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10035,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10036,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10037,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10038,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10039,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10040,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10041,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10042,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10043,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10044,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile, # backwards compat
10045,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# vim:set ft=dockerfile:
10046,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# explicitly set user/group IDs
10047,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10048,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10049,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# grab gosu for easy step-down from root
10050,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10051,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10052,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10053,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10054,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10055,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# arches officialy built by upstream
10056,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10057,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10058,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10059,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10060,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10061,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10062,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10063,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10064,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10065,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10066,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10067,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10068,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10069,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile, # backwards compat
10070,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# vim:set ft=dockerfile:
10071,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# explicitly set user/group IDs
10072,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# grab gosu for easy step-down from root
10073,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10074,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10075,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10076,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10077,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10078,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10079,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10080,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10081,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		krb5-dev \
10082,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		openldap-dev \
10083,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10084,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10085,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10086,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10087,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10088,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10089,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10090,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10091,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10092,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10093,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10094,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10095,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		krb5-dev \
10096,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		openldap-dev \
10097,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: prove not found
10098,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10099,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10100,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10101,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10102,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10103,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10104,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10105,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10106,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10107,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10108,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10109,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10110,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10111,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10112,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile, # backwards compat
10113,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# vim:set ft=dockerfile:
10114,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# explicitly set user/group IDs
10115,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# grab gosu for easy step-down from root
10116,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10117,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10118,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10119,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10120,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10121,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10122,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile, # backwards compat
10123,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10124,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10125,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10126,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10127,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		krb5-dev \
10128,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		openldap-dev \
10129,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10130,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10131,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10132,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10133,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10134,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10135,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10136,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10137,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# vim:set ft=dockerfile:
10138,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10139,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# grab gosu for easy step-down from root
10140,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10141,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10142,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# vim:set ft=dockerfile:
10143,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# explicitly set user/group IDs
10144,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10145,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10146,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# grab gosu for easy step-down from root
10147,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10148,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10149,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10150,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10151,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
10152,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# arches officialy built by upstream
10153,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10154,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10155,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10156,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10157,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10158,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10159,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10160,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10161,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10162,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10163,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10164,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10165,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10166,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile, # backwards compat
10167,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10168,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10169,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10170,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10171,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		krb5-dev \
10172,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		openldap-dev \
10173,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10174,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10175,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10176,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10177,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10178,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10179,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10180,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10181,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10182,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10183,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10184,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile, # backwards compat
10185,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10186,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10187,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10188,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10189,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		krb5-dev \
10190,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		openldap-dev \
10191,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: prove not found
10192,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10193,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10194,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10195,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10196,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10197,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10198,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10199,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10200,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10201,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10202,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10203,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10204,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10205,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10206,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile, # backwards compat
10207,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# vim:set ft=dockerfile:
10208,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# explicitly set user/group IDs
10209,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10210,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10211,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
10212,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10213,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10214,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10215,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10216,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10217,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10218,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# arches officialy built by upstream
10219,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10220,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10221,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10222,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10223,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10224,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10225,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10226,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10227,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10228,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10229,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10230,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10231,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10232,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile, # backwards compat
10233,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10234,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10235,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10236,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10237,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		krb5-dev \
10238,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		openldap-dev \
10239,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: prove not found
10240,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10241,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10242,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10243,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10244,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10245,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10246,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10247,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10248,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10249,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10250,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10251,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10252,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10253,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10254,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile, # backwards compat
10255,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# vim:set ft=dockerfile:
10256,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# explicitly set user/group IDs
10257,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10258,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10259,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# grab gosu for easy step-down from root
10260,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10261,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10262,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10263,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10264,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10265,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10266,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# arches officialy built by upstream
10267,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10268,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10269,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10270,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10271,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10272,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10273,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10274,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10275,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10276,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10277,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10278,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10279,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10280,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile, # backwards compat
10281,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# vim:set ft=dockerfile:
10282,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# explicitly set user/group IDs
10283,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10284,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10285,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# grab gosu for easy step-down from root
10286,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10287,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10288,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10289,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10290,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10291,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10292,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# arches officialy built by upstream
10293,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10294,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10295,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10296,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10297,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10298,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10299,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10300,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10301,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10302,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10303,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10304,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10305,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10306,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile, # backwards compat
10307,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# vim:set ft=dockerfile:
10308,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# explicitly set user/group IDs
10309,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# grab gosu for easy step-down from root
10310,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10311,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10312,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# arches officialy built by upstream
10313,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10314,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10315,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10316,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10317,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10318,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10319,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10320,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10321,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10322,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10323,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10324,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile, # backwards compat
10325,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# vim:set ft=dockerfile:
10326,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# explicitly set user/group IDs
10327,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10328,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10329,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# grab gosu for easy step-down from root
10330,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10331,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10332,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10333,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10334,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# arches officialy built by upstream
10335,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10336,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10337,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10338,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10339,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10340,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10341,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10342,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10343,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10344,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10345,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10346,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile, # backwards compat
10347,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# vim:set ft=dockerfile:
10348,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# explicitly set user/group IDs
10349,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10350,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10351,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# grab gosu for easy step-down from root
10352,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10353,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10354,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10355,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10356,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# see note below about ""*.pyc"" files"
10357,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# arches officialy built by upstream
10358,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10359,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10360,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10361,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10362,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10363,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10364,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10365,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10366,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10367,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10368,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10369,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10370,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10371,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile, # backwards compat
10372,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# vim:set ft=dockerfile:
10373,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10374,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# grab gosu for easy step-down from root
10375,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10376,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10377,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# vim:set ft=dockerfile:
10378,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# explicitly set user/group IDs
10379,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# grab gosu for easy step-down from root
10380,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10381,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10382,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10383,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10384,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# arches officialy built by upstream
10385,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10386,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10387,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10388,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10389,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10390,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10391,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10392,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10393,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10394,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10395,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10396,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile, # backwards compat
10397,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# vim:set ft=dockerfile:
10398,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# explicitly set user/group IDs
10399,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10400,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10401,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# grab gosu for easy step-down from root
10402,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10403,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10404,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10405,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10406,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10407,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10408,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# arches officialy built by upstream
10409,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10410,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10411,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10412,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10413,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10414,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10415,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10416,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10417,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10418,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10419,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10420,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10421,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10422,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile, # backwards compat
10423,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# vim:set ft=dockerfile:
10424,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# explicitly set user/group IDs
10425,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10426,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10427,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# grab gosu for easy step-down from root
10428,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10429,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10430,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10431,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10432,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# see note below about ""*.pyc"" files"
10433,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# arches officialy built by upstream
10434,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10435,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10436,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10437,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10438,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10439,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10440,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10441,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10442,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10443,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10444,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10445,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10446,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10447,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile, # backwards compat
10448,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10449,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10450,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10451,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10452,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		krb5-dev \
10453,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		openldap-dev \
10454,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: prove not found
10455,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10456,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10457,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10458,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10459,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10460,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10461,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10462,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10463,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10464,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
10465,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10466,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10467,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10468,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10469,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile, # backwards compat
10470,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# vim:set ft=dockerfile:
10471,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# explicitly set user/group IDs
10472,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# grab gosu for easy step-down from root
10473,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10474,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10475,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10476,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10477,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10478,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10479,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile, # backwards compat
10480,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# vim:set ft=dockerfile:
10481,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# explicitly set user/group IDs
10482,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# grab gosu for easy step-down from root
10483,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10484,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10485,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10486,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10487,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10488,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10489,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10490,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10491,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10492,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10493,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		krb5-dev \
10494,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		openldap-dev \
10495,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: prove not found
10496,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10497,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10498,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10499,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10500,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10501,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10502,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10503,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10504,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10505,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10506,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10507,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10508,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10509,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10510,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile, # backwards compat
10511,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# vim:set ft=dockerfile:
10512,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10513,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# grab gosu for easy step-down from root
10514,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10515,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10516,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10517,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10518,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10519,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10520,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		krb5-dev \
10521,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		openldap-dev \
10522,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10523,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10524,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10525,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10526,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10527,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
10528,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10529,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10530,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10531,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		krb5-dev \
10532,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		openldap-dev \
10533,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: prove not found
10534,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10535,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10536,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10537,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10538,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10539,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10540,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10541,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10542,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10543,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#p' --recursive /usr/local \
10544,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10545,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10546,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10547,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10548,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile, # backwards compat
10549,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# vim:set ft=dockerfile:
10550,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# explicitly set user/group IDs
10551,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# grab gosu for easy step-down from root
10552,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10553,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10554,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# vim:set ft=dockerfile:
10555,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# explicitly set user/group IDs
10556,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# grab gosu for easy step-down from root
10557,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10558,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10559,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10560,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10561,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# arches officialy built by upstream
10562,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10563,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10564,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10565,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10566,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10567,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10568,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10569,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10570,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10571,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10572,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10573,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile, # backwards compat
10574,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# vim:set ft=dockerfile:
10575,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# explicitly set user/group IDs
10576,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# grab gosu for easy step-down from root
10577,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10578,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10579,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# arches officialy built by upstream
10580,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10581,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10582,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10583,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10584,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10585,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10586,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10587,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10588,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10589,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10590,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10591,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile, # backwards compat
10592,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10593,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10594,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10595,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10596,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		krb5-dev \
10597,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		openldap-dev \
10598,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10599,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10600,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10601,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10602,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10603,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10604,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10605,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10606,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10607,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10608,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10609,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10610,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10611,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10612,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10613,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		krb5-dev \
10614,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		openldap-dev \
10615,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10616,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10617,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10618,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10619,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10620,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10621,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10622,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10623,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10624,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10625,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# vim:set ft=dockerfile:
10626,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# explicitly set user/group IDs
10627,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10628,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10629,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# grab gosu for easy step-down from root
10630,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10631,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10632,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10633,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10634,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
10635,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# arches officialy built by upstream
10636,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10637,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10638,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10639,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10640,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10641,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10642,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10643,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10644,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10645,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10646,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10647,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10648,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10649,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile, # backwards compat
10650,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
10651,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10652,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10653,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10654,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		krb5-dev \
10655,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		openldap-dev \
10656,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: prove not found
10657,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10658,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10659,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10660,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
10661,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10662,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10663,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10664,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10665,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10666,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#p' --recursive /usr/local \
10667,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10668,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10669,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10670,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10671,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10672,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10673,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10674,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10675,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		krb5-dev \
10676,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		openldap-dev \
10677,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10678,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10679,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10680,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10681,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10682,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10683,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10684,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10685,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10686,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10687,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10688,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile, # backwards compat
10689,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10690,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10691,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10692,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10693,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		krb5-dev \
10694,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		openldap-dev \
10695,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10696,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10697,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10698,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10699,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10700,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
10701,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10702,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10703,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# vim:set ft=dockerfile:
10704,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# explicitly set user/group IDs
10705,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# grab gosu for easy step-down from root
10706,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10707,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10708,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10709,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10710,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10711,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10712,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile, # backwards compat
10713,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
10714,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10715,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10716,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10717,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		krb5-dev \
10718,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		openldap-dev \
10719,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10720,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10721,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10722,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10723,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10724,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10725,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10726,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10727,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10728,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10729,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10730,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10731,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile, # backwards compat
10732,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10733,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10734,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10735,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10736,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		krb5-dev \
10737,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		openldap-dev \
10738,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: prove not found
10739,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10740,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10741,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10742,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10743,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10744,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10745,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10746,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10747,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10748,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10749,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10750,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10751,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10752,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10753,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile, # backwards compat
10754,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10755,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10756,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10757,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10758,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		krb5-dev \
10759,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		openldap-dev \
10760,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: prove not found
10761,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10762,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10763,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10764,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10765,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10766,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10767,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10768,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10769,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10770,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10771,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10772,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10773,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10774,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile, # backwards compat
10775,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10776,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10777,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10778,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10779,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		krb5-dev \
10780,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		openldap-dev \
10781,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: prove not found
10782,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10783,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10784,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10785,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10786,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10787,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10788,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10789,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10790,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10791,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10792,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10793,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
10794,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10795,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10796,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10797,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10798,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile, # backwards compat
10799,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# vim:set ft=dockerfile:
10800,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# explicitly set user/group IDs
10801,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# grab gosu for easy step-down from root
10802,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10803,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10804,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
10805,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10806,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10807,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10808,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		krb5-dev \
10809,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		openldap-dev \
10810,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: prove not found
10811,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10812,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10813,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10814,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10815,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10816,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10817,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10818,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10819,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10820,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#p' --recursive /usr/local \
10821,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10822,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10823,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10824,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10825,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile, # backwards compat
10826,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
10827,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10828,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10829,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10830,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		krb5-dev \
10831,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		openldap-dev \
10832,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: prove not found
10833,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10834,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10835,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10836,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
10837,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10838,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10839,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10840,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10841,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10842,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#p' --recursive /usr/local \
10843,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10844,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10845,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10846,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10847,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# vim:set ft=dockerfile:
10848,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# explicitly set user/group IDs
10849,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10850,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10851,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# grab gosu for easy step-down from root
10852,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10853,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10854,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10855,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10856,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# see note below about ""*.pyc"" files"
10857,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# arches officialy built by upstream
10858,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10859,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10860,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10861,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10862,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10863,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10864,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10865,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10866,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10867,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10868,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10869,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10870,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10871,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile, # backwards compat
10872,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# vim:set ft=dockerfile:
10873,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# explicitly set user/group IDs
10874,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10875,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10876,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# grab gosu for easy step-down from root
10877,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10878,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10879,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10880,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10881,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
10882,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# arches officialy built by upstream
10883,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10884,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10885,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10886,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10887,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10888,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10889,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10890,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10891,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10892,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10893,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10894,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10895,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10896,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile, # backwards compat
10897,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10898,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10899,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10900,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10901,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		krb5-dev \
10902,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		openldap-dev \
10903,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: prove not found
10904,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10905,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10906,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10907,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10908,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10909,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10910,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10911,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10912,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10913,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10914,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10915,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10916,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10917,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10918,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile, # backwards compat
10919,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# vim:set ft=dockerfile:
10920,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# explicitly set user/group IDs
10921,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10922,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10923,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# grab gosu for easy step-down from root
10924,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10925,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10926,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10927,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10928,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# see note below about ""*.pyc"" files"
10929,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# arches officialy built by upstream
10930,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10931,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10932,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10933,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10934,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10935,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10936,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10937,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10938,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10939,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10940,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10941,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10942,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10943,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile, # backwards compat
10944,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10945,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10946,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10947,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10948,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		krb5-dev \
10949,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		openldap-dev \
10950,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10951,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10952,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10953,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10954,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10955,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10956,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10957,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10958,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10959,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10960,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10961,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile, # backwards compat
10962,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# vim:set ft=dockerfile:
10963,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# explicitly set user/group IDs
10964,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10965,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10966,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# grab gosu for easy step-down from root
10967,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10968,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10969,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10970,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10971,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10972,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# arches officialy built by upstream
10973,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10974,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10975,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10976,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10977,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10978,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10979,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10980,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10981,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10982,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10983,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10984,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10985,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10986,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile, # backwards compat
10987,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10988,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10989,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10990,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10991,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		krb5-dev \
10992,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		openldap-dev \
10993,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: prove not found
10994,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10995,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10996,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10997,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10998,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10999,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11000,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11001,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11002,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11003,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11004,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11005,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11006,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11007,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile, # backwards compat
11008,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# vim:set ft=dockerfile:
11009,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# explicitly set user/group IDs
11010,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# grab gosu for easy step-down from root
11011,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11012,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11013,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11014,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11015,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# vim:set ft=dockerfile:
11016,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# explicitly set user/group IDs
11017,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# grab gosu for easy step-down from root
11018,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11019,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11020,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11021,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11022,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11023,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11024,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		krb5-dev \
11025,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		openldap-dev \
11026,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: prove not found
11027,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11028,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11029,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11030,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11031,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11032,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11033,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11034,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11035,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11036,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11037,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11038,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11039,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11040,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11041,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile, # backwards compat
11042,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11043,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11044,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11045,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11046,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		krb5-dev \
11047,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		openldap-dev \
11048,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11049,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11050,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11051,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11052,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11053,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11054,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11055,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11056,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11057,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11058,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11059,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11060,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11061,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11062,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11063,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		krb5-dev \
11064,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		openldap-dev \
11065,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: prove not found
11066,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11067,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11068,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11069,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11070,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11071,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11072,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11073,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11074,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11075,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11076,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11077,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11078,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11079,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11080,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile, # backwards compat
11081,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# vim:set ft=dockerfile:
11082,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# explicitly set user/group IDs
11083,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11084,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11085,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# grab gosu for easy step-down from root
11086,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11087,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11088,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11089,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11090,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11091,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11092,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# arches officialy built by upstream
11093,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11094,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11095,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11096,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11097,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11098,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11099,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11100,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11101,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11102,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11103,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11104,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11105,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11106,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile, # backwards compat
11107,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# vim:set ft=dockerfile:
11108,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# explicitly set user/group IDs
11109,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# grab gosu for easy step-down from root
11110,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11111,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11112,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11113,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11114,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11115,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11116,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile, # backwards compat
11117,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11118,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11119,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11120,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11121,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		krb5-dev \
11122,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		openldap-dev \
11123,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11124,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11125,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11126,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11127,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11128,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11129,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11130,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11131,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# vim:set ft=dockerfile:
11132,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11133,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# grab gosu for easy step-down from root
11134,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11135,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11136,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# vim:set ft=dockerfile:
11137,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# explicitly set user/group IDs
11138,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11139,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11140,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# grab gosu for easy step-down from root
11141,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11142,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11143,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11144,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11145,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11146,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# arches officialy built by upstream
11147,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11148,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11149,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11150,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11151,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11152,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11153,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11154,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11155,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11156,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11157,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11158,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11159,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11160,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile, # backwards compat
11161,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11162,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11163,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11164,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11165,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		krb5-dev \
11166,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		openldap-dev \
11167,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: prove not found
11168,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11169,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11170,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11171,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11172,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11173,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11174,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11175,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11176,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11177,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11178,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11179,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11180,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11181,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11182,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile, # backwards compat
11183,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# vim:set ft=dockerfile:
11184,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# explicitly set user/group IDs
11185,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# grab gosu for easy step-down from root
11186,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11187,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11188,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11189,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11190,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# arches officialy built by upstream
11191,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11192,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11193,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11194,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11195,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11196,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11197,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11198,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11199,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11200,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11201,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11202,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile, # backwards compat
11203,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11204,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11205,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11206,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11207,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		krb5-dev \
11208,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		openldap-dev \
11209,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: prove not found
11210,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11211,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11212,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11213,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11214,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11215,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11216,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11217,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11218,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11219,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11220,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11221,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11222,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11223,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11224,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile, # backwards compat
11225,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11226,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11227,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11228,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11229,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		krb5-dev \
11230,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		openldap-dev \
11231,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: prove not found
11232,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11233,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11234,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11235,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11236,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11237,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11238,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11239,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11240,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11241,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11242,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11243,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11244,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11245,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11246,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile, # backwards compat
11247,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# vim:set ft=dockerfile:
11248,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11249,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# grab gosu for easy step-down from root
11250,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11251,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11252,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11253,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11254,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11255,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11256,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		krb5-dev \
11257,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		openldap-dev \
11258,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11259,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11260,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11261,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11262,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11263,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11264,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11265,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11266,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# vim:set ft=dockerfile:
11267,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# explicitly set user/group IDs
11268,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# grab gosu for easy step-down from root
11269,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11270,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11271,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11272,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11273,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11274,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11275,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11276,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11277,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11278,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		krb5-dev \
11279,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		openldap-dev \
11280,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: prove not found
11281,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11282,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11283,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11284,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11285,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11286,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11287,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11288,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11289,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11290,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11291,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11292,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11293,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11294,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11295,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile, # backwards compat
11296,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11297,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11298,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11299,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11300,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		krb5-dev \
11301,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		openldap-dev \
11302,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11303,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11304,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11305,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11306,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11307,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11308,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11309,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11310,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# vim:set ft=dockerfile:
11311,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# explicitly set user/group IDs
11312,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# grab gosu for easy step-down from root
11313,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11314,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11315,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# vim:set ft=dockerfile:
11316,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# explicitly set user/group IDs
11317,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# grab gosu for easy step-down from root
11318,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11319,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11320,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11321,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11322,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# vim:set ft=dockerfile:
11323,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11324,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# grab gosu for easy step-down from root
11325,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11326,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11327,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# vim:set ft=dockerfile:
11328,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# explicitly set user/group IDs
11329,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11330,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11331,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# grab gosu for easy step-down from root
11332,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11333,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11334,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11335,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11336,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11337,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# arches officialy built by upstream
11338,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11339,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11340,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11341,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11342,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11343,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11344,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11345,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11346,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11347,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11348,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11349,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11350,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11351,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile, # backwards compat
11352,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# vim:set ft=dockerfile:
11353,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# explicitly set user/group IDs
11354,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11355,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11356,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# grab gosu for easy step-down from root
11357,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11358,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11359,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11360,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11361,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
11362,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# arches officialy built by upstream
11363,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11364,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11365,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11366,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11367,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11368,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11369,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11370,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11371,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11372,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11373,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11374,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11375,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11376,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile, # backwards compat
11377,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11378,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11379,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11380,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11381,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		krb5-dev \
11382,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		openldap-dev \
11383,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: prove not found
11384,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11385,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11386,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11387,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
11388,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11389,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11390,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11391,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11392,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11393,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11394,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11395,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11396,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11397,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11398,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile, # backwards compat
11399,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# vim:set ft=dockerfile:
11400,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# explicitly set user/group IDs
11401,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11402,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11403,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# grab gosu for easy step-down from root
11404,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11405,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11406,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11407,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11408,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11409,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# arches officialy built by upstream
11410,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11411,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11412,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11413,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11414,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11415,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11416,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11417,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11418,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11419,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11420,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11421,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11422,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11423,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile, # backwards compat
11424,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11425,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11426,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11427,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11428,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		krb5-dev \
11429,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		openldap-dev \
11430,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11431,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11432,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11433,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11434,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11435,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11436,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11437,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11438,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# vim:set ft=dockerfile:
11439,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# explicitly set user/group IDs
11440,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11441,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11442,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# grab gosu for easy step-down from root
11443,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11444,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11445,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11446,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11447,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# see note below about ""*.pyc"" files"
11448,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# arches officialy built by upstream
11449,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11450,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11451,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11452,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11453,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11454,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11455,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11456,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11457,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11458,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11459,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11460,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11461,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11462,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile, # backwards compat
11463,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# vim:set ft=dockerfile:
11464,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# explicitly set user/group IDs
11465,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# grab gosu for easy step-down from root
11466,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11467,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11468,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# vim:set ft=dockerfile:
11469,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# explicitly set user/group IDs
11470,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# grab gosu for easy step-down from root
11471,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11472,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11473,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11474,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11475,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# arches officialy built by upstream
11476,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11477,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11478,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11479,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11480,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11481,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11482,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11483,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11484,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11485,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11486,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11487,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile, # backwards compat
11488,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11489,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11490,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11491,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11492,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		krb5-dev \
11493,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		openldap-dev \
11494,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: prove not found
11495,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11496,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11497,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11498,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11499,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11500,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11501,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11502,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11503,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11504,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11505,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11506,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11507,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11508,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11509,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile, # backwards compat
11510,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# vim:set ft=dockerfile:
11511,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11512,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# grab gosu for easy step-down from root
11513,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11514,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11515,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11516,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11517,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11518,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11519,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		krb5-dev \
11520,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		openldap-dev \
11521,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: prove not found
11522,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11523,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11524,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
11525,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11526,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11527,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11528,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11529,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11530,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11531,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11532,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11533,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11534,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11535,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11536,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11537,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile, # backwards compat
11538,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11539,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
11540,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11541,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11542,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# vim:set ft=dockerfile:
11543,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# explicitly set user/group IDs
11544,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11545,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11546,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# grab gosu for easy step-down from root
11547,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11548,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11549,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11550,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11551,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
11552,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# arches officialy built by upstream
11553,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11554,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11555,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11556,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11557,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11558,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11559,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11560,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11561,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11562,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11563,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11564,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11565,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11566,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile, # backwards compat
11567,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# vim:set ft=dockerfile:
11568,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# explicitly set user/group IDs
11569,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# grab gosu for easy step-down from root
11570,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11571,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11572,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# arches officialy built by upstream
11573,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11574,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11575,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11576,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11577,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11578,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11579,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11580,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11581,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11582,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11583,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11584,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile, # backwards compat
11585,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# vim:set ft=dockerfile:
11586,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# explicitly set user/group IDs
11587,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# grab gosu for easy step-down from root
11588,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11589,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11590,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11591,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11592,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11593,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11594,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile, # backwards compat
11595,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11596,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11597,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11598,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11599,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		krb5-dev \
11600,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		openldap-dev \
11601,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: prove not found
11602,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11603,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11604,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11605,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11606,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11607,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11608,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11609,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11610,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11611,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11612,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11613,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11614,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11615,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11616,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile, # backwards compat
11617,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
11618,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11619,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11620,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11621,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		krb5-dev \
11622,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		openldap-dev \
11623,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: prove not found
11624,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11625,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11626,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11627,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11628,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11629,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11630,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11631,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11632,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11633,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#p' --recursive /usr/local \
11634,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11635,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11636,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11637,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11638,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11639,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11640,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11641,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11642,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		krb5-dev \
11643,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		openldap-dev \
11644,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11645,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11646,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11647,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11648,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11649,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
11650,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11651,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11652,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# vim:set ft=dockerfile:
11653,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# explicitly set user/group IDs
11654,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# grab gosu for easy step-down from root
11655,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11656,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11657,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# arches officialy built by upstream
11658,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11659,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11660,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11661,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11662,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11663,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11664,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11665,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11666,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11667,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11668,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11669,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile, # backwards compat
11670,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11671,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11672,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11673,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11674,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		krb5-dev \
11675,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		openldap-dev \
11676,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: prove not found
11677,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11678,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11679,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11680,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11681,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11682,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11683,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11684,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11685,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11686,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11687,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11688,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11689,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11690,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11691,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile, # backwards compat
11692,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11693,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11694,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11695,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11696,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		krb5-dev \
11697,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		openldap-dev \
11698,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: prove not found
11699,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11700,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11701,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11702,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11703,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11704,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11705,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11706,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11707,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11708,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11709,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11710,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11711,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11712,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11713,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile, # backwards compat
11714,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# vim:set ft=dockerfile:
11715,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# explicitly set user/group IDs
11716,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# grab gosu for easy step-down from root
11717,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11718,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11719,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11720,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# arches officialy built by upstream
11721,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11722,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11723,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11724,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11725,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11726,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11727,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11728,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11729,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11730,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11731,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11732,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile, # backwards compat
11733,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11734,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11735,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# vim:set ft=dockerfile:
11736,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# explicitly set user/group IDs
11737,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11738,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11739,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# grab gosu for easy step-down from root
11740,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11741,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11742,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11743,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11744,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# arches officialy built by upstream
11745,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11746,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11747,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11748,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11749,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11750,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11751,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11752,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11753,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11754,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11755,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11756,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile, # backwards compat
11757,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# vim:set ft=dockerfile:
11758,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# explicitly set user/group IDs
11759,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11760,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11761,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# grab gosu for easy step-down from root
11762,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11763,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11764,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11765,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11766,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11767,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# arches officialy built by upstream
11768,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11769,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11770,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11771,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11772,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11773,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11774,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11775,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11776,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11777,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11778,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11779,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11780,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11781,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile, # backwards compat
11782,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11783,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11784,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11785,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11786,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		krb5-dev \
11787,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		openldap-dev \
11788,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11789,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11790,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11791,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11792,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11793,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11794,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11795,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11796,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11797,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11798,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11799,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile, # backwards compat
11800,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11801,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11802,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11803,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11804,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		krb5-dev \
11805,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		openldap-dev \
11806,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11807,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11808,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11809,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11810,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11811,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11812,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11813,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11814,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11815,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11816,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11817,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11818,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11819,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11820,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11821,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		krb5-dev \
11822,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		openldap-dev \
11823,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: prove not found
11824,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11825,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11826,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11827,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11828,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11829,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11830,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11831,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11832,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11833,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11834,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11835,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11836,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11837,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile, # backwards compat
11838,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11839,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11840,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11841,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11842,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		krb5-dev \
11843,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		openldap-dev \
11844,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: prove not found
11845,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11846,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11847,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11848,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11849,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11850,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11851,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11852,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11853,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11854,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11855,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11856,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11857,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11858,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11859,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile, # backwards compat
11860,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# vim:set ft=dockerfile:
11861,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# explicitly set user/group IDs
11862,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# grab gosu for easy step-down from root
11863,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11864,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11865,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# vim:set ft=dockerfile:
11866,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# explicitly set user/group IDs
11867,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# grab gosu for easy step-down from root
11868,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11869,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11870,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11871,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11872,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11873,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11874,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		krb5-dev \
11875,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		openldap-dev \
11876,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11877,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11878,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11879,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11880,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11881,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11882,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11883,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11884,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11885,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11886,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11887,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile, # backwards compat
11888,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11889,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11890,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11891,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11892,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		krb5-dev \
11893,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		openldap-dev \
11894,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: prove not found
11895,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11896,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11897,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
11898,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11899,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11900,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11901,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11902,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11903,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11904,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11905,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11906,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11907,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11908,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11909,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11910,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile, # backwards compat
11911,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# vim:set ft=dockerfile:
11912,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11913,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# grab gosu for easy step-down from root
11914,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11915,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11916,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# vim:set ft=dockerfile:
11917,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# explicitly set user/group IDs
11918,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# grab gosu for easy step-down from root
11919,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11920,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11921,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# arches officialy built by upstream
11922,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11923,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11924,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11925,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11926,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11927,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11928,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11929,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11930,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11931,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11932,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11933,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile, # backwards compat
11934,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# vim:set ft=dockerfile:
11935,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# explicitly set user/group IDs
11936,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# grab gosu for easy step-down from root
11937,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11938,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11939,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11940,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# arches officialy built by upstream
11941,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11942,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11943,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11944,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11945,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11946,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11947,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11948,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11949,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11950,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11951,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11952,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile, # backwards compat
11953,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# vim:set ft=dockerfile:
11954,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# explicitly set user/group IDs
11955,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11956,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11957,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# grab gosu for easy step-down from root
11958,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11959,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11960,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11961,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11962,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11963,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# see note below about ""*.pyc"" files"
11964,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# arches officialy built by upstream
11965,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11966,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11967,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11968,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11969,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11970,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11971,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11972,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11973,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11974,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11975,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11976,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11977,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11978,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile, # backwards compat
11979,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# vim:set ft=dockerfile:
11980,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# explicitly set user/group IDs
11981,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# grab gosu for easy step-down from root
11982,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11983,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11984,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11985,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11986,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# arches officialy built by upstream
11987,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11988,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11989,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11990,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11991,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11992,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11993,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11994,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11995,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11996,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11997,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11998,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile, # backwards compat
11999,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# vim:set ft=dockerfile:
12000,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# explicitly set user/group IDs
12001,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# grab gosu for easy step-down from root
12002,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12003,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12004,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12005,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12006,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12007,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12008,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile, # backwards compat
12009,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12010,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12011,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12012,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12013,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		krb5-dev \
12014,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		openldap-dev \
12015,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12016,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12017,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12018,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12019,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12020,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# vim:set ft=dockerfile:
12021,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12022,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# grab gosu for easy step-down from root
12023,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12024,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12025,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# vim:set ft=dockerfile:
12026,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12027,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# grab gosu for easy step-down from root
12028,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12029,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12030,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# vim:set ft=dockerfile:
12031,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# explicitly set user/group IDs
12032,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12033,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12034,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# grab gosu for easy step-down from root
12035,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12036,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12037,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12038,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12039,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
12040,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# arches officialy built by upstream
12041,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12042,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12043,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12044,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12045,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12046,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12047,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12048,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12049,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12050,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12051,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12052,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12053,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12054,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile, # backwards compat
12055,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,# vim:set ft=dockerfile:
12056,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12057,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12058,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12059,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12060,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12061,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12062,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		krb5-dev \
12063,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		openldap-dev \
12064,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: prove not found
12065,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12066,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12067,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12068,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12069,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12070,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12071,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12072,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12073,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12074,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12075,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12076,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12077,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12078,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12079,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile, # backwards compat
12080,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12081,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12082,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12083,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12084,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12085,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12086,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		krb5-dev \
12087,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		openldap-dev \
12088,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: prove not found
12089,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12090,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12091,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12092,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12093,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12094,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12095,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12096,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12097,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12098,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12099,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12100,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12101,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12102,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12103,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12104,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile, # backwards compat
12105,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12106,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12107,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12108,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12109,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12110,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12111,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12112,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12113,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		krb5-dev \
12114,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		openldap-dev \
12115,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: prove not found
12116,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12117,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12118,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12119,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12120,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12121,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12122,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12123,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12124,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12125,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12126,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12127,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12128,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12129,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12130,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile, # backwards compat
12131,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12132,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12133,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12134,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12135,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		krb5-dev \
12136,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		openldap-dev \
12137,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: prove not found
12138,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12139,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12140,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12141,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12142,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12143,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12144,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12145,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12146,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12147,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12148,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12149,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12150,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12151,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12152,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile, # backwards compat
12153,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12154,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12155,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12156,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12157,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		krb5-dev \
12158,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		openldap-dev \
12159,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: prove not found
12160,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12161,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12162,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12163,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12164,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12165,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12166,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12167,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12168,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12169,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12170,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12171,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
12172,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12173,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12174,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12175,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12176,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile, # backwards compat
12177,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12178,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12179,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12180,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12181,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		krb5-dev \
12182,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		openldap-dev \
12183,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: prove not found
12184,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12185,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12186,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12187,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12188,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12189,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12190,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12191,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12192,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12193,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12194,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12195,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12196,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12197,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12198,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile, # backwards compat
12199,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12200,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12201,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12202,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12203,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		krb5-dev \
12204,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		openldap-dev \
12205,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: prove not found
12206,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12207,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12208,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12209,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12210,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12211,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12212,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12213,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12214,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12215,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12216,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12217,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12218,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12219,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12220,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile, # backwards compat
12221,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# vim:set ft=dockerfile:
12222,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# explicitly set user/group IDs
12223,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# grab gosu for easy step-down from root
12224,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12225,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12226,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12227,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12228,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12229,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12230,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# vim:set ft=dockerfile:
12231,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# explicitly set user/group IDs
12232,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12233,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12234,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# grab gosu for easy step-down from root
12235,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12236,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12237,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12238,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12239,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12240,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# arches officialy built by upstream
12241,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12242,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12243,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12244,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12245,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12246,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12247,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12248,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12249,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12250,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12251,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12252,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12253,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12254,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile, # backwards compat
12255,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# vim:set ft=dockerfile:
12256,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12257,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# grab gosu for easy step-down from root
12258,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12259,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12260,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# vim:set ft=dockerfile:
12261,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# explicitly set user/group IDs
12262,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# grab gosu for easy step-down from root
12263,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12264,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12265,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12266,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12267,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# arches officialy built by upstream
12268,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12269,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12270,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12271,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12272,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12273,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12274,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12275,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12276,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12277,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12278,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12279,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile, # backwards compat
12280,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# vim:set ft=dockerfile:
12281,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# explicitly set user/group IDs
12282,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12283,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12284,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# grab gosu for easy step-down from root
12285,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12286,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12287,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12288,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12289,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12290,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# arches officialy built by upstream
12291,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12292,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12293,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12294,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12295,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12296,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12297,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12298,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12299,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12300,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12301,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12302,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12303,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12304,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile, # backwards compat
12305,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12306,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12307,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12308,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12309,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		krb5-dev \
12310,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		openldap-dev \
12311,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12312,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12313,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12314,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12315,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12316,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12317,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12318,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12319,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# vim:set ft=dockerfile:
12320,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# explicitly set user/group IDs
12321,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# grab gosu for easy step-down from root
12322,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12323,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12324,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12325,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12326,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12327,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12328,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile, # backwards compat
12329,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12330,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12331,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12332,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12333,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		krb5-dev \
12334,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		openldap-dev \
12335,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: prove not found
12336,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12337,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12338,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12339,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12340,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12341,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12342,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12343,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12344,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12345,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12346,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12347,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
12348,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12349,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12350,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12351,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12352,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile, # backwards compat
12353,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12354,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12355,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12356,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12357,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		krb5-dev \
12358,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		openldap-dev \
12359,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12360,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12361,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12362,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12363,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12364,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12365,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12366,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12367,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12368,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12369,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12370,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12371,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		krb5-dev \
12372,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		openldap-dev \
12373,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: prove not found
12374,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12375,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12376,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12377,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12378,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12379,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12380,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12381,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12382,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12383,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12384,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12385,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12386,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12387,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12388,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile, # backwards compat
12389,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# vim:set ft=dockerfile:
12390,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# explicitly set user/group IDs
12391,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# grab gosu for easy step-down from root
12392,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12393,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12394,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# arches officialy built by upstream
12395,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12396,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12397,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12398,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12399,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12400,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12401,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12402,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12403,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12404,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12405,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12406,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile, # backwards compat
12407,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# vim:set ft=dockerfile:
12408,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# explicitly set user/group IDs
12409,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12410,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12411,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# grab gosu for easy step-down from root
12412,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12413,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12414,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12415,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12416,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12417,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# see note below about ""*.pyc"" files"
12418,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# arches officialy built by upstream
12419,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12420,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12421,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12422,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12423,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12424,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12425,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12426,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12427,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12428,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12429,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12430,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12431,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12432,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile, # backwards compat
12433,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# vim:set ft=dockerfile:
12434,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# explicitly set user/group IDs
12435,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# grab gosu for easy step-down from root
12436,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12437,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12438,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12439,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12440,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# vim:set ft=dockerfile:
12441,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# explicitly set user/group IDs
12442,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# grab gosu for easy step-down from root
12443,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12444,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12445,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12446,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12447,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12448,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12449,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile, # backwards compat
12450,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# vim:set ft=dockerfile:
12451,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12452,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# grab gosu for easy step-down from root
12453,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12454,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12455,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12456,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12457,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12458,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12459,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		krb5-dev \
12460,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		openldap-dev \
12461,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: prove not found
12462,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12463,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12464,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12465,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12466,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12467,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12468,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12469,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12470,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12471,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12472,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12473,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12474,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12475,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12476,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile, # backwards compat
12477,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# vim:set ft=dockerfile:
12478,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# explicitly set user/group IDs
12479,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# grab gosu for easy step-down from root
12480,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12481,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12482,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12483,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12484,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12485,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# vim:set ft=dockerfile:
12486,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# explicitly set user/group IDs
12487,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12488,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12489,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# grab gosu for easy step-down from root
12490,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12491,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12492,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12493,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12494,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12495,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12496,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# arches officialy built by upstream
12497,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12498,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12499,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12500,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12501,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12502,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12503,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12504,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12505,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12506,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12507,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12508,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12509,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12510,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile, # backwards compat
12511,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12512,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12513,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12514,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12515,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		krb5-dev \
12516,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		openldap-dev \
12517,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12518,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12519,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12520,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12521,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12522,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
12523,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12524,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12525,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
12526,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12527,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12528,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12529,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		krb5-dev \
12530,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		openldap-dev \
12531,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: prove not found
12532,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12533,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12534,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12535,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12536,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12537,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12538,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12539,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12540,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12541,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#p' --recursive /usr/local \
12542,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12543,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12544,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12545,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12546,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# vim:set ft=dockerfile:
12547,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12548,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# grab gosu for easy step-down from root
12549,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12550,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12551,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# vim:set ft=dockerfile:
12552,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12553,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# grab gosu for easy step-down from root
12554,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12555,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12556,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12557,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12558,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12559,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12560,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		krb5-dev \
12561,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		openldap-dev \
12562,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: prove not found
12563,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12564,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12565,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12566,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12567,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12568,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12569,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12570,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12571,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12572,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12573,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12574,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12575,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12576,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12577,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile, # backwards compat
12578,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# vim:set ft=dockerfile:
12579,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# explicitly set user/group IDs
12580,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# grab gosu for easy step-down from root
12581,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12582,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12583,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# arches officialy built by upstream
12584,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12585,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12586,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12587,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12588,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12589,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12590,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12591,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12592,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12593,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12594,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12595,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile, # backwards compat
12596,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12597,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12598,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12599,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12600,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		krb5-dev \
12601,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		openldap-dev \
12602,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# configure: error: prove not found
12603,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12604,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12605,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12606,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12607,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12608,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12609,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12610,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12611,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12612,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12613,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12614,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12615,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile, # backwards compat
12616,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
12617,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12618,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12619,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12620,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		krb5-dev \
12621,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		openldap-dev \
12622,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: prove not found
12623,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12624,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12625,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12626,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12627,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12628,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12629,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12630,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12631,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12632,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
12633,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12634,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12635,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12636,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12637,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12638,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12639,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12640,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12641,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		krb5-dev \
12642,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		openldap-dev \
12643,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: prove not found
12644,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12645,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12646,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12647,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12648,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12649,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12650,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12651,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12652,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12653,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#p' --recursive /usr/local \
12654,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12655,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12656,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12657,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12658,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile, # backwards compat
12659,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# vim:set ft=dockerfile:
12660,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# explicitly set user/group IDs
12661,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12662,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12663,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
12664,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12665,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12666,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12667,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12668,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12669,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
12670,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# arches officialy built by upstream
12671,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12672,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12673,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12674,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12675,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12676,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12677,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12678,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12679,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12680,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12681,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12682,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12683,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12684,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile, # backwards compat
12685,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# vim:set ft=dockerfile:
12686,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# explicitly set user/group IDs
12687,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# grab gosu for easy step-down from root
12688,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12689,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12690,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# arches officialy built by upstream
12691,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12692,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12693,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12694,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12695,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12696,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12697,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12698,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12699,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12700,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12701,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12702,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile, # backwards compat
12703,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12704,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12705,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12706,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12707,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		krb5-dev \
12708,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		openldap-dev \
12709,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12710,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12711,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12712,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12713,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12714,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12715,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12716,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12717,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12718,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12719,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12720,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12721,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12722,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12723,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		krb5-dev \
12724,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		openldap-dev \
12725,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: prove not found
12726,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12727,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12728,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12729,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12730,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12731,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12732,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12733,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12734,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12735,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12736,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12737,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12738,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12739,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12740,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile, # backwards compat
12741,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12742,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12743,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12744,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12745,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		krb5-dev \
12746,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		openldap-dev \
12747,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: prove not found
12748,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12749,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12750,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12751,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12752,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12753,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12754,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12755,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12756,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12757,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#p' --recursive /usr/local \
12758,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12759,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12760,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12761,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12762,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile, # backwards compat
12763,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
12764,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12765,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12766,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12767,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		krb5-dev \
12768,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		openldap-dev \
12769,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: prove not found
12770,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12771,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12772,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12773,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12774,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12775,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12776,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12777,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12778,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12779,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
12780,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12781,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12782,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12783,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12784,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12785,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12786,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12787,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12788,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		krb5-dev \
12789,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		openldap-dev \
12790,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12791,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12792,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12793,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12794,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12795,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
12796,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12797,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12798,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# vim:set ft=dockerfile:
12799,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# explicitly set user/group IDs
12800,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# grab gosu for easy step-down from root
12801,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12802,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12803,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# vim:set ft=dockerfile:
12804,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# explicitly set user/group IDs
12805,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12806,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12807,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# grab gosu for easy step-down from root
12808,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12809,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12810,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12811,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12812,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12813,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# arches officialy built by upstream
12814,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12815,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12816,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12817,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12818,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12819,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12820,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12821,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12822,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12823,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12824,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12825,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12826,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12827,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile, # backwards compat
12828,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# vim:set ft=dockerfile:
12829,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# explicitly set user/group IDs
12830,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# grab gosu for easy step-down from root
12831,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12832,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12833,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12834,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12835,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12836,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
12837,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12838,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12839,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12840,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		krb5-dev \
12841,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		openldap-dev \
12842,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: prove not found
12843,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12844,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12845,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12846,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12847,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12848,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12849,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12850,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12851,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12852,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
12853,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12854,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12855,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12856,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12857,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12858,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12859,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12860,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12861,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		krb5-dev \
12862,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		openldap-dev \
12863,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# configure: error: prove not found
12864,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12865,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12866,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12867,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12868,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12869,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12870,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12871,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12872,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12873,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12874,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12875,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12876,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12877,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12878,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile, # backwards compat
12879,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# vim:set ft=dockerfile:
12880,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12881,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# grab gosu for easy step-down from root
12882,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12883,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12884,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12885,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12886,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# vim:set ft=dockerfile:
12887,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12888,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# grab gosu for easy step-down from root
12889,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12890,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12891,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# vim:set ft=dockerfile:
12892,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# explicitly set user/group IDs
12893,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12894,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12895,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# grab gosu for easy step-down from root
12896,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12897,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12898,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12899,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12900,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
12901,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# arches officialy built by upstream
12902,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12903,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12904,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12905,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12906,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12907,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12908,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12909,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12910,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12911,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12912,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12913,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12914,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12915,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile, # backwards compat
12916,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12917,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12918,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12919,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12920,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		krb5-dev \
12921,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		openldap-dev \
12922,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# configure: error: prove not found
12923,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12924,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12925,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12926,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12927,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12928,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12929,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12930,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12931,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12932,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12933,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12934,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12935,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile, # backwards compat
12936,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12937,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12938,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12939,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12940,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12941,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12942,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		krb5-dev \
12943,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		openldap-dev \
12944,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: prove not found
12945,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12946,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12947,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12948,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12949,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12950,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12951,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12952,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12953,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12954,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12955,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12956,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12957,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12958,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12959,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile, # backwards compat
12960,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12961,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12962,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12963,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12964,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		krb5-dev \
12965,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		openldap-dev \
12966,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: prove not found
12967,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12968,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12969,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12970,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12971,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12972,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12973,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12974,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12975,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12976,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12977,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12978,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12979,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12980,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12981,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile, # backwards compat
12982,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12983,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12984,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12985,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12986,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		krb5-dev \
12987,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		openldap-dev \
12988,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12989,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12990,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12991,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12992,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12993,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12994,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12995,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12996,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12997,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12998,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12999,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13000,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13001,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13002,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13003,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		krb5-dev \
13004,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		openldap-dev \
13005,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: prove not found
13006,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13007,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13008,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13009,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13010,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13011,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13012,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13013,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13014,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13015,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13016,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13017,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13018,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13019,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13020,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile, # backwards compat
13021,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13022,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13023,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13024,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13025,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		krb5-dev \
13026,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		openldap-dev \
13027,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: prove not found
13028,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13029,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13030,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13031,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13032,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13033,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13034,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13035,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13036,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13037,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13038,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13039,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13040,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13041,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13042,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile, # backwards compat
13043,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# vim:set ft=dockerfile:
13044,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13045,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# grab gosu for easy step-down from root
13046,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13047,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13048,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# vim:set ft=dockerfile:
13049,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# explicitly set user/group IDs
13050,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13051,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13052,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# grab gosu for easy step-down from root
13053,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13054,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13055,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13056,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13057,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# see note below about ""*.pyc"" files"
13058,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# arches officialy built by upstream
13059,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13060,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13061,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13062,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13063,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13064,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13065,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13066,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13067,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13068,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13069,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13070,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13071,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13072,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile, # backwards compat
13073,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# vim:set ft=dockerfile:
13074,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# explicitly set user/group IDs
13075,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13076,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13077,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# grab gosu for easy step-down from root
13078,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13079,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13080,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13081,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13082,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13083,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# arches officialy built by upstream
13084,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13085,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13086,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13087,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13088,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13089,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13090,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13091,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13092,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13093,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13094,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13095,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13096,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13097,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile, # backwards compat
13098,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
13099,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13100,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13101,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13102,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		krb5-dev \
13103,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		openldap-dev \
13104,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: prove not found
13105,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13106,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13107,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13108,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13109,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13110,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13111,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13112,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13113,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13114,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
13115,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13116,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13117,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13118,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13119,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile, # backwards compat
13120,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13121,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13122,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13123,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13124,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		krb5-dev \
13125,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		openldap-dev \
13126,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13127,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13128,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13129,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13130,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13131,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13132,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13133,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13134,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13135,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13136,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13137,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13138,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile, # backwards compat
13139,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# vim:set ft=dockerfile:
13140,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13141,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# grab gosu for easy step-down from root
13142,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13143,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13144,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13145,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13146,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13147,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13148,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		krb5-dev \
13149,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		openldap-dev \
13150,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13151,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13152,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13153,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13154,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13155,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13156,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13157,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13158,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13159,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13160,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13161,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13162,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13163,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13164,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile, # backwards compat
13165,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# vim:set ft=dockerfile:
13166,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13167,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# grab gosu for easy step-down from root
13168,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13169,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13170,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# vim:set ft=dockerfile:
13171,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# explicitly set user/group IDs
13172,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# grab gosu for easy step-down from root
13173,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13174,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13175,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# vim:set ft=dockerfile:
13176,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# explicitly set user/group IDs
13177,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13178,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13179,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# grab gosu for easy step-down from root
13180,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13181,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13182,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13183,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13184,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13185,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# arches officialy built by upstream
13186,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13187,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13188,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13189,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13190,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13191,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13192,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13193,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13194,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13195,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13196,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13197,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13198,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13199,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile, # backwards compat
13200,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# vim:set ft=dockerfile:
13201,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# explicitly set user/group IDs
13202,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# grab gosu for easy step-down from root
13203,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13204,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13205,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13206,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13207,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# arches officialy built by upstream
13208,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13209,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13210,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13211,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13212,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13213,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13214,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13215,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13216,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13217,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13218,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13219,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile, # backwards compat
13220,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
13221,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13222,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13223,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13224,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		krb5-dev \
13225,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		openldap-dev \
13226,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: prove not found
13227,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13228,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13229,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13230,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
13231,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13232,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13233,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13234,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13235,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13236,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
13237,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13238,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13239,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13240,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13241,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile, # backwards compat
13242,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13243,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13244,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13245,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13246,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		krb5-dev \
13247,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		openldap-dev \
13248,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: prove not found
13249,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13250,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13251,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13252,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13253,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13254,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13255,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13256,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13257,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13258,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13259,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13260,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13261,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13262,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13263,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile, # backwards compat
13264,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# vim:set ft=dockerfile:
13265,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13266,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# grab gosu for easy step-down from root
13267,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13268,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13269,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# vim:set ft=dockerfile:
13270,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# explicitly set user/group IDs
13271,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# grab gosu for easy step-down from root
13272,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13273,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13274,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13275,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13276,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# arches officialy built by upstream
13277,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13278,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13279,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13280,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13281,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13282,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13283,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13284,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13285,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13286,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13287,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13288,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile, # backwards compat
13289,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# vim:set ft=dockerfile:
13290,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13291,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# grab gosu for easy step-down from root
13292,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13293,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13294,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13295,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13296,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13297,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13298,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		krb5-dev \
13299,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		openldap-dev \
13300,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13301,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13302,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13303,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13304,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13305,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13306,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13307,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13308,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13309,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13310,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13311,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13312,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile, # backwards compat
13313,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13314,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13315,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13316,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13317,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		krb5-dev \
13318,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		openldap-dev \
13319,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13320,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13321,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13322,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13323,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13324,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13325,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13326,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13327,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13328,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13329,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13330,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13331,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13332,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13333,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile, # backwards compat
13334,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# vim:set ft=dockerfile:
13335,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# explicitly set user/group IDs
13336,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# grab gosu for easy step-down from root
13337,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13338,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13339,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13340,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# arches officialy built by upstream
13341,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13342,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13343,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13344,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13345,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13346,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13347,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13348,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13349,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13350,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13351,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13352,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile, # backwards compat
13353,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,# vim:set ft=dockerfile:
13354,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13355,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13356,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# vim:set ft=dockerfile:
13357,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# explicitly set user/group IDs
13358,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13359,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13360,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# grab gosu for easy step-down from root
13361,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13362,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13363,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13364,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13365,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# see note below about ""*.pyc"" files"
13366,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# arches officialy built by upstream
13367,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13368,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13369,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13370,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13371,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13372,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13373,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13374,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13375,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13376,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13377,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13378,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13379,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13380,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile, # backwards compat
13381,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# vim:set ft=dockerfile:
13382,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# explicitly set user/group IDs
13383,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# grab gosu for easy step-down from root
13384,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13385,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13386,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,# vim:set ft=dockerfile:
13387,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13388,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13389,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# vim:set ft=dockerfile:
13390,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# explicitly set user/group IDs
13391,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# grab gosu for easy step-down from root
13392,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13393,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13394,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13395,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13396,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13397,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13398,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		krb5-dev \
13399,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		openldap-dev \
13400,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13401,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13402,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13403,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13404,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13405,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13406,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13407,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13408,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13409,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13410,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13411,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile, # backwards compat
13412,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# vim:set ft=dockerfile:
13413,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# explicitly set user/group IDs
13414,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# grab gosu for easy step-down from root
13415,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13416,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13417,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13418,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13419,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13420,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13421,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile, # backwards compat
13422,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# vim:set ft=dockerfile:
13423,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# explicitly set user/group IDs
13424,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# grab gosu for easy step-down from root
13425,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13426,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13427,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13428,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13429,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13430,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13431,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile, # backwards compat
13432,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13433,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13434,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13435,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13436,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		krb5-dev \
13437,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		openldap-dev \
13438,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13439,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13440,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13441,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13442,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13443,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13444,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13445,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13446,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13447,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13448,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13449,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile, # backwards compat
13450,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# vim:set ft=dockerfile:
13451,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# explicitly set user/group IDs
13452,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13453,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13454,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# grab gosu for easy step-down from root
13455,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13456,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13457,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13458,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13459,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
13460,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# arches officialy built by upstream
13461,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13462,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13463,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13464,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13465,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13466,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13467,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13468,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13469,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13470,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13471,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13472,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13473,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13474,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile, # backwards compat
13475,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# vim:set ft=dockerfile:
13476,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# explicitly set user/group IDs
13477,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# grab gosu for easy step-down from root
13478,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13479,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13480,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13481,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13482,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13483,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13484,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile, # backwards compat
13485,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# vim:set ft=dockerfile:
13486,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# explicitly set user/group IDs
13487,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# grab gosu for easy step-down from root
13488,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13489,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13490,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13491,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13492,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13493,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13494,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile, # backwards compat
13495,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13496,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13497,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13498,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13499,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		krb5-dev \
13500,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		openldap-dev \
13501,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: prove not found
13502,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13503,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13504,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13505,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13506,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13507,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13508,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13509,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13510,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13511,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13512,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13513,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13514,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13515,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile, # backwards compat
13516,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# vim:set ft=dockerfile:
13517,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13518,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# grab gosu for easy step-down from root
13519,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13520,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13521,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# vim:set ft=dockerfile:
13522,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# explicitly set user/group IDs
13523,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# grab gosu for easy step-down from root
13524,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13525,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13526,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13527,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13528,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13529,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13530,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile, # backwards compat
13531,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# vim:set ft=dockerfile:
13532,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# explicitly set user/group IDs
13533,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# grab gosu for easy step-down from root
13534,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13535,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13536,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13537,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13538,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13539,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13540,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile, # backwards compat
13541,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# vim:set ft=dockerfile:
13542,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# explicitly set user/group IDs
13543,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# grab gosu for easy step-down from root
13544,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13545,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13546,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# arches officialy built by upstream
13547,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13548,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13549,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13550,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13551,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13552,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13553,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13554,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13555,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13556,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13557,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13558,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile, # backwards compat
13559,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13560,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13561,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13562,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13563,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		krb5-dev \
13564,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		openldap-dev \
13565,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: prove not found
13566,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13567,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13568,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13569,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13570,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13571,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13572,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13573,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13574,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13575,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13576,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13577,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13578,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13579,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13580,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13581,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile, # backwards compat
13582,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# vim:set ft=dockerfile:
13583,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# explicitly set user/group IDs
13584,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# grab gosu for easy step-down from root
13585,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13586,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13587,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# arches officialy built by upstream
13588,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13589,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13590,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13591,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13592,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13593,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13594,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13595,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13596,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13597,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13598,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13599,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile, # backwards compat
13600,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# vim:set ft=dockerfile:
13601,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# explicitly set user/group IDs
13602,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13603,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13604,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# grab gosu for easy step-down from root
13605,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13606,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13607,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13608,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13609,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
13610,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# arches officialy built by upstream
13611,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13612,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13613,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13614,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13615,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13616,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13617,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13618,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13619,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13620,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13621,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13622,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13623,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13624,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile, # backwards compat
13625,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# vim:set ft=dockerfile:
13626,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# explicitly set user/group IDs
13627,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13628,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13629,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
13630,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13631,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13632,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13633,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13634,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13635,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13636,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# arches officialy built by upstream
13637,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13638,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13639,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13640,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13641,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13642,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13643,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13644,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13645,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13646,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13647,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13648,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13649,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13650,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile, # backwards compat
13651,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# vim:set ft=dockerfile:
13652,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13653,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# grab gosu for easy step-down from root
13654,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13655,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13656,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13657,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13658,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13659,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13660,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		krb5-dev \
13661,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		openldap-dev \
13662,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13663,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13664,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13665,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13666,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13667,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13668,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13669,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13670,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13671,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13672,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13673,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13674,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile, # backwards compat
13675,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13676,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13677,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# vim:set ft=dockerfile:
13678,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# explicitly set user/group IDs
13679,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# grab gosu for easy step-down from root
13680,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13681,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13682,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13683,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13684,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13685,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13686,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile, # backwards compat
13687,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# vim:set ft=dockerfile:
13688,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13689,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# grab gosu for easy step-down from root
13690,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13691,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13692,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
13693,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13694,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13695,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13696,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		krb5-dev \
13697,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		openldap-dev \
13698,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: prove not found
13699,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13700,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13701,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13702,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13703,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13704,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13705,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13706,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13707,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13708,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#p' --recursive /usr/local \
13709,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13710,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13711,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13712,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13713,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13714,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13715,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13716,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13717,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		krb5-dev \
13718,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		openldap-dev \
13719,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: prove not found
13720,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13721,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13722,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13723,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13724,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13725,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13726,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13727,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13728,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13729,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13730,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13731,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13732,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13733,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13734,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile, # backwards compat
13735,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# vim:set ft=dockerfile:
13736,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# explicitly set user/group IDs
13737,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13738,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13739,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# grab gosu for easy step-down from root
13740,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13741,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13742,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13743,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13744,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# see note below about ""*.pyc"" files"
13745,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# arches officialy built by upstream
13746,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13747,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13748,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13749,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13750,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13751,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13752,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13753,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13754,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13755,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13756,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13757,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13758,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13759,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile, # backwards compat
13760,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# vim:set ft=dockerfile:
13761,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# explicitly set user/group IDs
13762,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13763,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13764,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# grab gosu for easy step-down from root
13765,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13766,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13767,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13768,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13769,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13770,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13771,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# arches officialy built by upstream
13772,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13773,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13774,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13775,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13776,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13777,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13778,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13779,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13780,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13781,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13782,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13783,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13784,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13785,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile, # backwards compat
13786,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# vim:set ft=dockerfile:
13787,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13788,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# grab gosu for easy step-down from root
13789,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13790,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13791,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# vim:set ft=dockerfile:
13792,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# explicitly set user/group IDs
13793,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# grab gosu for easy step-down from root
13794,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13795,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13796,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13797,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13798,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13799,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13800,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# vim:set ft=dockerfile:
13801,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# explicitly set user/group IDs
13802,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# grab gosu for easy step-down from root
13803,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13804,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13805,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13806,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13807,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13808,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13809,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile, # backwards compat
13810,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13811,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13812,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13813,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13814,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		krb5-dev \
13815,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		openldap-dev \
13816,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: prove not found
13817,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13818,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13819,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13820,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13821,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13822,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13823,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13824,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13825,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13826,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13827,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13828,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
13829,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13830,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13831,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13832,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13833,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile, # backwards compat
13834,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# vim:set ft=dockerfile:
13835,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# explicitly set user/group IDs
13836,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13837,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13838,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# grab gosu for easy step-down from root
13839,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13840,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13841,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13842,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13843,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13844,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# arches officialy built by upstream
13845,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13846,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13847,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13848,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13849,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13850,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13851,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13852,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13853,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13854,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13855,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13856,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13857,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13858,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile, # backwards compat
13859,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# vim:set ft=dockerfile:
13860,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13861,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# grab gosu for easy step-down from root
13862,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13863,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13864,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13865,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13866,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13867,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13868,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		krb5-dev \
13869,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		openldap-dev \
13870,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13871,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13872,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13873,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13874,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13875,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13876,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13877,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13878,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13879,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13880,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13881,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile, # backwards compat
13882,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13883,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13884,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13885,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13886,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		krb5-dev \
13887,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		openldap-dev \
13888,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13889,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13890,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13891,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13892,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13893,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13894,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13895,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13896,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13897,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13898,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13899,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13900,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile, # backwards compat
13901,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# vim:set ft=dockerfile:
13902,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# explicitly set user/group IDs
13903,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13904,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13905,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# grab gosu for easy step-down from root
13906,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13907,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13908,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13909,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13910,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13911,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# arches officialy built by upstream
13912,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13913,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13914,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13915,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13916,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13917,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13918,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13919,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13920,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13921,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13922,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13923,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13924,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13925,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile, # backwards compat
13926,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# vim:set ft=dockerfile:
13927,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# explicitly set user/group IDs
13928,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13929,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13930,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# grab gosu for easy step-down from root
13931,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13932,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13933,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13934,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13935,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
13936,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# arches officialy built by upstream
13937,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13938,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13939,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13940,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13941,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13942,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13943,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13944,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13945,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13946,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13947,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13948,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13949,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13950,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile, # backwards compat
13951,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# vim:set ft=dockerfile:
13952,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# explicitly set user/group IDs
13953,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# grab gosu for easy step-down from root
13954,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13955,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13956,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13957,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13958,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# vim:set ft=dockerfile:
13959,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13960,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# grab gosu for easy step-down from root
13961,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13962,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13963,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13964,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13965,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13966,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13967,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		krb5-dev \
13968,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		openldap-dev \
13969,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: prove not found
13970,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13971,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13972,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13973,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13974,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13975,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13976,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13977,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13978,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13979,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13980,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13981,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13982,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13983,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13984,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile, # backwards compat
13985,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13986,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13987,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13988,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13989,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		krb5-dev \
13990,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		openldap-dev \
13991,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: prove not found
13992,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13993,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13994,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13995,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13996,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13997,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13998,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13999,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14000,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14001,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14002,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14003,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14004,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14005,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14006,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile, # backwards compat
14007,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# vim:set ft=dockerfile:
14008,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# explicitly set user/group IDs
14009,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14010,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14011,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# grab gosu for easy step-down from root
14012,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14013,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14014,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14015,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14016,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14017,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# arches officialy built by upstream
14018,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14019,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14020,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14021,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14022,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14023,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14024,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14025,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14026,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14027,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14028,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14029,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14030,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14031,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile, # backwards compat
14032,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14033,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14034,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14035,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14036,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		krb5-dev \
14037,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		openldap-dev \
14038,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14039,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14040,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14041,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14042,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14043,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14044,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14045,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14046,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14047,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14048,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14049,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile, # backwards compat
14050,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# vim:set ft=dockerfile:
14051,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14052,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# grab gosu for easy step-down from root
14053,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14054,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14055,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# vim:set ft=dockerfile:
14056,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# explicitly set user/group IDs
14057,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# grab gosu for easy step-down from root
14058,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14059,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14060,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14061,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# arches officialy built by upstream
14062,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14063,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14064,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14065,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14066,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14067,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14068,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14069,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14070,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14071,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14072,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14073,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile, # backwards compat
14074,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# vim:set ft=dockerfile:
14075,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14076,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# grab gosu for easy step-down from root
14077,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14078,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14079,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# vim:set ft=dockerfile:
14080,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# explicitly set user/group IDs
14081,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14082,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14083,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# grab gosu for easy step-down from root
14084,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14085,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14086,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14087,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14088,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14089,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14090,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# arches officialy built by upstream
14091,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14092,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14093,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14094,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14095,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14096,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14097,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14098,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14099,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14100,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14101,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14102,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14103,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14104,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile, # backwards compat
14105,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# vim:set ft=dockerfile:
14106,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# explicitly set user/group IDs
14107,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# grab gosu for easy step-down from root
14108,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14109,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14110,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# arches officialy built by upstream
14111,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14112,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14113,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14114,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14115,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14116,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14117,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14118,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14119,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14120,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14121,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14122,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile, # backwards compat
14123,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# vim:set ft=dockerfile:
14124,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14125,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# grab gosu for easy step-down from root
14126,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14127,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14128,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14129,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14130,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14131,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14132,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		krb5-dev \
14133,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		openldap-dev \
14134,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14135,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14136,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14137,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14138,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14139,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14140,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14141,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14142,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14143,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14144,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14145,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14146,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile, # backwards compat
14147,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# vim:set ft=dockerfile:
14148,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# explicitly set user/group IDs
14149,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14150,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14151,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# grab gosu for easy step-down from root
14152,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14153,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14154,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14155,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14156,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14157,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# arches officialy built by upstream
14158,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14159,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14160,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14161,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14162,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14163,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14164,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14165,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14166,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14167,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14168,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14169,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14170,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14171,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile, # backwards compat
14172,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# vim:set ft=dockerfile:
14173,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# explicitly set user/group IDs
14174,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14175,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14176,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# grab gosu for easy step-down from root
14177,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14178,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14179,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14180,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14181,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# arches officialy built by upstream
14182,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14183,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14184,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14185,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14186,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14187,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14188,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14189,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14190,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14191,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14192,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14193,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile, # backwards compat
14194,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14195,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14196,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14197,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14198,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		krb5-dev \
14199,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		openldap-dev \
14200,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: prove not found
14201,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14202,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14203,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14204,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14205,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14206,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14207,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14208,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14209,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14210,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14211,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14212,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14213,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14214,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14215,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# vim:set ft=dockerfile:
14216,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14217,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# grab gosu for easy step-down from root
14218,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14219,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14220,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# vim:set ft=dockerfile:
14221,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# explicitly set user/group IDs
14222,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# grab gosu for easy step-down from root
14223,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14224,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14225,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14226,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14227,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# arches officialy built by upstream
14228,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14229,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14230,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14231,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14232,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14233,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14234,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14235,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14236,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14237,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14238,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14239,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile, # backwards compat
14240,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
14241,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# explicitly set user/group IDs
14242,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
14243,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14244,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14245,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14246,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14247,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
14248,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# explicitly set user/group IDs
14249,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
14250,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14251,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14252,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14253,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14254,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14255,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# vim:set ft=dockerfile:
14256,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14257,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# grab gosu for easy step-down from root
14258,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14259,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14260,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14261,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14262,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14263,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14264,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		krb5-dev \
14265,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		openldap-dev \
14266,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: prove not found
14267,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14268,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14269,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14270,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14271,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14272,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14273,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14274,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14275,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14276,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14277,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14278,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14279,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14280,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14281,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile, # backwards compat
14282,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14283,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
14284,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14285,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14286,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		krb5-dev \
14287,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		openldap-dev \
14288,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: prove not found
14289,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14290,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14291,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14292,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
14293,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14294,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14295,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14296,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14297,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14298,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14299,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14300,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14301,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14302,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14303,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14304,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14305,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14306,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14307,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		krb5-dev \
14308,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		openldap-dev \
14309,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14310,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14311,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14312,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14313,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14314,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14315,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14316,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14317,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14318,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14319,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14320,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14321,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14322,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14323,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile, # backwards compat
14324,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
14325,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14326,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14327,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14328,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		krb5-dev \
14329,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		openldap-dev \
14330,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14331,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14332,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14333,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14334,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14335,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
14336,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14337,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14338,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14339,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14340,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14341,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14342,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		krb5-dev \
14343,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		openldap-dev \
14344,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: prove not found
14345,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14346,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14347,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14348,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14349,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14350,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14351,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14352,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14353,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14354,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14355,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14356,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14357,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14358,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14359,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile, # backwards compat
14360,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# vim:set ft=dockerfile:
14361,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# explicitly set user/group IDs
14362,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# grab gosu for easy step-down from root
14363,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14364,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14365,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# arches officialy built by upstream
14366,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14367,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14368,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14369,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14370,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14371,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14372,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14373,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14374,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14375,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14376,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14377,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile, # backwards compat
14378,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14379,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14380,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14381,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14382,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		krb5-dev \
14383,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		openldap-dev \
14384,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: prove not found
14385,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14386,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14387,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14388,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14389,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14390,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14391,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14392,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14393,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14394,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14395,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14396,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14397,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14398,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14399,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile, # backwards compat
14400,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# vim:set ft=dockerfile:
14401,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# explicitly set user/group IDs
14402,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# grab gosu for easy step-down from root
14403,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14404,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14405,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14406,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14407,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14408,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14409,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile, # backwards compat
14410,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# vim:set ft=dockerfile:
14411,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# explicitly set user/group IDs
14412,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14413,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14414,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# grab gosu for easy step-down from root
14415,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14416,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14417,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14418,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14419,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
14420,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# arches officialy built by upstream
14421,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14422,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14423,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14424,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14425,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14426,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14427,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14428,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14429,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14430,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14431,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14432,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14433,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14434,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile, # backwards compat
14435,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14436,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14437,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14438,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14439,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		krb5-dev \
14440,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		openldap-dev \
14441,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: prove not found
14442,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14443,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14444,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14445,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14446,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14447,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14448,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14449,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14450,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14451,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14452,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14453,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14454,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14455,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14456,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile, # backwards compat
14457,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# vim:set ft=dockerfile:
14458,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# explicitly set user/group IDs
14459,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14460,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14461,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
14462,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14463,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14464,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14465,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14466,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14467,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# see note below about ""*.pyc"" files"
14468,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# arches officialy built by upstream
14469,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14470,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14471,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14472,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
14473,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14474,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14475,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14476,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14477,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14478,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14479,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14480,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14481,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14482,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14483,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile, # backwards compat
14484,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14485,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14486,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14487,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14488,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		krb5-dev \
14489,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		openldap-dev \
14490,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: prove not found
14491,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14492,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14493,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14494,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14495,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14496,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14497,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14498,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14499,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14500,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14501,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14502,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14503,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14504,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14505,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile, # backwards compat
14506,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14507,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14508,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14509,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14510,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		krb5-dev \
14511,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		openldap-dev \
14512,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: prove not found
14513,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14514,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14515,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14516,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14517,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14518,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14519,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14520,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14521,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14522,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14523,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14524,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14525,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14526,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14527,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14528,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14529,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14530,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14531,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		krb5-dev \
14532,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		openldap-dev \
14533,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: prove not found
14534,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14535,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14536,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14537,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14538,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14539,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14540,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14541,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14542,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14543,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14544,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14545,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14546,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14547,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14548,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile, # backwards compat
14549,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# vim:set ft=dockerfile:
14550,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# explicitly set user/group IDs
14551,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# grab gosu for easy step-down from root
14552,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14553,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14554,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14555,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14556,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# vim:set ft=dockerfile:
14557,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# explicitly set user/group IDs
14558,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# grab gosu for easy step-down from root
14559,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14560,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14561,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# vim:set ft=dockerfile:
14562,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# explicitly set user/group IDs
14563,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# grab gosu for easy step-down from root
14564,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14565,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14566,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14567,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14568,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14569,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14570,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile, # backwards compat
14571,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# vim:set ft=dockerfile:
14572,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14573,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# grab gosu for easy step-down from root
14574,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14575,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14576,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# vim:set ft=dockerfile:
14577,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14578,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# grab gosu for easy step-down from root
14579,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14580,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14581,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# vim:set ft=dockerfile:
14582,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# explicitly set user/group IDs
14583,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14584,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14585,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# grab gosu for easy step-down from root
14586,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14587,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14588,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14589,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14590,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14591,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14592,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# arches officialy built by upstream
14593,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14594,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14595,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14596,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14597,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14598,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14599,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14600,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14601,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14602,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14603,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14604,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14605,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14606,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile, # backwards compat
14607,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# vim:set ft=dockerfile:
14608,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14609,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# grab gosu for easy step-down from root
14610,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14611,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14612,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# vim:set ft=dockerfile:
14613,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14614,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# grab gosu for easy step-down from root
14615,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14616,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14617,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14618,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14619,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14620,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14621,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		krb5-dev \
14622,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		openldap-dev \
14623,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: prove not found
14624,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14625,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14626,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14627,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14628,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14629,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14630,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14631,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14632,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14633,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14634,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14635,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14636,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14637,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile, # backwards compat
14638,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# vim:set ft=dockerfile:
14639,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14640,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# grab gosu for easy step-down from root
14641,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14642,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14643,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14644,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14645,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14646,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14647,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		krb5-dev \
14648,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		openldap-dev \
14649,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14650,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14651,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14652,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14653,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14654,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14655,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14656,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14657,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14658,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14659,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
14660,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
14661,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14662,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14663,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		krb5-dev \
14664,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		openldap-dev \
14665,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: prove not found
14666,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14667,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14668,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14669,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14670,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14671,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14672,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14673,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14674,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14675,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#p' --recursive /usr/local \
14676,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14677,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14678,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14679,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14680,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile, # backwards compat
14681,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# vim:set ft=dockerfile:
14682,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# explicitly set user/group IDs
14683,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# grab gosu for easy step-down from root
14684,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14685,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14686,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14687,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14688,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# vim:set ft=dockerfile:
14689,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# explicitly set user/group IDs
14690,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# grab gosu for easy step-down from root
14691,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14692,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14693,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14694,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14695,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
14696,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14697,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14698,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14699,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		krb5-dev \
14700,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		openldap-dev \
14701,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: prove not found
14702,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14703,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14704,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14705,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14706,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14707,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14708,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14709,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14710,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14711,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
14712,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14713,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14714,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14715,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14716,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile, # backwards compat
14717,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# vim:set ft=dockerfile:
14718,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14719,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# grab gosu for easy step-down from root
14720,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14721,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14722,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# vim:set ft=dockerfile:
14723,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# explicitly set user/group IDs
14724,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14725,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14726,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# grab gosu for easy step-down from root
14727,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14728,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14729,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14730,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14731,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
14732,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# arches officialy built by upstream
14733,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14734,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14735,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14736,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14737,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14738,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14739,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14740,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14741,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14742,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14743,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14744,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14745,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14746,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile, # backwards compat
14747,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# vim:set ft=dockerfile:
14748,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# explicitly set user/group IDs
14749,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# grab gosu for easy step-down from root
14750,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14751,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14752,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14753,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14754,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# arches officialy built by upstream
14755,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14756,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14757,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14758,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14759,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14760,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14761,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14762,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14763,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14764,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14765,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14766,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile, # backwards compat
14767,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14768,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14769,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14770,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14771,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		krb5-dev \
14772,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		openldap-dev \
14773,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: prove not found
14774,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14775,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14776,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14777,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14778,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14779,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14780,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14781,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14782,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14783,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14784,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14785,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14786,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14787,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14788,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile, # backwards compat
14789,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# vim:set ft=dockerfile:
14790,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# explicitly set user/group IDs
14791,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# grab gosu for easy step-down from root
14792,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14793,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14794,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# arches officialy built by upstream
14795,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14796,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14797,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14798,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14799,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14800,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14801,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14802,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14803,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14804,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14805,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14806,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile, # backwards compat
14807,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14808,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14809,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14810,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14811,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		krb5-dev \
14812,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		openldap-dev \
14813,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: prove not found
14814,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14815,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14816,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14817,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14818,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14819,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14820,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14821,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14822,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14823,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14824,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14825,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14826,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14827,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14828,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile, # backwards compat
14829,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# vim:set ft=dockerfile:
14830,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14831,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# grab gosu for easy step-down from root
14832,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14833,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14834,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# vim:set ft=dockerfile:
14835,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# explicitly set user/group IDs
14836,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14837,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14838,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# grab gosu for easy step-down from root
14839,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14840,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14841,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14842,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14843,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
14844,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# arches officialy built by upstream
14845,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14846,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14847,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14848,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14849,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14850,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14851,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14852,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14853,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14854,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14855,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14856,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14857,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14858,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile, # backwards compat
14859,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
14860,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14861,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14862,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14863,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		krb5-dev \
14864,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		openldap-dev \
14865,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: prove not found
14866,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14867,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14868,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14869,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14870,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14871,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14872,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14873,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14874,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14875,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
14876,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14877,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14878,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14879,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14880,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile, # backwards compat
14881,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# vim:set ft=dockerfile:
14882,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# explicitly set user/group IDs
14883,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# grab gosu for easy step-down from root
14884,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14885,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14886,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14887,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14888,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14889,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# vim:set ft=dockerfile:
14890,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# explicitly set user/group IDs
14891,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14892,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14893,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# grab gosu for easy step-down from root
14894,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14895,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14896,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14897,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14898,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14899,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# arches officialy built by upstream
14900,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14901,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14902,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14903,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14904,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14905,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14906,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14907,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14908,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14909,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14910,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14911,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14912,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14913,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile, # backwards compat
14914,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
14915,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# explicitly set user/group IDs
14916,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
14917,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14918,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14919,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14920,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14921,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14922,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14923,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile, # backwards compat
14924,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
14925,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14926,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14927,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14928,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		krb5-dev \
14929,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		openldap-dev \
14930,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: prove not found
14931,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14932,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14933,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14934,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14935,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14936,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14937,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14938,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14939,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14940,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#p' --recursive /usr/local \
14941,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14942,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14943,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14944,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14945,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile, # backwards compat
14946,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# vim:set ft=dockerfile:
14947,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# explicitly set user/group IDs
14948,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14949,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14950,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# grab gosu for easy step-down from root
14951,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14952,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14953,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14954,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14955,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14956,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# arches officialy built by upstream
14957,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14958,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14959,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14960,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14961,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14962,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14963,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14964,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14965,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14966,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14967,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14968,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14969,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14970,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile, # backwards compat
14971,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# vim:set ft=dockerfile:
14972,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14973,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# grab gosu for easy step-down from root
14974,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14975,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14976,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14977,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14978,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14979,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14980,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		krb5-dev \
14981,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		openldap-dev \
14982,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: prove not found
14983,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14984,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14985,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14986,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14987,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14988,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14989,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14990,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14991,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14992,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14993,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14994,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14995,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14996,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14997,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile, # backwards compat
14998,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# vim:set ft=dockerfile:
14999,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# explicitly set user/group IDs
15000,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# grab gosu for easy step-down from root
15001,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15002,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15003,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# arches officialy built by upstream
15004,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15005,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15006,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15007,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15008,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15009,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15010,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15011,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15012,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15013,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15014,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15015,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile, # backwards compat
15016,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# vim:set ft=dockerfile:
15017,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# explicitly set user/group IDs
15018,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15019,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15020,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# grab gosu for easy step-down from root
15021,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15022,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15023,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15024,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15025,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# see note below about ""*.pyc"" files"
15026,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# arches officialy built by upstream
15027,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15028,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15029,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15030,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15031,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15032,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15033,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15034,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15035,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15036,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15037,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15038,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15039,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15040,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile, # backwards compat
15041,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15042,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15043,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15044,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15045,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		krb5-dev \
15046,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		openldap-dev \
15047,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: prove not found
15048,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15049,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15050,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15051,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15052,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15053,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15054,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15055,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15056,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15057,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15058,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15059,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15060,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15061,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15062,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15063,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile, # backwards compat
15064,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# vim:set ft=dockerfile:
15065,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# explicitly set user/group IDs
15066,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15067,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15068,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# grab gosu for easy step-down from root
15069,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15070,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15071,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15072,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15073,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
15074,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# arches officialy built by upstream
15075,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15076,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15077,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15078,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15079,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15080,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15081,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15082,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15083,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15084,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15085,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15086,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15087,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15088,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile, # backwards compat
15089,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15090,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15091,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15092,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15093,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		krb5-dev \
15094,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		openldap-dev \
15095,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: prove not found
15096,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15097,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15098,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15099,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15100,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15101,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15102,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15103,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15104,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15105,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
15106,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15107,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15108,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15109,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15110,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile, # backwards compat
15111,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# vim:set ft=dockerfile:
15112,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# explicitly set user/group IDs
15113,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# grab gosu for easy step-down from root
15114,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15115,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15116,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# vim:set ft=dockerfile:
15117,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# explicitly set user/group IDs
15118,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15119,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15120,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# grab gosu for easy step-down from root
15121,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15122,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15123,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15124,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15125,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15126,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# arches officialy built by upstream
15127,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15128,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15129,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15130,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15131,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15132,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15133,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15134,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15135,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15136,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15137,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15138,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15139,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15140,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile, # backwards compat
15141,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15142,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
15143,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15144,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15145,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		krb5-dev \
15146,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		openldap-dev \
15147,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: prove not found
15148,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15149,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15150,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15151,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
15152,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15153,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15154,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15155,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15156,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15157,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15158,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15159,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15160,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15161,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15162,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile, # backwards compat
15163,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15164,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15165,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15166,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15167,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		krb5-dev \
15168,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		openldap-dev \
15169,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: prove not found
15170,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15171,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15172,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15173,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15174,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15175,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15176,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15177,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15178,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15179,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15180,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15181,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15182,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15183,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15184,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile, # backwards compat
15185,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15186,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15187,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15188,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15189,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		krb5-dev \
15190,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		openldap-dev \
15191,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15192,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15193,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15194,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15195,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15196,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15197,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15198,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15199,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# vim:set ft=dockerfile:
15200,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# explicitly set user/group IDs
15201,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# grab gosu for easy step-down from root
15202,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15203,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15204,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15205,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15206,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15207,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15208,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile, # backwards compat
15209,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15210,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15211,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15212,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15213,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		krb5-dev \
15214,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		openldap-dev \
15215,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15216,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15217,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15218,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15219,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15220,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15221,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15222,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15223,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15224,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15225,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15226,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15227,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile, # backwards compat
15228,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# vim:set ft=dockerfile:
15229,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# explicitly set user/group IDs
15230,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15231,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15232,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# grab gosu for easy step-down from root
15233,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15234,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15235,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15236,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15237,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
15238,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# arches officialy built by upstream
15239,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15240,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15241,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15242,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15243,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15244,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15245,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15246,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15247,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15248,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15249,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15250,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15251,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15252,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile, # backwards compat
15253,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# vim:set ft=dockerfile:
15254,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# explicitly set user/group IDs
15255,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# grab gosu for easy step-down from root
15256,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15257,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15258,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15259,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15260,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15261,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15262,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		krb5-dev \
15263,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		openldap-dev \
15264,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15265,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15266,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15267,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15268,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15269,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15270,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15271,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15272,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15273,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15274,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15275,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile, # backwards compat
15276,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15277,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15278,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15279,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15280,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		krb5-dev \
15281,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		openldap-dev \
15282,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: prove not found
15283,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15284,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15285,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15286,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15287,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15288,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15289,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15290,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15291,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15292,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15293,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15294,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15295,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15296,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15297,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile, # backwards compat
15298,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# vim:set ft=dockerfile:
15299,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# explicitly set user/group IDs
15300,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15301,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15302,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# grab gosu for easy step-down from root
15303,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15304,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15305,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15306,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15307,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# see note below about ""*.pyc"" files"
15308,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# arches officialy built by upstream
15309,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15310,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15311,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15312,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15313,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15314,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15315,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15316,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15317,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15318,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15319,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15320,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15321,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15322,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile, # backwards compat
15323,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15324,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15325,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15326,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15327,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		krb5-dev \
15328,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		openldap-dev \
15329,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: prove not found
15330,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15331,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15332,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15333,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15334,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15335,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15336,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15337,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15338,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15339,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15340,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15341,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15342,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15343,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15344,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile, # backwards compat
15345,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15346,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15347,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15348,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15349,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		krb5-dev \
15350,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		openldap-dev \
15351,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: prove not found
15352,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15353,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15354,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15355,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15356,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15357,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15358,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15359,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15360,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15361,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15362,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15363,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15364,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15365,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15366,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile, # backwards compat
15367,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15368,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15369,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15370,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15371,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		krb5-dev \
15372,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		openldap-dev \
15373,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15374,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15375,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15376,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15377,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15378,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15379,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15380,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15381,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15382,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15383,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15384,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile, # backwards compat
15385,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15386,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15387,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15388,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15389,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		krb5-dev \
15390,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		openldap-dev \
15391,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: prove not found
15392,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15393,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15394,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15395,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15396,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15397,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15398,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15399,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15400,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15401,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15402,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15403,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15404,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15405,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15406,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile, # backwards compat
15407,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15408,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15409,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,# vim:set ft=dockerfile:
15410,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15411,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15412,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15413,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15414,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15415,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15416,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		krb5-dev \
15417,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		openldap-dev \
15418,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15419,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15420,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15421,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15422,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15423,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
15424,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15425,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15426,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15427,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15428,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15429,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15430,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		krb5-dev \
15431,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		openldap-dev \
15432,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: prove not found
15433,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15434,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15435,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15436,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15437,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15438,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15439,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15440,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15441,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15442,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15443,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15444,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15445,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15446,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15447,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile, # backwards compat
15448,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15449,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15450,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15451,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15452,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		krb5-dev \
15453,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		openldap-dev \
15454,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: prove not found
15455,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15456,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15457,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15458,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15459,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15460,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15461,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15462,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15463,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15464,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15465,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15466,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15467,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15468,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15469,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile, # backwards compat
15470,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15471,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15472,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15473,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15474,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		krb5-dev \
15475,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		openldap-dev \
15476,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
15477,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15478,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15479,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15480,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15481,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15482,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15483,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15484,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15485,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15486,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
15487,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15488,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15489,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15490,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15491,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile, # backwards compat
15492,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15493,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15494,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15495,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15496,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		krb5-dev \
15497,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		openldap-dev \
15498,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: prove not found
15499,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15500,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15501,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15502,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15503,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15504,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15505,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15506,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15507,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15508,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
15509,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15510,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15511,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15512,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15513,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile, # backwards compat
15514,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# vim:set ft=dockerfile:
15515,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# explicitly set user/group IDs
15516,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# grab gosu for easy step-down from root
15517,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15518,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15519,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15520,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15521,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15522,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15523,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		krb5-dev \
15524,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		openldap-dev \
15525,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: prove not found
15526,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15527,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15528,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15529,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15530,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15531,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15532,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15533,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15534,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15535,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15536,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15537,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15538,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15539,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15540,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile, # backwards compat
15541,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# vim:set ft=dockerfile:
15542,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# explicitly set user/group IDs
15543,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15544,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15545,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# grab gosu for easy step-down from root
15546,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15547,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15548,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15549,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15550,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15551,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15552,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# arches officialy built by upstream
15553,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15554,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15555,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15556,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15557,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15558,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15559,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15560,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15561,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15562,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15563,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15564,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15565,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15566,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile, # backwards compat
15567,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# vim:set ft=dockerfile:
15568,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# explicitly set user/group IDs
15569,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# grab gosu for easy step-down from root
15570,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15571,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15572,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15573,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15574,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# arches officialy built by upstream
15575,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15576,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15577,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15578,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15579,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15580,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15581,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15582,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15583,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15584,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15585,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15586,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile, # backwards compat
15587,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# vim:set ft=dockerfile:
15588,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15589,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# grab gosu for easy step-down from root
15590,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15591,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15592,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15593,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15594,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15595,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15596,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		krb5-dev \
15597,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		openldap-dev \
15598,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15599,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15600,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15601,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15602,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15603,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15604,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15605,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15606,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# vim:set ft=dockerfile:
15607,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# explicitly set user/group IDs
15608,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# grab gosu for easy step-down from root
15609,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15610,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15611,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
15612,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15613,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15614,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15615,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		krb5-dev \
15616,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		openldap-dev \
15617,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: prove not found
15618,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15619,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15620,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15621,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15622,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15623,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15624,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15625,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15626,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15627,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#p' --recursive /usr/local \
15628,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15629,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15630,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15631,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15632,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15633,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15634,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15635,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15636,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		krb5-dev \
15637,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		openldap-dev \
15638,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: prove not found
15639,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15640,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15641,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15642,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15643,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15644,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15645,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15646,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15647,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15648,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15649,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15650,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15651,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15652,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15653,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile, # backwards compat
15654,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# vim:set ft=dockerfile:
15655,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# explicitly set user/group IDs
15656,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# grab gosu for easy step-down from root
15657,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15658,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15659,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15660,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15661,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15662,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15663,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile, # backwards compat
15664,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# vim:set ft=dockerfile:
15665,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# explicitly set user/group IDs
15666,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15667,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15668,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# grab gosu for easy step-down from root
15669,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15670,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15671,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15672,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15673,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15674,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# arches officialy built by upstream
15675,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15676,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15677,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15678,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15679,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15680,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15681,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15682,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15683,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15684,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15685,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15686,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15687,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15688,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile, # backwards compat
15689,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# vim:set ft=dockerfile:
15690,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# explicitly set user/group IDs
15691,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# grab gosu for easy step-down from root
15692,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15693,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15694,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15695,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15696,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15697,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15698,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile, # backwards compat
15699,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
15700,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15701,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15702,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15703,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		krb5-dev \
15704,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		openldap-dev \
15705,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: prove not found
15706,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15707,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15708,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15709,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15710,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15711,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15712,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15713,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15714,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15715,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15716,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15717,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15718,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15719,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15720,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15721,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile, # backwards compat
15722,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# vim:set ft=dockerfile:
15723,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# explicitly set user/group IDs
15724,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# grab gosu for easy step-down from root
15725,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15726,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15727,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15728,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15729,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15730,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15731,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		krb5-dev \
15732,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		openldap-dev \
15733,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15734,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15735,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15736,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15737,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15738,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15739,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15740,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15741,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15742,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15743,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15744,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15745,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		krb5-dev \
15746,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		openldap-dev \
15747,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15748,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15749,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15750,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15751,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15752,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15753,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15754,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15755,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15756,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15757,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15758,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# vim:set ft=dockerfile:
15759,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# explicitly set user/group IDs
15760,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15761,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15762,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# grab gosu for easy step-down from root
15763,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15764,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15765,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15766,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15767,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15768,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# arches officialy built by upstream
15769,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15770,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15771,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15772,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15773,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15774,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15775,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15776,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15777,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15778,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15779,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15780,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15781,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15782,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile, # backwards compat
15783,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# vim:set ft=dockerfile:
15784,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# explicitly set user/group IDs
15785,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15786,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15787,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# grab gosu for easy step-down from root
15788,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15789,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15790,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15791,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15792,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# arches officialy built by upstream
15793,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15794,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15795,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15796,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15797,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15798,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15799,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15800,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15801,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15802,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15803,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15804,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile, # backwards compat
15805,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
15806,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15807,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15808,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15809,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		krb5-dev \
15810,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		openldap-dev \
15811,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15812,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15813,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15814,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15815,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15816,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15817,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15818,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15819,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15820,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15821,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15822,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15823,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15824,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15825,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15826,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		krb5-dev \
15827,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		openldap-dev \
15828,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15829,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15830,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15831,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15832,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15833,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15834,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15835,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15836,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# vim:set ft=dockerfile:
15837,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# explicitly set user/group IDs
15838,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15839,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15840,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
15841,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15842,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15843,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15844,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15845,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15846,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15847,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# arches officialy built by upstream
15848,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15849,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15850,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15851,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15852,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15853,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15854,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15855,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15856,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15857,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15858,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15859,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15860,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15861,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile, # backwards compat
15862,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# vim:set ft=dockerfile:
15863,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# explicitly set user/group IDs
15864,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# grab gosu for easy step-down from root
15865,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15866,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15867,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15868,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15869,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15870,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15871,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		krb5-dev \
15872,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		openldap-dev \
15873,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15874,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15875,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15876,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15877,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15878,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15879,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15880,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15881,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# vim:set ft=dockerfile:
15882,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# explicitly set user/group IDs
15883,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15884,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15885,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# grab gosu for easy step-down from root
15886,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15887,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15888,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15889,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15890,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
15891,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# arches officialy built by upstream
15892,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15893,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15894,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15895,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15896,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15897,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15898,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15899,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15900,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15901,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15902,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15903,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15904,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15905,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile, # backwards compat
15906,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# vim:set ft=dockerfile:
15907,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# explicitly set user/group IDs
15908,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# grab gosu for easy step-down from root
15909,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15910,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15911,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15912,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15913,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# arches officialy built by upstream
15914,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15915,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15916,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15917,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15918,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15919,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15920,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15921,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15922,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15923,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15924,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15925,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile, # backwards compat
15926,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
15927,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15928,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15929,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15930,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		krb5-dev \
15931,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		openldap-dev \
15932,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: prove not found
15933,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15934,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15935,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15936,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15937,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15938,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15939,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15940,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15941,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15942,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#p' --recursive /usr/local \
15943,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15944,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15945,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15946,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15947,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15948,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15949,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15950,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15951,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		krb5-dev \
15952,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		openldap-dev \
15953,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: prove not found
15954,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15955,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15956,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15957,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15958,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15959,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15960,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15961,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15962,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15963,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15964,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15965,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15966,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15967,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15968,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile, # backwards compat
15969,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# vim:set ft=dockerfile:
15970,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15971,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# grab gosu for easy step-down from root
15972,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15973,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15974,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# vim:set ft=dockerfile:
15975,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# explicitly set user/group IDs
15976,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# grab gosu for easy step-down from root
15977,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15978,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15979,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15980,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15981,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15982,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15983,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15984,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15985,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15986,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15987,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15988,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15989,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		krb5-dev \
15990,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		openldap-dev \
15991,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15992,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15993,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15994,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15995,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15996,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15997,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15998,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15999,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,# vim:set ft=dockerfile:
16000,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16001,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16002,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# vim:set ft=dockerfile:
16003,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# explicitly set user/group IDs
16004,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# grab gosu for easy step-down from root
16005,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16006,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16007,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# arches officialy built by upstream
16008,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16009,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16010,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16011,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16012,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16013,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16014,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16015,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16016,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16017,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16018,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16019,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile, # backwards compat
16020,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# vim:set ft=dockerfile:
16021,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16022,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# grab gosu for easy step-down from root
16023,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16024,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16025,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# vim:set ft=dockerfile:
16026,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# explicitly set user/group IDs
16027,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# grab gosu for easy step-down from root
16028,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16029,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16030,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16031,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# arches officialy built by upstream
16032,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16033,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16034,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16035,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16036,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16037,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16038,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16039,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16040,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16041,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16042,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16043,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile, # backwards compat
16044,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16045,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16046,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16047,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16048,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		krb5-dev \
16049,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		openldap-dev \
16050,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: prove not found
16051,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16052,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16053,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16054,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16055,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16056,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16057,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16058,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16059,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16060,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16061,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16062,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16063,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16064,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16065,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile, # backwards compat
16066,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16067,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16068,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16069,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16070,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		krb5-dev \
16071,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		openldap-dev \
16072,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: prove not found
16073,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16074,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16075,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16076,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16077,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16078,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16079,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16080,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16081,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16082,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16083,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16084,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16085,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16086,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16087,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile, # backwards compat
16088,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16089,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16090,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16091,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16092,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		krb5-dev \
16093,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		openldap-dev \
16094,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: prove not found
16095,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16096,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16097,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16098,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16099,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16100,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16101,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16102,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16103,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16104,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16105,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16106,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16107,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16108,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16109,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile, # backwards compat
16110,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16111,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16112,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
16113,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16114,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16115,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16116,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		krb5-dev \
16117,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		openldap-dev \
16118,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: prove not found
16119,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16120,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16121,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16122,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16123,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16124,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16125,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16126,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16127,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16128,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#p' --recursive /usr/local \
16129,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16130,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16131,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16132,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16133,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# vim:set ft=dockerfile:
16134,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# explicitly set user/group IDs
16135,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# grab gosu for easy step-down from root
16136,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16137,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16138,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# arches officialy built by upstream
16139,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16140,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16141,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16142,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16143,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16144,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16145,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16146,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16147,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16148,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16149,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16150,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile, # backwards compat
16151,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# vim:set ft=dockerfile:
16152,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16153,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# grab gosu for easy step-down from root
16154,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16155,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16156,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16157,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16158,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16159,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16160,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		krb5-dev \
16161,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		openldap-dev \
16162,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16163,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16164,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16165,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16166,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16167,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16168,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16169,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16170,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16171,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16172,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16173,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile, # backwards compat
16174,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# vim:set ft=dockerfile:
16175,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# explicitly set user/group IDs
16176,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# grab gosu for easy step-down from root
16177,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16178,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16179,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
16180,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# explicitly set user/group IDs
16181,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
16182,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16183,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16184,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16185,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16186,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16187,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16188,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile, # backwards compat
16189,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16190,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16191,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16192,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16193,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		krb5-dev \
16194,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		openldap-dev \
16195,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
16196,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16197,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16198,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16199,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16200,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16201,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16202,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16203,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16204,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16205,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16206,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16207,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16208,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16209,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16210,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile, # backwards compat
16211,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16212,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16213,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16214,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16215,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		krb5-dev \
16216,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		openldap-dev \
16217,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: prove not found
16218,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16219,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16220,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16221,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16222,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16223,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16224,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16225,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16226,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16227,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16228,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16229,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16230,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16231,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16232,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile, # backwards compat
16233,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16234,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16235,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16236,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16237,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		krb5-dev \
16238,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		openldap-dev \
16239,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: prove not found
16240,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16241,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16242,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16243,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16244,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16245,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16246,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16247,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16248,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16249,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16250,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16251,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16252,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16253,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16254,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile, # backwards compat
16255,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16256,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16257,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16258,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16259,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		krb5-dev \
16260,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		openldap-dev \
16261,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16262,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16263,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16264,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16265,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16266,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16267,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16268,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16269,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16270,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16271,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16272,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile, # backwards compat
16273,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16274,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16275,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16276,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16277,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		krb5-dev \
16278,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		openldap-dev \
16279,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16280,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16281,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16282,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16283,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16284,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# vim:set ft=dockerfile:
16285,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# explicitly set user/group IDs
16286,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16287,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16288,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# grab gosu for easy step-down from root
16289,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16290,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16291,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16292,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16293,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
16294,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# arches officialy built by upstream
16295,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16296,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16297,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16298,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16299,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16300,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16301,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16302,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16303,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16304,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16305,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16306,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16307,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16308,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile, # backwards compat
16309,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
16310,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16311,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16312,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16313,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		krb5-dev \
16314,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		openldap-dev \
16315,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: prove not found
16316,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16317,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16318,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16319,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16320,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16321,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16322,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16323,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16324,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16325,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#p' --recursive /usr/local \
16326,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16327,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16328,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16329,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16330,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# vim:set ft=dockerfile:
16331,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# explicitly set user/group IDs
16332,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16333,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16334,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# grab gosu for easy step-down from root
16335,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16336,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16337,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16338,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16339,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# arches officialy built by upstream
16340,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16341,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16342,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16343,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16344,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16345,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16346,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16347,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16348,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16349,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16350,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16351,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile, # backwards compat
16352,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# vim:set ft=dockerfile:
16353,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# explicitly set user/group IDs
16354,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# grab gosu for easy step-down from root
16355,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16356,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16357,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# arches officialy built by upstream
16358,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16359,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16360,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16361,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16362,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16363,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16364,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16365,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16366,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16367,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16368,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16369,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile, # backwards compat
16370,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# vim:set ft=dockerfile:
16371,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# explicitly set user/group IDs
16372,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16373,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16374,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# grab gosu for easy step-down from root
16375,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16376,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16377,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16378,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16379,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# see note below about ""*.pyc"" files"
16380,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# arches officialy built by upstream
16381,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16382,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16383,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16384,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16385,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16386,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16387,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16388,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16389,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16390,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16391,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16392,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16393,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16394,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile, # backwards compat
16395,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# vim:set ft=dockerfile:
16396,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# explicitly set user/group IDs
16397,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16398,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16399,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# grab gosu for easy step-down from root
16400,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16401,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16402,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16403,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16404,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16405,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# see note below about ""*.pyc"" files"
16406,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# arches officialy built by upstream
16407,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16408,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16409,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16410,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16411,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16412,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16413,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16414,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16415,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16416,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16417,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16418,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16419,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16420,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile, # backwards compat
16421,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16422,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16423,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16424,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16425,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		krb5-dev \
16426,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		openldap-dev \
16427,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16428,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16429,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16430,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16431,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16432,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16433,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16434,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16435,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# vim:set ft=dockerfile:
16436,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# explicitly set user/group IDs
16437,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16438,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16439,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# grab gosu for easy step-down from root
16440,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16441,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16442,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16443,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16444,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
16445,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# arches officialy built by upstream
16446,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16447,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16448,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16449,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16450,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16451,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16452,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16453,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16454,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16455,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16456,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16457,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16458,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16459,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile, # backwards compat
16460,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16461,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16462,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16463,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16464,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16465,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16466,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		krb5-dev \
16467,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		openldap-dev \
16468,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: prove not found
16469,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16470,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16471,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16472,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16473,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16474,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16475,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16476,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16477,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16478,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16479,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16480,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16481,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16482,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16483,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile, # backwards compat
16484,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# vim:set ft=dockerfile:
16485,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# explicitly set user/group IDs
16486,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# grab gosu for easy step-down from root
16487,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16488,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16489,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# vim:set ft=dockerfile:
16490,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# explicitly set user/group IDs
16491,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# grab gosu for easy step-down from root
16492,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16493,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16494,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16495,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# arches officialy built by upstream
16496,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16497,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16498,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16499,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16500,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16501,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16502,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16503,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16504,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16505,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16506,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16507,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile, # backwards compat
16508,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# vim:set ft=dockerfile:
16509,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# explicitly set user/group IDs
16510,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16511,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16512,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# grab gosu for easy step-down from root
16513,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16514,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16515,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16516,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16517,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16518,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
16519,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# arches officialy built by upstream
16520,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16521,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16522,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16523,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16524,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16525,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16526,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16527,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16528,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16529,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16530,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16531,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16532,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16533,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile, # backwards compat
16534,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# vim:set ft=dockerfile:
16535,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# explicitly set user/group IDs
16536,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# grab gosu for easy step-down from root
16537,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16538,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16539,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16540,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16541,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# vim:set ft=dockerfile:
16542,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# explicitly set user/group IDs
16543,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# grab gosu for easy step-down from root
16544,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16545,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16546,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# vim:set ft=dockerfile:
16547,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# explicitly set user/group IDs
16548,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16549,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16550,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# grab gosu for easy step-down from root
16551,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16552,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16553,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16554,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16555,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
16556,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# arches officialy built by upstream
16557,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16558,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16559,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16560,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16561,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16562,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16563,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16564,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16565,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16566,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16567,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16568,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16569,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16570,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile, # backwards compat
16571,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# vim:set ft=dockerfile:
16572,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# explicitly set user/group IDs
16573,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16574,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16575,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# grab gosu for easy step-down from root
16576,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16577,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16578,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16579,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16580,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
16581,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# arches officialy built by upstream
16582,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16583,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16584,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16585,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16586,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16587,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16588,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16589,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16590,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16591,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16592,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16593,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16594,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16595,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile, # backwards compat
16596,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# vim:set ft=dockerfile:
16597,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# explicitly set user/group IDs
16598,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# grab gosu for easy step-down from root
16599,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16600,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16601,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16602,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16603,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16604,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16605,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile, # backwards compat
16606,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# vim:set ft=dockerfile:
16607,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# explicitly set user/group IDs
16608,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16609,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16610,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# grab gosu for easy step-down from root
16611,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16612,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16613,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16614,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16615,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
16616,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# arches officialy built by upstream
16617,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16618,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16619,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16620,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16621,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16622,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16623,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16624,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16625,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16626,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16627,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16628,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16629,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16630,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile, # backwards compat
16631,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16632,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16633,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16634,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16635,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		krb5-dev \
16636,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		openldap-dev \
16637,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: prove not found
16638,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16639,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16640,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16641,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16642,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16643,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16644,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16645,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16646,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16647,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16648,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16649,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16650,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16651,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16652,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile, # backwards compat
16653,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# vim:set ft=dockerfile:
16654,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# explicitly set user/group IDs
16655,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# grab gosu for easy step-down from root
16656,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16657,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16658,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16659,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16660,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# arches officialy built by upstream
16661,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16662,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16663,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16664,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16665,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16666,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16667,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16668,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16669,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16670,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16671,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16672,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile, # backwards compat
16673,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
16674,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16675,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16676,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16677,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		krb5-dev \
16678,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		openldap-dev \
16679,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: prove not found
16680,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16681,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16682,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16683,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16684,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16685,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16686,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16687,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16688,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16689,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#p' --recursive /usr/local \
16690,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16691,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16692,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16693,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16694,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16695,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16696,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16697,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16698,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		krb5-dev \
16699,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		openldap-dev \
16700,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: prove not found
16701,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16702,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16703,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16704,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16705,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16706,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16707,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16708,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16709,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16710,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16711,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16712,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16713,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16714,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16715,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile, # backwards compat
16716,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# vim:set ft=dockerfile:
16717,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# explicitly set user/group IDs
16718,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# grab gosu for easy step-down from root
16719,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16720,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16721,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16722,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16723,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16724,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16725,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile, # backwards compat
16726,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16727,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16728,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16729,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16730,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		krb5-dev \
16731,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		openldap-dev \
16732,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: prove not found
16733,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16734,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16735,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16736,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16737,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16738,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16739,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16740,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16741,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16742,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16743,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16744,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16745,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16746,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16747,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile, # backwards compat
16748,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16749,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16750,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16751,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16752,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		krb5-dev \
16753,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		openldap-dev \
16754,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: prove not found
16755,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16756,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16757,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16758,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16759,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16760,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16761,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16762,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16763,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16764,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16765,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16766,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16767,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16768,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16769,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile, # backwards compat
16770,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16771,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16772,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16773,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16774,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		krb5-dev \
16775,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		openldap-dev \
16776,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16777,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16778,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16779,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16780,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16781,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16782,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16783,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16784,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16785,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16786,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# vim:set ft=dockerfile:
16787,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# explicitly set user/group IDs
16788,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# grab gosu for easy step-down from root
16789,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16790,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16791,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16792,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16793,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16794,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16795,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile, # backwards compat
16796,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16797,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16798,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16799,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16800,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		krb5-dev \
16801,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		openldap-dev \
16802,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: prove not found
16803,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16804,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16805,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16806,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16807,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16808,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16809,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16810,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16811,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16812,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16813,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16814,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16815,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16816,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16817,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile, # backwards compat
16818,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16819,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16820,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16821,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16822,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		krb5-dev \
16823,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		openldap-dev \
16824,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: prove not found
16825,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16826,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16827,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16828,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16829,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16830,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16831,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16832,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16833,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16834,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16835,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16836,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16837,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16838,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16839,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile, # backwards compat
16840,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# vim:set ft=dockerfile:
16841,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# explicitly set user/group IDs
16842,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# grab gosu for easy step-down from root
16843,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16844,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16845,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16846,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16847,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16848,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16849,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile, # backwards compat
16850,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# vim:set ft=dockerfile:
16851,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# explicitly set user/group IDs
16852,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# grab gosu for easy step-down from root
16853,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16854,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16855,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# arches officialy built by upstream
16856,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16857,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16858,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16859,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16860,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16861,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16862,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16863,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16864,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16865,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16866,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16867,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile, # backwards compat
16868,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16869,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16870,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16871,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16872,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		krb5-dev \
16873,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		openldap-dev \
16874,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16875,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16876,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16877,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16878,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16879,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
16880,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16881,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16882,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16883,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16884,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16885,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16886,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		krb5-dev \
16887,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		openldap-dev \
16888,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: prove not found
16889,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16890,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16891,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16892,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16893,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16894,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16895,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16896,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16897,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16898,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16899,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16900,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16901,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16902,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16903,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile, # backwards compat
16904,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# vim:set ft=dockerfile:
16905,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# explicitly set user/group IDs
16906,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# grab gosu for easy step-down from root
16907,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16908,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16909,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16910,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16911,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16912,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,# vim:set ft=dockerfile:
16913,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16914,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16915,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# vim:set ft=dockerfile:
16916,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# explicitly set user/group IDs
16917,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# grab gosu for easy step-down from root
16918,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16919,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16920,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16921,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# arches officialy built by upstream
16922,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16923,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16924,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16925,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16926,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16927,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16928,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16929,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16930,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16931,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16932,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16933,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile, # backwards compat
16934,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# vim:set ft=dockerfile:
16935,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# explicitly set user/group IDs
16936,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# grab gosu for easy step-down from root
16937,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16938,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16939,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16940,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# arches officialy built by upstream
16941,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16942,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16943,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16944,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16945,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16946,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16947,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16948,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16949,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16950,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16951,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16952,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile, # backwards compat
16953,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# vim:set ft=dockerfile:
16954,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# explicitly set user/group IDs
16955,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# grab gosu for easy step-down from root
16956,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16957,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16958,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# vim:set ft=dockerfile:
16959,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16960,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# grab gosu for easy step-down from root
16961,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16962,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16963,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# vim:set ft=dockerfile:
16964,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# explicitly set user/group IDs
16965,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# grab gosu for easy step-down from root
16966,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16967,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16968,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16969,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16970,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16971,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16972,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16973,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16974,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		krb5-dev \
16975,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		openldap-dev \
16976,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: prove not found
16977,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16978,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16979,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16980,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16981,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16982,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16983,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16984,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16985,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16986,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16987,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16988,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16989,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16990,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16991,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile, # backwards compat
16992,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# vim:set ft=dockerfile:
16993,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# explicitly set user/group IDs
16994,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# grab gosu for easy step-down from root
16995,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16996,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16997,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# vim:set ft=dockerfile:
16998,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16999,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# grab gosu for easy step-down from root
17000,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17001,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17002,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17003,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17004,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17005,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17006,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		krb5-dev \
17007,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		openldap-dev \
17008,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: prove not found
17009,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17010,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17011,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17012,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17013,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17014,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17015,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17016,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17017,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17018,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17019,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17020,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17021,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17022,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17023,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile, # backwards compat
17024,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# vim:set ft=dockerfile:
17025,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# explicitly set user/group IDs
17026,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17027,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17028,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# grab gosu for easy step-down from root
17029,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17030,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17031,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17032,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17033,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
17034,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# arches officialy built by upstream
17035,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17036,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17037,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17038,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17039,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17040,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17041,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17042,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17043,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17044,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17045,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17046,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17047,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17048,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile, # backwards compat
17049,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# vim:set ft=dockerfile:
17050,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# explicitly set user/group IDs
17051,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# grab gosu for easy step-down from root
17052,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17053,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17054,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17055,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17056,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17057,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17058,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17059,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17060,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		krb5-dev \
17061,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		openldap-dev \
17062,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17063,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17064,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17065,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17066,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17067,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
17068,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17069,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17070,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# vim:set ft=dockerfile:
17071,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# explicitly set user/group IDs
17072,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17073,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17074,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# grab gosu for easy step-down from root
17075,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17076,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17077,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17078,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17079,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
17080,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# arches officialy built by upstream
17081,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17082,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17083,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17084,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17085,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17086,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17087,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17088,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17089,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17090,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17091,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17092,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17093,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17094,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile, # backwards compat
17095,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17096,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17097,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17098,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17099,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		krb5-dev \
17100,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		openldap-dev \
17101,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: prove not found
17102,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17103,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17104,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17105,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17106,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17107,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17108,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17109,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17110,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17111,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17112,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17113,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17114,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17115,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17116,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile, # backwards compat
17117,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17118,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17119,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17120,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17121,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		krb5-dev \
17122,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		openldap-dev \
17123,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: prove not found
17124,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17125,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17126,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17127,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17128,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17129,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17130,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17131,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17132,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17133,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17134,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17135,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17136,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17137,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17138,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile, # backwards compat
17139,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# vim:set ft=dockerfile:
17140,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# explicitly set user/group IDs
17141,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# grab gosu for easy step-down from root
17142,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17143,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17144,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17145,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17146,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# arches officialy built by upstream
17147,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17148,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17149,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17150,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17151,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17152,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17153,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17154,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17155,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17156,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17157,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17158,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile, # backwards compat
17159,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# vim:set ft=dockerfile:
17160,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# explicitly set user/group IDs
17161,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# grab gosu for easy step-down from root
17162,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17163,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17164,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# arches officialy built by upstream
17165,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17166,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17167,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17168,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17169,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17170,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17171,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17172,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17173,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17174,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17175,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17176,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile, # backwards compat
17177,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# vim:set ft=dockerfile:
17178,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# explicitly set user/group IDs
17179,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17180,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17181,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# grab gosu for easy step-down from root
17182,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17183,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17184,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17185,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17186,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
17187,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# arches officialy built by upstream
17188,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17189,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17190,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17191,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17192,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17193,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17194,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17195,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17196,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17197,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17198,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17199,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17200,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17201,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile, # backwards compat
17202,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17203,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17204,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17205,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17206,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		krb5-dev \
17207,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		openldap-dev \
17208,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# configure: error: prove not found
17209,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17210,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17211,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17212,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17213,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17214,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17215,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17216,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17217,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17218,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17219,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17220,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17221,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile, # backwards compat
17222,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
17223,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17224,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17225,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17226,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		krb5-dev \
17227,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		openldap-dev \
17228,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: prove not found
17229,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17230,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17231,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17232,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17233,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17234,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17235,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17236,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17237,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17238,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#p' --recursive /usr/local \
17239,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17240,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17241,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17242,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17243,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
17244,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17245,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17246,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17247,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		krb5-dev \
17248,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		openldap-dev \
17249,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: prove not found
17250,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17251,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17252,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17253,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17254,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17255,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17256,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17257,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17258,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17259,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#p' --recursive /usr/local \
17260,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17261,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17262,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17263,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17264,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# vim:set ft=dockerfile:
17265,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# explicitly set user/group IDs
17266,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17267,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17268,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# grab gosu for easy step-down from root
17269,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17270,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17271,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17272,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17273,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# see note below about ""*.pyc"" files"
17274,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# arches officialy built by upstream
17275,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17276,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17277,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17278,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17279,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17280,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17281,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17282,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17283,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17284,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17285,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17286,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17287,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17288,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile, # backwards compat
17289,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17290,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17291,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17292,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17293,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		krb5-dev \
17294,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		openldap-dev \
17295,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: prove not found
17296,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17297,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17298,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17299,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17300,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17301,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17302,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17303,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17304,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17305,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17306,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17307,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17308,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17309,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17310,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile, # backwards compat
17311,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17312,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17313,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17314,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17315,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		krb5-dev \
17316,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		openldap-dev \
17317,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17318,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17319,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17320,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17321,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17322,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17323,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17324,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17325,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17326,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17327,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17328,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17329,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile, # backwards compat
17330,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# vim:set ft=dockerfile:
17331,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# explicitly set user/group IDs
17332,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# grab gosu for easy step-down from root
17333,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17334,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17335,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17336,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17337,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17338,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17339,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile, # backwards compat
17340,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# vim:set ft=dockerfile:
17341,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# explicitly set user/group IDs
17342,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# grab gosu for easy step-down from root
17343,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17344,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17345,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# vim:set ft=dockerfile:
17346,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17347,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# grab gosu for easy step-down from root
17348,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17349,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17350,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# vim:set ft=dockerfile:
17351,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17352,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# grab gosu for easy step-down from root
17353,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17354,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17355,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17356,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17357,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17358,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17359,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		krb5-dev \
17360,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		openldap-dev \
17361,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: prove not found
17362,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17363,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17364,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17365,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17366,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17367,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17368,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17369,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17370,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17371,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17372,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17373,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17374,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17375,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17376,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile, # backwards compat
17377,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17378,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17379,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17380,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17381,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		krb5-dev \
17382,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		openldap-dev \
17383,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: prove not found
17384,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17385,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17386,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17387,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17388,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17389,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17390,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17391,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17392,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17393,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17394,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17395,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17396,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17397,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17398,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile, # backwards compat
17399,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# vim:set ft=dockerfile:
17400,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# explicitly set user/group IDs
17401,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17402,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17403,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# grab gosu for easy step-down from root
17404,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17405,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17406,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17407,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17408,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# see note below about ""*.pyc"" files"
17409,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# arches officialy built by upstream
17410,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17411,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17412,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17413,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17414,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17415,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17416,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17417,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17418,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17419,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17420,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17421,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17422,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17423,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile, # backwards compat
17424,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# vim:set ft=dockerfile:
17425,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# explicitly set user/group IDs
17426,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# grab gosu for easy step-down from root
17427,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17428,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17429,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17430,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17431,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17432,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17433,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		krb5-dev \
17434,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		openldap-dev \
17435,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: prove not found
17436,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17437,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17438,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17439,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17440,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17441,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17442,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17443,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17444,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17445,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17446,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17447,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17448,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17449,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17450,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile, # backwards compat
17451,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# vim:set ft=dockerfile:
17452,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# explicitly set user/group IDs
17453,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# grab gosu for easy step-down from root
17454,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17455,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17456,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17457,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17458,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17459,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17460,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17461,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17462,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17463,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17464,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17465,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		krb5-dev \
17466,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		openldap-dev \
17467,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: prove not found
17468,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17469,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17470,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17471,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17472,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17473,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17474,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17475,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17476,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17477,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
17478,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17479,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17480,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17481,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17482,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile, # backwards compat
17483,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17484,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17485,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17486,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17487,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		krb5-dev \
17488,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		openldap-dev \
17489,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17490,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
17491,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17492,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17493,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17494,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17495,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17496,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17497,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17498,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17499,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17500,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17501,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17502,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17503,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile, # backwards compat
17504,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17505,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17506,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17507,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17508,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17509,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17510,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		krb5-dev \
17511,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		openldap-dev \
17512,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17513,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17514,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17515,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17516,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17517,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17518,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17519,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17520,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17521,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17522,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17523,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17524,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile, # backwards compat
17525,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17526,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17527,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17528,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17529,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		krb5-dev \
17530,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		openldap-dev \
17531,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
17532,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17533,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17534,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17535,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17536,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17537,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17538,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17539,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17540,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17541,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17542,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17543,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17544,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17545,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17546,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile, # backwards compat
17547,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# vim:set ft=dockerfile:
17548,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# explicitly set user/group IDs
17549,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17550,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17551,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
17552,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17553,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17554,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17555,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17556,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17557,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# see note below about ""*.pyc"" files"
17558,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# arches officialy built by upstream
17559,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17560,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17561,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17562,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
17563,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17564,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17565,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17566,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17567,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17568,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17569,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17570,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17571,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17572,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17573,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile, # backwards compat
17574,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17575,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17576,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17577,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17578,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		krb5-dev \
17579,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		openldap-dev \
17580,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: prove not found
17581,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17582,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17583,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17584,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17585,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17586,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17587,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17588,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17589,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17590,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17591,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17592,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17593,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17594,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17595,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile, # backwards compat
17596,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17597,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17598,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17599,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17600,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		krb5-dev \
17601,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		openldap-dev \
17602,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: prove not found
17603,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17604,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17605,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17606,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17607,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17608,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17609,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17610,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17611,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17612,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17613,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17614,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17615,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17616,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17617,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile, # backwards compat
17618,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# vim:set ft=dockerfile:
17619,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# explicitly set user/group IDs
17620,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17621,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17622,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# grab gosu for easy step-down from root
17623,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17624,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17625,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17626,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17627,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17628,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
17629,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# arches officialy built by upstream
17630,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17631,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17632,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17633,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17634,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17635,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17636,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17637,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17638,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17639,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17640,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17641,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17642,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17643,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile, # backwards compat
17644,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17645,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17646,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17647,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17648,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		krb5-dev \
17649,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		openldap-dev \
17650,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17651,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17652,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17653,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17654,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17655,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17656,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17657,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17658,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17659,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17660,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17661,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile, # backwards compat
17662,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# vim:set ft=dockerfile:
17663,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# explicitly set user/group IDs
17664,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17665,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17666,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# grab gosu for easy step-down from root
17667,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17668,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17669,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17670,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17671,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17672,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# see note below about ""*.pyc"" files"
17673,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# arches officialy built by upstream
17674,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17675,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17676,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17677,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17678,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17679,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17680,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17681,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17682,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17683,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17684,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17685,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17686,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17687,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile, # backwards compat
17688,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# vim:set ft=dockerfile:
17689,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# explicitly set user/group IDs
17690,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# grab gosu for easy step-down from root
17691,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17692,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17693,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17694,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17695,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17696,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# vim:set ft=dockerfile:
17697,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17698,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# grab gosu for easy step-down from root
17699,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17700,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17701,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17702,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17703,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17704,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17705,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		krb5-dev \
17706,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		openldap-dev \
17707,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17708,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17709,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17710,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17711,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17712,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17713,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17714,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17715,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17716,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17717,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17718,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile, # backwards compat
17719,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# vim:set ft=dockerfile:
17720,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# explicitly set user/group IDs
17721,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# grab gosu for easy step-down from root
17722,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17723,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17724,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17725,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17726,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# vim:set ft=dockerfile:
17727,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17728,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# grab gosu for easy step-down from root
17729,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17730,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17731,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# vim:set ft=dockerfile:
17732,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# explicitly set user/group IDs
17733,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# grab gosu for easy step-down from root
17734,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17735,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17736,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17737,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17738,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# vim:set ft=dockerfile:
17739,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17740,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# grab gosu for easy step-down from root
17741,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17742,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17743,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# vim:set ft=dockerfile:
17744,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17745,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# grab gosu for easy step-down from root
17746,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17747,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17748,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17749,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17750,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17751,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17752,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		krb5-dev \
17753,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		openldap-dev \
17754,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: prove not found
17755,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17756,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17757,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17758,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17759,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17760,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17761,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17762,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17763,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17764,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17765,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17766,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17767,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17768,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17769,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile, # backwards compat
17770,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17771,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17772,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17773,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17774,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		krb5-dev \
17775,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		openldap-dev \
17776,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: prove not found
17777,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17778,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17779,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17780,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17781,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17782,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17783,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17784,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17785,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17786,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17787,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17788,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17789,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17790,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17791,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile, # backwards compat
17792,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17793,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17794,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17795,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17796,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		krb5-dev \
17797,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		openldap-dev \
17798,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: prove not found
17799,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17800,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17801,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17802,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17803,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17804,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17805,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17806,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17807,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17808,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17809,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17810,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17811,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17812,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile, # backwards compat
17813,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# vim:set ft=dockerfile:
17814,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# explicitly set user/group IDs
17815,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# grab gosu for easy step-down from root
17816,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17817,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17818,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# arches officialy built by upstream
17819,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17820,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17821,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17822,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17823,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17824,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17825,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17826,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17827,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17828,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17829,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17830,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile, # backwards compat
17831,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17832,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17833,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17834,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17835,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		krb5-dev \
17836,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		openldap-dev \
17837,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: prove not found
17838,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17839,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17840,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17841,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17842,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17843,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17844,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17845,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17846,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17847,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17848,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17849,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17850,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17851,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17852,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile, # backwards compat
17853,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# vim:set ft=dockerfile:
17854,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# explicitly set user/group IDs
17855,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# grab gosu for easy step-down from root
17856,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17857,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17858,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17859,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17860,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# arches officialy built by upstream
17861,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17862,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17863,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17864,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17865,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17866,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17867,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17868,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17869,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17870,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17871,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17872,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile, # backwards compat
17873,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# vim:set ft=dockerfile:
17874,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# explicitly set user/group IDs
17875,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# grab gosu for easy step-down from root
17876,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17877,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17878,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17879,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17880,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17881,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17882,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile, # backwards compat
17883,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# vim:set ft=dockerfile:
17884,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17885,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# grab gosu for easy step-down from root
17886,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17887,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17888,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# vim:set ft=dockerfile:
17889,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# explicitly set user/group IDs
17890,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17891,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17892,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# grab gosu for easy step-down from root
17893,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17894,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17895,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17896,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17897,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
17898,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# arches officialy built by upstream
17899,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17900,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17901,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17902,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17903,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17904,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17905,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17906,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17907,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17908,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17909,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17910,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17911,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17912,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile, # backwards compat
