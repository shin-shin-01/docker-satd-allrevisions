,CommitID,Dockerfile,Comment
0,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
2,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		krb5-dev \
9,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		openldap-dev \
10,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: prove not found
11,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
20,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
21,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
22,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
23,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
24,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
25,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
26,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
27,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile, # backwards compat
28,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# vim:set ft=dockerfile:
29,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# explicitly set user/group IDs
30,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
31,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
32,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# grab gosu for easy step-down from root
33,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
34,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
35,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
36,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
37,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# see note below about ""*.pyc"" files"
38,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# arches officialy built by upstream
39,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
40,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
41,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
42,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
43,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
44,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
45,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
46,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
47,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
48,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
49,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
50,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
51,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
52,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile, # backwards compat
53,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# vim:set ft=dockerfile:
54,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# explicitly set user/group IDs
55,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
56,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
57,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
58,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
59,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
60,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
61,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
62,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
63,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
64,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# arches officialy built by upstream
65,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
66,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
67,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
68,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
69,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
70,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
71,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
72,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
73,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
74,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
75,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
76,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
77,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
78,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
79,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template, # backwards compat
80,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
81,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
82,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
83,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
84,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		krb5-dev \
85,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		openldap-dev \
86,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: prove not found
87,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
88,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
89,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
90,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
91,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
92,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
93,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
94,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
95,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
96,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
97,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
98,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
99,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
100,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
101,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile, # backwards compat
102,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
103,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
104,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
105,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
106,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		krb5-dev \
107,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		openldap-dev \
108,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
109,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
110,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
111,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
112,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
113,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
114,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
115,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
116,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
117,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
118,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
119,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
120,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
121,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
122,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile, # backwards compat
123,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
124,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
125,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
126,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
127,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		krb5-dev \
128,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		openldap-dev \
129,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: prove not found
130,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
131,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
132,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
133,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
134,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
135,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
136,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
137,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
138,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
139,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
140,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
141,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
142,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
143,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
144,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
145,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
146,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile, # backwards compat
147,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
148,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
149,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
150,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
151,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		krb5-dev \
152,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		openldap-dev \
153,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: prove not found
154,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
155,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
156,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
157,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
158,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
159,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
160,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
161,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
162,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
163,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
164,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
165,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
166,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
167,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
168,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile, # backwards compat
169,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# vim:set ft=dockerfile:
170,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# explicitly set user/group IDs
171,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
172,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
173,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# grab gosu for easy step-down from root
174,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
175,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
176,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
177,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
178,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
179,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# arches officialy built by upstream
180,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
181,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
182,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
183,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
184,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
185,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
186,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
187,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
188,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
189,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
190,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
191,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
192,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
193,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile, # backwards compat
194,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# vim:set ft=dockerfile:
195,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# explicitly set user/group IDs
196,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# grab gosu for easy step-down from root
197,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
198,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
199,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
200,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
201,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
202,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
203,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile, # backwards compat
204,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# vim:set ft=dockerfile:
205,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
206,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# grab gosu for easy step-down from root
207,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
208,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
209,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# vim:set ft=dockerfile:
210,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# explicitly set user/group IDs
211,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# grab gosu for easy step-down from root
212,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
213,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
214,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# arches officialy built by upstream
215,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
216,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
217,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
218,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
219,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
220,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
221,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
222,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
223,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
224,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
225,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
226,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile, # backwards compat
227,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# vim:set ft=dockerfile:
228,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# explicitly set user/group IDs
229,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
230,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
231,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# grab gosu for easy step-down from root
232,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
233,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
234,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
235,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
236,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# see note below about ""*.pyc"" files"
237,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# arches officialy built by upstream
238,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
239,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
240,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
241,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
242,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
243,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
244,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
245,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
246,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
247,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
248,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
249,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
250,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
251,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile, # backwards compat
252,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# vim:set ft=dockerfile:
253,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# explicitly set user/group IDs
254,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# grab gosu for easy step-down from root
255,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
256,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
257,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# arches officialy built by upstream
258,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
259,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
260,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
261,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
262,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
263,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
264,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
265,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
266,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
267,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
268,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
269,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile, # backwards compat
270,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
271,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
272,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
273,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
274,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		krb5-dev \
275,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		openldap-dev \
276,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: prove not found
277,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
278,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
279,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
280,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
281,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
282,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
283,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
284,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
285,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
286,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#p' --recursive /usr/local \
287,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
288,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
289,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
290,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
291,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile, # backwards compat
292,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
293,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
294,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
295,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
296,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		krb5-dev \
297,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		openldap-dev \
298,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
299,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
300,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
301,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
302,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
303,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
304,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
305,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
306,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
307,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
308,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
309,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
310,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
311,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
312,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
313,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile, # backwards compat
314,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# vim:set ft=dockerfile:
315,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# explicitly set user/group IDs
316,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
317,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
318,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# grab gosu for easy step-down from root
319,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
320,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
321,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
322,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
323,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# see note below about ""*.pyc"" files"
324,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# arches officialy built by upstream
325,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
326,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
327,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
328,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
329,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
330,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
331,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
332,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
333,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
334,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
335,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
336,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
337,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
338,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile, # backwards compat
339,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# vim:set ft=dockerfile:
340,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
341,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# grab gosu for easy step-down from root
342,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
343,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
344,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,# vim:set ft=dockerfile:
345,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
346,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,# grab gosu for easy step-down from root
347,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
348,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
349,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
350,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
351,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
352,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
353,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		krb5-dev \
354,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		openldap-dev \
355,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: prove not found
356,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
357,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
358,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
359,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
360,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
361,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
362,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
363,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
364,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
365,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#p' --recursive /usr/local \
366,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
367,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
368,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
369,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
370,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile, # backwards compat
371,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,# vim:set ft=dockerfile:
372,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
373,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
374,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,# vim:set ft=dockerfile:
375,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
376,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,# grab gosu for easy step-down from root
377,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
378,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
379,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
380,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
381,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
382,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
383,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		krb5-dev \
384,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		openldap-dev \
385,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
386,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
387,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
388,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
389,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
390,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
391,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
392,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
393,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
394,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
395,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
396,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile, # backwards compat
397,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# vim:set ft=dockerfile:
398,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# explicitly set user/group IDs
399,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
400,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
401,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# grab gosu for easy step-down from root
402,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
403,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
404,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
405,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
406,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
407,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# arches officialy built by upstream
408,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
409,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
410,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
411,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
412,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
413,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
414,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
415,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
416,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
417,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
418,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
419,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
420,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
421,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile, # backwards compat
422,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
423,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
424,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
425,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
426,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,#		krb5-dev \
427,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,#		openldap-dev \
428,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,# configure: error: prove not found
429,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
430,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
431,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
432,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
433,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
434,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
435,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
436,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
437,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
438,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,#p' --recursive /usr/local \
439,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
440,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
441,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
442,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
443,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template, # backwards compat
444,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,# vim:set ft=dockerfile:
445,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,# explicitly set user/group IDs
446,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,# grab gosu for easy step-down from root
447,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
448,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
449,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# vim:set ft=dockerfile:
450,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# explicitly set user/group IDs
451,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
452,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
453,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# grab gosu for easy step-down from root
454,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
455,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
456,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
457,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
458,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# see note below about ""*.pyc"" files"
459,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# arches officialy built by upstream
460,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
461,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
462,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
463,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
464,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
465,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
466,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
467,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
468,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
469,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
470,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
471,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
472,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
473,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile, # backwards compat
474,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# vim:set ft=dockerfile:
475,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# explicitly set user/group IDs
476,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# grab gosu for easy step-down from root
477,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
478,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
479,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
480,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
481,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# vim:set ft=dockerfile:
482,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# explicitly set user/group IDs
483,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# grab gosu for easy step-down from root
484,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
485,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
486,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# vim:set ft=dockerfile:
487,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# explicitly set user/group IDs
488,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
489,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
490,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# grab gosu for easy step-down from root
491,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
492,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
493,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
494,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
495,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
496,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# arches officialy built by upstream
497,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
498,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
499,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
500,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
501,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
502,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
503,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
504,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
505,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
506,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
507,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
508,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
509,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
510,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile, # backwards compat
511,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# vim:set ft=dockerfile:
512,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# explicitly set user/group IDs
513,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
514,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
515,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
516,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
517,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
518,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
519,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
520,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
521,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# see note below about ""*.pyc"" files"
522,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# arches officialy built by upstream
523,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
524,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
525,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
526,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
527,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
528,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
529,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
530,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
531,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
532,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
533,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
534,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
535,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
536,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
537,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile, # backwards compat
538,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
539,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
540,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
541,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
542,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		krb5-dev \
543,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		openldap-dev \
544,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: prove not found
545,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
546,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
547,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
548,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
549,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
550,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
551,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
552,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
553,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
554,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#p' --recursive /usr/local \
555,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
556,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
557,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
558,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
559,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
560,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
561,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
562,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
563,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		krb5-dev \
564,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		openldap-dev \
565,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: prove not found
566,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
567,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
568,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
569,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
570,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
571,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
572,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
573,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
574,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
575,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
576,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
577,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
578,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
579,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
580,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile, # backwards compat
581,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
582,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
583,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
584,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
585,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		krb5-dev \
586,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		openldap-dev \
587,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: prove not found
588,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
589,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
590,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
591,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
592,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
593,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
594,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
595,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
596,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
597,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
598,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
599,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
600,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
601,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
602,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
603,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
604,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile, # backwards compat
605,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# vim:set ft=dockerfile:
606,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# explicitly set user/group IDs
607,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# grab gosu for easy step-down from root
608,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
609,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
610,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
611,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
612,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
613,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
614,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile, # backwards compat
615,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
616,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
617,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
618,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
619,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,#		krb5-dev \
620,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,#		openldap-dev \
621,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
622,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
623,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
624,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
625,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
626,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
627,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
628,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
629,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
630,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
631,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
632,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
633,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		krb5-dev \
634,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		openldap-dev \
635,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: prove not found
636,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
637,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
638,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
639,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
640,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
641,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
642,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
643,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
644,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
645,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
646,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
647,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
648,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
649,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile, # backwards compat
650,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# vim:set ft=dockerfile:
651,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# explicitly set user/group IDs
652,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
653,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
654,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# grab gosu for easy step-down from root
655,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
656,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
657,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
658,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
659,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# arches officialy built by upstream
660,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
661,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
662,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
663,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
664,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
665,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
666,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
667,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
668,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
669,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
670,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
671,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template, # backwards compat
672,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# vim:set ft=dockerfile:
673,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# explicitly set user/group IDs
674,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
675,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
676,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# grab gosu for easy step-down from root
677,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
678,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
679,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
680,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
681,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
682,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# arches officialy built by upstream
683,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
684,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
685,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
686,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
687,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
688,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
689,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
690,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
691,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
692,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
693,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
694,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
695,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
696,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile, # backwards compat
697,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# vim:set ft=dockerfile:
698,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# explicitly set user/group IDs
699,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# grab gosu for easy step-down from root
700,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
701,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
702,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
703,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# arches officialy built by upstream
704,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
705,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
706,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
707,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
708,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
709,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
710,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
711,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
712,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
713,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
714,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
715,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile, # backwards compat
716,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
717,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
718,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
719,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
720,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		krb5-dev \
721,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		openldap-dev \
722,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: prove not found
723,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
724,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
725,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
726,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
727,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
728,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
729,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
730,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
731,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
732,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
733,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
734,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
735,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
736,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
737,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile, # backwards compat
738,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
739,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
740,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
741,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
742,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		krb5-dev \
743,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		openldap-dev \
744,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: prove not found
745,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
746,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
747,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
748,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
749,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
750,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
751,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
752,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
753,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
754,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#p' --recursive /usr/local \
755,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
756,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
757,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
758,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
759,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile, # backwards compat
760,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
761,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
762,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
763,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
764,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		krb5-dev \
765,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		openldap-dev \
766,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
767,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
768,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
769,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
770,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
771,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
772,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
773,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
774,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
775,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
776,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# vim:set ft=dockerfile:
777,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# explicitly set user/group IDs
778,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# grab gosu for easy step-down from root
779,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
780,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
781,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# arches officialy built by upstream
782,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
783,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
784,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
785,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
786,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
787,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
788,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
789,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
790,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
791,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
792,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
793,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile, # backwards compat
794,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# vim:set ft=dockerfile:
795,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# explicitly set user/group IDs
796,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# grab gosu for easy step-down from root
797,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
798,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
799,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
800,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
801,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
802,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
803,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
804,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
805,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
806,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
807,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		krb5-dev \
808,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		openldap-dev \
809,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: prove not found
810,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
811,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
812,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
813,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
814,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
815,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
816,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
817,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
818,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
819,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
820,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
821,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
822,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
823,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
824,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile, # backwards compat
825,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
826,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
827,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
828,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
829,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		krb5-dev \
830,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		openldap-dev \
831,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: prove not found
832,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
833,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
834,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
835,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
836,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
837,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
838,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
839,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
840,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
841,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
842,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
843,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
844,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
845,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
846,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile, # backwards compat
847,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
848,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
849,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
850,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
851,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,#		krb5-dev \
852,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,#		openldap-dev \
853,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,# configure: error: prove not found
854,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
855,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
856,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
857,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
858,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
859,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
860,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
861,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
862,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
863,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
864,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
865,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
866,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template, # backwards compat
867,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
868,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
869,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
870,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
871,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,#		krb5-dev \
872,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,#		openldap-dev \
873,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
874,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
875,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
876,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
877,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
878,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
879,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
880,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
881,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# vim:set ft=dockerfile:
882,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# explicitly set user/group IDs
883,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
884,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
885,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# grab gosu for easy step-down from root
886,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
887,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
888,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
889,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
890,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# see note below about ""*.pyc"" files"
891,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# arches officialy built by upstream
892,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
893,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
894,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
895,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
896,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
897,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
898,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
899,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
900,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
901,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
902,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
903,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
904,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
905,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile, # backwards compat
906,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
907,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
908,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# vim:set ft=dockerfile:
909,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# explicitly set user/group IDs
910,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
911,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
912,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# grab gosu for easy step-down from root
913,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
914,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
915,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
916,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
917,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
918,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# arches officialy built by upstream
919,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
920,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
921,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
922,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
923,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
924,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
925,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
926,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
927,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
928,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
929,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
930,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
931,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
932,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile, # backwards compat
933,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# vim:set ft=dockerfile:
934,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# explicitly set user/group IDs
935,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# grab gosu for easy step-down from root
936,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
937,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
938,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# arches officialy built by upstream
939,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
940,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
941,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
942,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
943,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
944,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
945,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
946,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
947,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
948,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
949,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
950,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile, # backwards compat
951,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# vim:set ft=dockerfile:
952,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# explicitly set user/group IDs
953,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# grab gosu for easy step-down from root
954,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
955,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
956,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
957,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# arches officialy built by upstream
958,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
959,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
960,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
961,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
962,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
963,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
964,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
965,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
966,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
967,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
968,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
969,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile, # backwards compat
970,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# vim:set ft=dockerfile:
971,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# explicitly set user/group IDs
972,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
973,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
974,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# grab gosu for easy step-down from root
975,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
976,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
977,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
978,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
979,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
980,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# see note below about ""*.pyc"" files"
981,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# arches officialy built by upstream
982,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
983,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
984,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
985,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
986,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
987,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
988,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
989,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
990,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
991,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
992,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
993,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
994,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
995,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile, # backwards compat
996,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# vim:set ft=dockerfile:
997,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# explicitly set user/group IDs
998,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
999,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1000,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# grab gosu for easy step-down from root
1001,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1002,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1003,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1004,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1005,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1006,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# arches officialy built by upstream
1007,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1008,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1009,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1010,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1011,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1012,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1013,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1014,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1015,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1016,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1017,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1018,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1019,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1020,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile, # backwards compat
1021,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1022,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1023,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1024,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1025,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		krb5-dev \
1026,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		openldap-dev \
1027,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1028,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1029,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1030,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1031,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1032,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
1033,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1034,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1035,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# vim:set ft=dockerfile:
1036,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# explicitly set user/group IDs
1037,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# grab gosu for easy step-down from root
1038,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1039,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1040,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1041,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1042,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# arches officialy built by upstream
1043,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1044,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1045,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1046,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1047,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1048,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1049,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1050,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1051,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1052,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1053,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1054,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile, # backwards compat
1055,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1056,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1057,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1058,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1059,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		krb5-dev \
1060,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		openldap-dev \
1061,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: prove not found
1062,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1063,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1064,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1065,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1066,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1067,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1068,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1069,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1070,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1071,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1072,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1073,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1074,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1075,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1076,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile, # backwards compat
1077,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# vim:set ft=dockerfile:
1078,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# explicitly set user/group IDs
1079,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1080,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1081,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
1082,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1083,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1084,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1085,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1086,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1087,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# see note below about ""*.pyc"" files"
1088,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# arches officialy built by upstream
1089,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1090,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1091,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1092,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1093,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1094,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1095,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1096,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1097,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1098,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1099,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1100,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1101,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1102,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile, # backwards compat
1103,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,# vim:set ft=dockerfile:
1104,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1105,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,# grab gosu for easy step-down from root
1106,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1107,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1108,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# vim:set ft=dockerfile:
1109,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# explicitly set user/group IDs
1110,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# grab gosu for easy step-down from root
1111,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1112,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1113,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1114,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1115,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
1116,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1117,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1118,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1119,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		krb5-dev \
1120,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		openldap-dev \
1121,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: prove not found
1122,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1123,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1124,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1125,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1126,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1127,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1128,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1129,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1130,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1131,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
1132,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1133,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1134,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1135,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1136,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile, # backwards compat
1137,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1138,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1139,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1140,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1141,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		krb5-dev \
1142,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		openldap-dev \
1143,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1144,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1145,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1146,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1147,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1148,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1149,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1150,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1151,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1152,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1153,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1154,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1155,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile, # backwards compat
1156,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
1157,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1158,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
1159,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1160,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,#		krb5-dev \
1161,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,#		openldap-dev \
1162,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1163,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1164,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1165,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1166,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1167,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1168,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1169,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1170,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
1171,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1172,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1173,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template, # backwards compat
1174,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1175,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1176,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1177,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1178,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		krb5-dev \
1179,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		openldap-dev \
1180,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1181,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1182,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1183,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1184,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1185,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1186,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1187,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1188,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1189,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1190,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# vim:set ft=dockerfile:
1191,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# explicitly set user/group IDs
1192,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1193,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1194,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# grab gosu for easy step-down from root
1195,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1196,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1197,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1198,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1199,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1200,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
1201,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# arches officialy built by upstream
1202,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1203,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1204,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
1205,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
1206,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1207,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1208,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1209,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1210,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1211,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1212,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
1213,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1214,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1215,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template, # backwards compat
1216,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# vim:set ft=dockerfile:
1217,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# explicitly set user/group IDs
1218,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1219,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1220,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# grab gosu for easy step-down from root
1221,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1222,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1223,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1224,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1225,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1226,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# arches officialy built by upstream
1227,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1228,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1229,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1230,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1231,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1232,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1233,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1234,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1235,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1236,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1237,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1238,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1239,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1240,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile, # backwards compat
1241,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# vim:set ft=dockerfile:
1242,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# explicitly set user/group IDs
1243,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1244,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1245,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# grab gosu for easy step-down from root
1246,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1247,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1248,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1249,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1250,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1251,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1252,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# arches officialy built by upstream
1253,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1254,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1255,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1256,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1257,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1258,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1259,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1260,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1261,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1262,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1263,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1264,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1265,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1266,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile, # backwards compat
1267,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,# vim:set ft=dockerfile:
1268,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,# explicitly set user/group IDs
1269,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,# grab gosu for easy step-down from root
1270,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1271,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1272,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1273,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
1274,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1275,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1276,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template, # backwards compat
1277,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1278,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# explicitly set user/group IDs
1279,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1280,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1281,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1282,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# vim:set ft=dockerfile:
1283,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1284,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# grab gosu for easy step-down from root
1285,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1286,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1287,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1288,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1289,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1290,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1291,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		krb5-dev \
1292,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		openldap-dev \
1293,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: prove not found
1294,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1295,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1296,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1297,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1298,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1299,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1300,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1301,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1302,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1303,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1304,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1305,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1306,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1307,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile, # backwards compat
1308,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# vim:set ft=dockerfile:
1309,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# explicitly set user/group IDs
1310,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1311,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1312,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
1313,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1314,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1315,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1316,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1317,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1318,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1319,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# arches officialy built by upstream
1320,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1321,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1322,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1323,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1324,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1325,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1326,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1327,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1328,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1329,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1330,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1331,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1332,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1333,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile, # backwards compat
1334,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# vim:set ft=dockerfile:
1335,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# explicitly set user/group IDs
1336,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# grab gosu for easy step-down from root
1337,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1338,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1339,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# arches officialy built by upstream
1340,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1341,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1342,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1343,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1344,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1345,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1346,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1347,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1348,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1349,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1350,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1351,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile, # backwards compat
1352,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# vim:set ft=dockerfile:
1353,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# explicitly set user/group IDs
1354,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# grab gosu for easy step-down from root
1355,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1356,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1357,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1358,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1359,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1360,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# vim:set ft=dockerfile:
1361,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# explicitly set user/group IDs
1362,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# grab gosu for easy step-down from root
1363,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1364,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1365,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# vim:set ft=dockerfile:
1366,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1367,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# grab gosu for easy step-down from root
1368,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1369,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1370,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
1371,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1372,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
1373,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1374,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,#		krb5-dev \
1375,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,#		openldap-dev \
1376,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1377,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1378,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1379,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1380,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1381,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1382,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1383,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1384,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
1385,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1386,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1387,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1388,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1389,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1390,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		krb5-dev \
1391,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		openldap-dev \
1392,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
1393,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1394,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1395,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1396,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1397,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1398,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1399,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1400,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1401,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1402,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
1403,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1404,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1405,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1406,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1407,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile, # backwards compat
1408,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1409,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1410,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1411,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1412,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		krb5-dev \
1413,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		openldap-dev \
1414,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1415,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1416,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1417,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1418,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1419,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1420,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1421,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1422,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1423,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1424,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1425,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile, # backwards compat
1426,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1427,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1428,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1429,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1430,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		krb5-dev \
1431,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		openldap-dev \
1432,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1433,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1434,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1435,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1436,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1437,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1438,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1439,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1440,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1441,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1442,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1443,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile, # backwards compat
1444,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1445,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1446,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1447,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1448,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		krb5-dev \
1449,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		openldap-dev \
1450,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: prove not found
1451,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1452,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1453,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1454,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1455,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1456,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1457,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1458,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1459,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1460,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1461,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1462,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1463,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1464,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1465,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile, # backwards compat
1466,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# vim:set ft=dockerfile:
1467,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1468,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# grab gosu for easy step-down from root
1469,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1470,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1471,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# vim:set ft=dockerfile:
1472,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# explicitly set user/group IDs
1473,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1474,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1475,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# grab gosu for easy step-down from root
1476,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1477,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1478,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1479,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1480,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1481,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# arches officialy built by upstream
1482,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1483,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1484,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1485,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1486,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1487,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1488,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1489,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1490,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1491,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1492,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1493,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1494,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1495,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile, # backwards compat
1496,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# vim:set ft=dockerfile:
1497,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# explicitly set user/group IDs
1498,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# grab gosu for easy step-down from root
1499,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1500,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1501,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1502,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1503,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1504,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1505,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile, # backwards compat
1506,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1507,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1508,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1509,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1510,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		krb5-dev \
1511,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		openldap-dev \
1512,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1513,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1514,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1515,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1516,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1517,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1518,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1519,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1520,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# vim:set ft=dockerfile:
1521,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# explicitly set user/group IDs
1522,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1523,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1524,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# grab gosu for easy step-down from root
1525,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1526,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1527,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1528,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1529,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1530,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# arches officialy built by upstream
1531,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1532,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1533,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1534,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1535,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1536,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1537,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1538,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1539,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1540,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1541,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1542,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1543,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1544,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile, # backwards compat
1545,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# vim:set ft=dockerfile:
1546,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# explicitly set user/group IDs
1547,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# grab gosu for easy step-down from root
1548,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1549,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1550,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1551,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1552,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1553,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1554,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile, # backwards compat
1555,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# vim:set ft=dockerfile:
1556,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# explicitly set user/group IDs
1557,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1558,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1559,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# grab gosu for easy step-down from root
1560,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1561,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1562,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1563,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1564,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1565,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# arches officialy built by upstream
1566,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1567,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1568,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1569,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1570,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1571,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1572,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1573,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1574,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1575,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1576,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1577,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1578,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1579,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile, # backwards compat
1580,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# vim:set ft=dockerfile:
1581,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# explicitly set user/group IDs
1582,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# grab gosu for easy step-down from root
1583,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1584,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1585,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# arches officialy built by upstream
1586,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1587,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1588,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1589,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1590,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1591,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1592,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1593,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1594,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1595,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1596,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1597,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile, # backwards compat
1598,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# vim:set ft=dockerfile:
1599,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# explicitly set user/group IDs
1600,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# grab gosu for easy step-down from root
1601,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1602,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1603,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1604,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1605,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1606,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1607,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1608,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1609,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1610,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		krb5-dev \
1611,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		openldap-dev \
1612,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1613,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1614,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1615,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1616,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1617,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1618,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1619,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1620,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1621,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1622,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1623,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1624,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile, # backwards compat
1625,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1626,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1627,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1628,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1629,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		krb5-dev \
1630,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		openldap-dev \
1631,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: prove not found
1632,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1633,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1634,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1635,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1636,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1637,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1638,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1639,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1640,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1641,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1642,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1643,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1644,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1645,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1646,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile, # backwards compat
1647,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1648,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1649,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1650,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1651,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1652,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# vim:set ft=dockerfile:
1653,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# explicitly set user/group IDs
1654,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# grab gosu for easy step-down from root
1655,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1656,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1657,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1658,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1659,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# arches officialy built by upstream
1660,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1661,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1662,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1663,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1664,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1665,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1666,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1667,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1668,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1669,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1670,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1671,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile, # backwards compat
1672,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# vim:set ft=dockerfile:
1673,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1674,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# grab gosu for easy step-down from root
1675,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1676,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1677,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# vim:set ft=dockerfile:
1678,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1679,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# grab gosu for easy step-down from root
1680,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1681,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1682,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# vim:set ft=dockerfile:
1683,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# explicitly set user/group IDs
1684,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# grab gosu for easy step-down from root
1685,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1686,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1687,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1688,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1689,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# arches officialy built by upstream
1690,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1691,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
1692,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
1693,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1694,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1695,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1696,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1697,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1698,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
1699,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1700,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1701,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template, # backwards compat
1702,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# vim:set ft=dockerfile:
1703,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# explicitly set user/group IDs
1704,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1705,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1706,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# grab gosu for easy step-down from root
1707,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1708,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1709,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1710,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1711,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1712,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
1713,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# arches officialy built by upstream
1714,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1715,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1716,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1717,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1718,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1719,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1720,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1721,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1722,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1723,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1724,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1725,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1726,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1727,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile, # backwards compat
1728,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1729,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1730,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1731,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1732,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		krb5-dev \
1733,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		openldap-dev \
1734,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: prove not found
1735,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1736,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1737,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1738,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1739,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1740,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1741,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1742,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1743,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1744,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1745,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1746,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1747,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1748,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1749,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1750,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# explicitly set user/group IDs
1751,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1752,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1753,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1754,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# arches officialy built by upstream
1755,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1756,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1757,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1758,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1759,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1760,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1761,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1762,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1763,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1764,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1765,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1766,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile, # backwards compat
1767,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# vim:set ft=dockerfile:
1768,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1769,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# grab gosu for easy step-down from root
1770,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1771,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1772,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# vim:set ft=dockerfile:
1773,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# explicitly set user/group IDs
1774,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# grab gosu for easy step-down from root
1775,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1776,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1777,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1778,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1779,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1780,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1781,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile, # backwards compat
1782,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# vim:set ft=dockerfile:
1783,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# explicitly set user/group IDs
1784,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# grab gosu for easy step-down from root
1785,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1786,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1787,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1788,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1789,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# vim:set ft=dockerfile:
1790,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# explicitly set user/group IDs
1791,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# grab gosu for easy step-down from root
1792,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1793,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1794,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1795,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1796,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# arches officialy built by upstream
1797,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1798,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1799,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1800,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1801,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1802,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1803,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1804,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1805,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1806,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1807,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1808,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile, # backwards compat
1809,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1810,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1811,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1812,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1813,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		krb5-dev \
1814,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		openldap-dev \
1815,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: prove not found
1816,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1817,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1818,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1819,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1820,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1821,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1822,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1823,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1824,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1825,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1826,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1827,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1828,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1829,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1830,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile, # backwards compat
1831,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1832,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1833,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1834,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1835,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		krb5-dev \
1836,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		openldap-dev \
1837,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: prove not found
1838,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1839,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1840,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1841,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
1842,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1843,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1844,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1845,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1846,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1847,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1848,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1849,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1850,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1851,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1852,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# vim:set ft=dockerfile:
1853,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# explicitly set user/group IDs
1854,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1855,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1856,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# grab gosu for easy step-down from root
1857,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1858,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1859,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1860,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1861,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
1862,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# arches officialy built by upstream
1863,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1864,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1865,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
1866,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
1867,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1868,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1869,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1870,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1871,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1872,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1873,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
1874,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1875,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1876,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template, # backwards compat
1877,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# vim:set ft=dockerfile:
1878,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# explicitly set user/group IDs
1879,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1880,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1881,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# grab gosu for easy step-down from root
1882,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1883,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1884,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1885,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1886,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1887,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# arches officialy built by upstream
1888,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1889,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1890,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1891,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1892,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1893,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1894,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1895,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1896,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1897,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1898,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1899,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1900,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1901,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile, # backwards compat
1902,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1903,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1904,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1905,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1906,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		krb5-dev \
1907,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		openldap-dev \
1908,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: prove not found
1909,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1910,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1911,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1912,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1913,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1914,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1915,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1916,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1917,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1918,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
1919,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1920,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1921,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1922,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1923,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile, # backwards compat
1924,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1925,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# explicitly set user/group IDs
1926,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1927,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1928,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1929,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1930,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1931,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1932,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1933,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile, # backwards compat
1934,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# vim:set ft=dockerfile:
1935,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# explicitly set user/group IDs
1936,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# grab gosu for easy step-down from root
1937,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1938,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1939,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1940,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1941,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1942,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1943,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile, # backwards compat
1944,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# vim:set ft=dockerfile:
1945,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# explicitly set user/group IDs
1946,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# grab gosu for easy step-down from root
1947,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1948,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1949,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1950,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1951,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# arches officialy built by upstream
1952,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1953,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1954,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1955,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1956,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1957,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1958,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1959,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1960,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1961,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1962,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1963,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile, # backwards compat
1964,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1965,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1966,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1967,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1968,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		krb5-dev \
1969,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		openldap-dev \
1970,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: prove not found
1971,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1972,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1973,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1974,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1975,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1976,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1977,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1978,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1979,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1980,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1981,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1982,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1983,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1984,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1985,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile, # backwards compat
1986,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1987,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1988,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1989,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1990,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		krb5-dev \
1991,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		openldap-dev \
1992,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1993,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1994,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1995,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1996,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1997,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1998,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1999,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2000,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2001,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2002,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2003,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
2004,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2005,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2006,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2007,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		krb5-dev \
2008,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		openldap-dev \
2009,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2010,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2011,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2012,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2013,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2014,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2015,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2016,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2017,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# vim:set ft=dockerfile:
2018,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2019,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# grab gosu for easy step-down from root
2020,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2021,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2022,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# vim:set ft=dockerfile:
2023,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# explicitly set user/group IDs
2024,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# grab gosu for easy step-down from root
2025,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2026,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2027,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2028,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2029,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# vim:set ft=dockerfile:
2030,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2031,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# grab gosu for easy step-down from root
2032,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2033,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2034,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# vim:set ft=dockerfile:
2035,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# explicitly set user/group IDs
2036,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# grab gosu for easy step-down from root
2037,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2038,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2039,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# vim:set ft=dockerfile:
2040,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2041,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# grab gosu for easy step-down from root
2042,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2043,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2044,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# vim:set ft=dockerfile:
2045,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# explicitly set user/group IDs
2046,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# grab gosu for easy step-down from root
2047,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2048,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2049,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2050,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2051,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2052,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2053,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile, # backwards compat
2054,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2055,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2056,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2057,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2058,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		krb5-dev \
2059,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		openldap-dev \
2060,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: prove not found
2061,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2062,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2063,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2064,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2065,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2066,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2067,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2068,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2069,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2070,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
2071,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2072,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2073,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2074,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2075,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile, # backwards compat
2076,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# vim:set ft=dockerfile:
2077,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# explicitly set user/group IDs
2078,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# grab gosu for easy step-down from root
2079,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2080,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2081,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# vim:set ft=dockerfile:
2082,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# explicitly set user/group IDs
2083,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# grab gosu for easy step-down from root
2084,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2085,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2086,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
2087,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2088,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2089,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2090,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		krb5-dev \
2091,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		openldap-dev \
2092,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2093,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2094,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2095,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2096,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2097,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2098,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2099,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2100,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# vim:set ft=dockerfile:
2101,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# explicitly set user/group IDs
2102,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2103,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2104,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# grab gosu for easy step-down from root
2105,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2106,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2107,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2108,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2109,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2110,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# arches officialy built by upstream
2111,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2112,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2113,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2114,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2115,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2116,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2117,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2118,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2119,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2120,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2121,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2122,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2123,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2124,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile, # backwards compat
2125,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# vim:set ft=dockerfile:
2126,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# explicitly set user/group IDs
2127,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# grab gosu for easy step-down from root
2128,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2129,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2130,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2131,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2132,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2133,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2134,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2135,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2136,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		krb5-dev \
2137,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		openldap-dev \
2138,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2139,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2140,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2141,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2142,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2143,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2144,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2145,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2146,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2147,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2148,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2149,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile, # backwards compat
2150,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# vim:set ft=dockerfile:
2151,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# explicitly set user/group IDs
2152,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# grab gosu for easy step-down from root
2153,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2154,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2155,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2156,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2157,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2158,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2159,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2160,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2161,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		krb5-dev \
2162,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		openldap-dev \
2163,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: prove not found
2164,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2165,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2166,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2167,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2168,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2169,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2170,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2171,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2172,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2173,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2174,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2175,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2176,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2177,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2178,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile, # backwards compat
2179,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# vim:set ft=dockerfile:
2180,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2181,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# grab gosu for easy step-down from root
2182,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2183,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2184,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
2185,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2186,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2187,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2188,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		krb5-dev \
2189,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		openldap-dev \
2190,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: prove not found
2191,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2192,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2193,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2194,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2195,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2196,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2197,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2198,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2199,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2200,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#p' --recursive /usr/local \
2201,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2202,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2203,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2204,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2205,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
2206,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2207,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2208,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2209,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		krb5-dev \
2210,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		openldap-dev \
2211,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2212,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2213,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2214,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2215,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2216,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2217,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2218,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2219,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2220,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2221,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2222,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile, # backwards compat
2223,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# vim:set ft=dockerfile:
2224,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# explicitly set user/group IDs
2225,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2226,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2227,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# grab gosu for easy step-down from root
2228,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2229,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2230,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2231,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2232,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2233,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2234,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# arches officialy built by upstream
2235,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2236,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2237,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2238,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2239,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2240,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2241,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2242,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2243,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2244,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2245,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2246,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2247,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2248,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile, # backwards compat
2249,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# vim:set ft=dockerfile:
2250,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2251,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# grab gosu for easy step-down from root
2252,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2253,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2254,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2255,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2256,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2257,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2258,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		krb5-dev \
2259,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		openldap-dev \
2260,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: prove not found
2261,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2262,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2263,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2264,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2265,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2266,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2267,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2268,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2269,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2270,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
2271,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2272,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2273,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2274,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2275,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile, # backwards compat
2276,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,# vim:set ft=dockerfile:
2277,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2278,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,# grab gosu for easy step-down from root
2279,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2280,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2281,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# vim:set ft=dockerfile:
2282,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2283,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# grab gosu for easy step-down from root
2284,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2285,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2286,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# vim:set ft=dockerfile:
2287,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# explicitly set user/group IDs
2288,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2289,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2290,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# grab gosu for easy step-down from root
2291,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2292,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2293,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2294,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2295,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2296,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# arches officialy built by upstream
2297,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2298,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2299,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2300,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2301,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2302,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2303,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2304,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2305,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2306,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2307,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2308,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2309,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2310,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile, # backwards compat
2311,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# vim:set ft=dockerfile:
2312,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2313,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# grab gosu for easy step-down from root
2314,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2315,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2316,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
2317,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
2318,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2319,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2320,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		krb5-dev \
2321,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		openldap-dev \
2322,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: prove not found
2323,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2324,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2325,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2326,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2327,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2328,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2329,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2330,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2331,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2332,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
2333,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2334,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2335,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2336,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2337,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# vim:set ft=dockerfile:
2338,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# explicitly set user/group IDs
2339,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# grab gosu for easy step-down from root
2340,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2341,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2342,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# vim:set ft=dockerfile:
2343,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2344,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# grab gosu for easy step-down from root
2345,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2346,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2347,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# vim:set ft=dockerfile:
2348,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# explicitly set user/group IDs
2349,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# grab gosu for easy step-down from root
2350,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2351,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2352,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# vim:set ft=dockerfile:
2353,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# explicitly set user/group IDs
2354,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2355,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2356,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# grab gosu for easy step-down from root
2357,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2358,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2359,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2360,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2361,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# arches officialy built by upstream
2362,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2363,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2364,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2365,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2366,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2367,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2368,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2369,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2370,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2371,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2372,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2373,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile, # backwards compat
2374,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2375,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2376,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2377,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2378,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		krb5-dev \
2379,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		openldap-dev \
2380,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: prove not found
2381,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2382,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2383,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2384,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2385,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2386,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2387,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2388,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2389,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2390,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2391,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2392,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2393,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2394,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile, # backwards compat
2395,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
2396,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2397,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
2398,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2399,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,#		krb5-dev \
2400,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,#		openldap-dev \
2401,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2402,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2403,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2404,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2405,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2406,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2407,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
2408,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2409,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
2410,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# explicitly set user/group IDs
2411,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
2412,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2413,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2414,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2415,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2416,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# vim:set ft=dockerfile:
2417,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# explicitly set user/group IDs
2418,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# grab gosu for easy step-down from root
2419,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2420,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2421,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2422,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2423,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2424,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2425,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		krb5-dev \
2426,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		openldap-dev \
2427,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2428,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2429,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2430,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2431,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2432,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2433,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2434,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2435,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2436,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2437,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2438,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile, # backwards compat
2439,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# vim:set ft=dockerfile:
2440,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2441,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# grab gosu for easy step-down from root
2442,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2443,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2444,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,# vim:set ft=dockerfile:
2445,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,# explicitly set user/group IDs
2446,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,# grab gosu for easy step-down from root
2447,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2448,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2449,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2450,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
2451,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2452,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2453,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template, # backwards compat
2454,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
2455,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# explicitly set user/group IDs
2456,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
2457,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2458,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2459,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2460,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2461,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2462,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
2463,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# explicitly set user/group IDs
2464,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
2465,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2466,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2467,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2468,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# arches officialy built by upstream
2469,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2470,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2471,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2472,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2473,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2474,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2475,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2476,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2477,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2478,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2479,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2480,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile, # backwards compat
2481,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,# vim:set ft=dockerfile:
2482,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2483,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2484,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,# vim:set ft=dockerfile:
2485,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,# explicitly set user/group IDs
2486,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,# grab gosu for easy step-down from root
2487,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2488,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2489,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
2490,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2491,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2492,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2493,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2494,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2495,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		krb5-dev \
2496,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		openldap-dev \
2497,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: prove not found
2498,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2499,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2500,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2501,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2502,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2503,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2504,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2505,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2506,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2507,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2508,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2509,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2510,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2511,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2512,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile, # backwards compat
2513,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2514,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2515,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2516,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2517,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		krb5-dev \
2518,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		openldap-dev \
2519,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: prove not found
2520,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2521,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2522,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2523,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2524,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2525,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2526,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2527,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2528,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2529,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2530,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2531,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2532,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2533,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2534,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile, # backwards compat
2535,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# vim:set ft=dockerfile:
2536,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# explicitly set user/group IDs
2537,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# grab gosu for easy step-down from root
2538,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2539,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2540,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# arches officialy built by upstream
2541,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2542,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2543,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2544,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2545,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2546,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2547,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2548,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2549,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2550,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2551,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2552,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile, # backwards compat
2553,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# vim:set ft=dockerfile:
2554,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# explicitly set user/group IDs
2555,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# grab gosu for easy step-down from root
2556,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2557,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2558,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2559,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2560,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# arches officialy built by upstream
2561,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2562,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2563,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2564,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2565,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2566,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2567,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2568,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2569,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2570,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2571,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2572,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile, # backwards compat
2573,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# vim:set ft=dockerfile:
2574,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# explicitly set user/group IDs
2575,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2576,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2577,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# grab gosu for easy step-down from root
2578,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2579,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2580,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2581,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2582,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2583,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# arches officialy built by upstream
2584,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2585,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2586,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2587,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2588,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2589,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2590,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2591,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2592,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2593,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2594,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2595,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2596,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2597,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile, # backwards compat
2598,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# vim:set ft=dockerfile:
2599,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# explicitly set user/group IDs
2600,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# grab gosu for easy step-down from root
2601,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2602,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2603,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2604,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2605,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2606,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2607,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile, # backwards compat
2608,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# vim:set ft=dockerfile:
2609,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2610,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# grab gosu for easy step-down from root
2611,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2612,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2613,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
2614,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2615,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
2616,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2617,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,#		krb5-dev \
2618,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,#		openldap-dev \
2619,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2620,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2621,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2622,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2623,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2624,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2625,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2626,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2627,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2628,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
2629,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2630,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2631,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template, # backwards compat
2632,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# vim:set ft=dockerfile:
2633,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# explicitly set user/group IDs
2634,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# grab gosu for easy step-down from root
2635,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2636,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2637,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2638,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2639,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2640,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2641,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile, # backwards compat
2642,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2643,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2644,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2645,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2646,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		krb5-dev \
2647,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		openldap-dev \
2648,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2649,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2650,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2651,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2652,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2653,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2654,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2655,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2656,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# vim:set ft=dockerfile:
2657,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# explicitly set user/group IDs
2658,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2659,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2660,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# grab gosu for easy step-down from root
2661,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2662,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2663,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2664,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2665,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2666,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# arches officialy built by upstream
2667,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2668,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2669,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2670,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2671,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2672,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2673,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2674,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2675,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2676,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2677,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2678,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2679,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2680,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile, # backwards compat
2681,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# vim:set ft=dockerfile:
2682,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# explicitly set user/group IDs
2683,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# grab gosu for easy step-down from root
2684,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2685,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2686,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2687,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2688,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2689,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2690,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile, # backwards compat
2691,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2692,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2693,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2694,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2695,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		krb5-dev \
2696,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		openldap-dev \
2697,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2698,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2699,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2700,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2701,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2702,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2703,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2704,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2705,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
2706,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2707,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
2708,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2709,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,#		krb5-dev \
2710,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,#		openldap-dev \
2711,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2712,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2713,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2714,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2715,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2716,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2717,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2718,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2719,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
2720,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2721,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2722,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template, # backwards compat
2723,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# vim:set ft=dockerfile:
2724,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2725,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# grab gosu for easy step-down from root
2726,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2727,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2728,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# vim:set ft=dockerfile:
2729,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# explicitly set user/group IDs
2730,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# grab gosu for easy step-down from root
2731,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2732,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2733,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# arches officialy built by upstream
2734,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2735,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2736,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2737,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2738,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2739,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2740,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2741,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2742,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2743,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2744,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2745,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile, # backwards compat
2746,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# vim:set ft=dockerfile:
2747,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# explicitly set user/group IDs
2748,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# grab gosu for easy step-down from root
2749,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2750,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2751,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2752,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2753,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# arches officialy built by upstream
2754,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2755,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2756,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2757,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2758,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2759,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2760,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2761,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2762,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2763,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2764,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2765,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile, # backwards compat
2766,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
2767,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2768,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
2769,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2770,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,#		krb5-dev \
2771,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,#		openldap-dev \
2772,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2773,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2774,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2775,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2776,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2777,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2778,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2779,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2780,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
2781,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2782,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2783,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# vim:set ft=dockerfile:
2784,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2785,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# grab gosu for easy step-down from root
2786,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2787,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2788,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2789,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# explicitly set user/group IDs
2790,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2791,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2792,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2793,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2794,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2795,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# arches officialy built by upstream
2796,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2797,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2798,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2799,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2800,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2801,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2802,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2803,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2804,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2805,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2806,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2807,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile, # backwards compat
2808,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# vim:set ft=dockerfile:
2809,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# explicitly set user/group IDs
2810,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# grab gosu for easy step-down from root
2811,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2812,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2813,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2814,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2815,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2816,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# explicitly set user/group IDs
2817,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2818,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2819,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2820,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2821,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2822,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2823,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2824,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2825,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# arches officialy built by upstream
2826,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2827,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2828,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2829,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2830,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2831,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2832,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2833,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2834,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2835,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2836,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2837,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2838,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2839,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile, # backwards compat
2840,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2841,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2842,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2843,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2844,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		krb5-dev \
2845,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		openldap-dev \
2846,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2847,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2848,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2849,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2850,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2851,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2852,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2853,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2854,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2855,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2856,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2857,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2858,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		krb5-dev \
2859,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		openldap-dev \
2860,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2861,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2862,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2863,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2864,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2865,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2866,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2867,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2868,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2869,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2870,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2871,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# vim:set ft=dockerfile:
2872,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# explicitly set user/group IDs
2873,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2874,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2875,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# grab gosu for easy step-down from root
2876,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2877,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2878,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2879,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2880,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# arches officialy built by upstream
2881,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2882,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2883,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2884,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2885,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2886,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2887,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2888,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2889,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2890,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2891,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2892,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile, # backwards compat
2893,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# vim:set ft=dockerfile:
2894,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2895,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# grab gosu for easy step-down from root
2896,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2897,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2898,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# vim:set ft=dockerfile:
2899,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# explicitly set user/group IDs
2900,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2901,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2902,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# grab gosu for easy step-down from root
2903,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2904,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2905,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2906,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2907,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2908,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# arches officialy built by upstream
2909,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2910,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2911,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2912,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2913,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2914,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2915,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2916,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2917,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2918,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2919,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2920,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2921,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2922,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile, # backwards compat
2923,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# vim:set ft=dockerfile:
2924,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# explicitly set user/group IDs
2925,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# grab gosu for easy step-down from root
2926,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2927,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2928,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2929,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2930,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,# vim:set ft=dockerfile:
2931,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,# explicitly set user/group IDs
2932,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,# grab gosu for easy step-down from root
2933,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2934,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2935,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2936,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
2937,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2938,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2939,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2940,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2941,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2942,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		krb5-dev \
2943,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		openldap-dev \
2944,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: prove not found
2945,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2946,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2947,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2948,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2949,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2950,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2951,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2952,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2953,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2954,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2955,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2956,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2957,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2958,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2959,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile, # backwards compat
2960,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# vim:set ft=dockerfile:
2961,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# explicitly set user/group IDs
2962,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2963,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2964,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# grab gosu for easy step-down from root
2965,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2966,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2967,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2968,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2969,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2970,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2971,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# arches officialy built by upstream
2972,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2973,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2974,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2975,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2976,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2977,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2978,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2979,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2980,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2981,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2982,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2983,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2984,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2985,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile, # backwards compat
2986,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# vim:set ft=dockerfile:
2987,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# explicitly set user/group IDs
2988,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# grab gosu for easy step-down from root
2989,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2990,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2991,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2992,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2993,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2994,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2995,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile, # backwards compat
2996,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
2997,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
2998,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2999,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3000,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		krb5-dev \
3001,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		openldap-dev \
3002,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: prove not found
3003,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3004,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3005,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3006,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3007,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3008,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3009,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3010,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3011,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3012,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
3013,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3014,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3015,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3016,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3017,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile, # backwards compat
3018,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3019,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3020,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3021,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3022,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		krb5-dev \
3023,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		openldap-dev \
3024,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: prove not found
3025,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3026,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3027,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3028,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3029,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3030,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3031,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3032,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3033,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3034,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
3035,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3036,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3037,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3038,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3039,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile, # backwards compat
3040,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# vim:set ft=dockerfile:
3041,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# explicitly set user/group IDs
3042,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# grab gosu for easy step-down from root
3043,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3044,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3045,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3046,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3047,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# arches officialy built by upstream
3048,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3049,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3050,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3051,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3052,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3053,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3054,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3055,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3056,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3057,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3058,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3059,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile, # backwards compat
3060,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# vim:set ft=dockerfile:
3061,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3062,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# grab gosu for easy step-down from root
3063,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3064,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3065,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# vim:set ft=dockerfile:
3066,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# explicitly set user/group IDs
3067,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# grab gosu for easy step-down from root
3068,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3069,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3070,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# arches officialy built by upstream
3071,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3072,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3073,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3074,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3075,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3076,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3077,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3078,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3079,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3080,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3081,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3082,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile, # backwards compat
3083,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# vim:set ft=dockerfile:
3084,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# explicitly set user/group IDs
3085,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3086,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3087,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# grab gosu for easy step-down from root
3088,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3089,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3090,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3091,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3092,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# see note below about ""*.pyc"" files"
3093,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# arches officialy built by upstream
3094,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3095,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3096,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3097,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3098,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3099,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3100,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3101,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3102,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3103,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3104,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3105,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3106,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3107,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile, # backwards compat
3108,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3109,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3110,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3111,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3112,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
3113,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3114,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
3115,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3116,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,#		krb5-dev \
3117,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,#		openldap-dev \
3118,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,# configure: error: prove not found
3119,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
3120,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3121,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3122,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3123,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3124,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3125,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3126,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3127,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3128,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,#p' --recursive /usr/local \
3129,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3130,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
3131,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3132,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3133,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template, # backwards compat
3134,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3135,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3136,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# vim:set ft=dockerfile:
3137,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# explicitly set user/group IDs
3138,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# grab gosu for easy step-down from root
3139,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3140,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3141,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3142,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3143,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3144,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3145,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,# vim:set ft=dockerfile:
3146,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3147,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,# grab gosu for easy step-down from root
3148,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3149,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3150,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3151,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3152,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3153,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3154,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		krb5-dev \
3155,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		openldap-dev \
3156,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3157,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3158,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3159,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3160,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3161,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3162,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3163,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3164,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# vim:set ft=dockerfile:
3165,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# explicitly set user/group IDs
3166,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# grab gosu for easy step-down from root
3167,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3168,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3169,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3170,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3171,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3172,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3173,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile, # backwards compat
3174,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3175,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3176,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3177,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3178,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		krb5-dev \
3179,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		openldap-dev \
3180,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3181,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3182,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3183,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3184,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3185,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3186,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3187,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3188,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3189,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3190,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3191,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile, # backwards compat
3192,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# vim:set ft=dockerfile:
3193,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# explicitly set user/group IDs
3194,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3195,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3196,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# grab gosu for easy step-down from root
3197,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3198,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3199,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3200,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3201,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3202,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# see note below about ""*.pyc"" files"
3203,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# arches officialy built by upstream
3204,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3205,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3206,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3207,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3208,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3209,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3210,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3211,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3212,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3213,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3214,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3215,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3216,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3217,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile, # backwards compat
3218,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
3219,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3220,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3221,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3222,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		krb5-dev \
3223,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		openldap-dev \
3224,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: prove not found
3225,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3226,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3227,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3228,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3229,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3230,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3231,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3232,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3233,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3234,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
3235,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3236,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3237,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3238,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3239,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile, # backwards compat
3240,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# vim:set ft=dockerfile:
3241,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# explicitly set user/group IDs
3242,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# grab gosu for easy step-down from root
3243,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3244,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3245,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# arches officialy built by upstream
3246,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3247,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3248,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3249,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3250,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3251,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3252,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3253,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3254,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3255,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3256,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3257,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile, # backwards compat
3258,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,# vim:set ft=dockerfile:
3259,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,# explicitly set user/group IDs
3260,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,# grab gosu for easy step-down from root
3261,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3262,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3263,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# vim:set ft=dockerfile:
3264,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# explicitly set user/group IDs
3265,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# grab gosu for easy step-down from root
3266,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3267,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3268,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3269,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3270,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3271,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3272,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile, # backwards compat
3273,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3274,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3275,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3276,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3277,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		krb5-dev \
3278,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		openldap-dev \
3279,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3280,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3281,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3282,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3283,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3284,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3285,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3286,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3287,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3288,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3289,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3290,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# vim:set ft=dockerfile:
3291,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# explicitly set user/group IDs
3292,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# grab gosu for easy step-down from root
3293,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3294,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3295,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3296,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3297,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# vim:set ft=dockerfile:
3298,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# explicitly set user/group IDs
3299,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3300,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3301,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# grab gosu for easy step-down from root
3302,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3303,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3304,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3305,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3306,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
3307,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# arches officialy built by upstream
3308,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3309,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3310,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3311,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3312,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3313,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3314,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3315,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3316,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3317,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3318,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3319,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3320,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3321,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile, # backwards compat
3322,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# vim:set ft=dockerfile:
3323,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3324,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# grab gosu for easy step-down from root
3325,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3326,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3327,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
3328,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3329,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
3330,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3331,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,#		krb5-dev \
3332,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,#		openldap-dev \
3333,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,# configure: error: prove not found
3334,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
3335,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3336,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3337,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3338,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3339,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3340,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3341,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3342,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3343,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,#p' --recursive /usr/local \
3344,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3345,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
3346,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3347,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3348,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template, # backwards compat
3349,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# vim:set ft=dockerfile:
3350,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# explicitly set user/group IDs
3351,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# grab gosu for easy step-down from root
3352,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3353,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3354,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3355,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3356,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# vim:set ft=dockerfile:
3357,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3358,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# grab gosu for easy step-down from root
3359,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3360,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3361,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# vim:set ft=dockerfile:
3362,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# explicitly set user/group IDs
3363,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3364,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3365,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# grab gosu for easy step-down from root
3366,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3367,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3368,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3369,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3370,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
3371,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# arches officialy built by upstream
3372,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3373,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3374,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3375,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3376,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3377,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3378,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3379,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3380,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3381,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3382,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3383,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3384,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3385,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile, # backwards compat
3386,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# vim:set ft=dockerfile:
3387,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# explicitly set user/group IDs
3388,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# grab gosu for easy step-down from root
3389,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3390,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3391,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3392,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# arches officialy built by upstream
3393,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3394,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3395,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3396,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3397,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3398,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3399,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3400,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3401,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3402,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3403,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3404,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile, # backwards compat
3405,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# vim:set ft=dockerfile:
3406,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# explicitly set user/group IDs
3407,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# grab gosu for easy step-down from root
3408,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3409,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3410,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3411,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3412,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3413,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3414,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3415,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3416,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3417,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		krb5-dev \
3418,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		openldap-dev \
3419,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3420,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3421,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3422,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3423,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3424,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3425,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3426,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3427,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3428,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3429,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3430,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3431,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile, # backwards compat
3432,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# vim:set ft=dockerfile:
3433,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3434,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# grab gosu for easy step-down from root
3435,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3436,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3437,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# vim:set ft=dockerfile:
3438,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# explicitly set user/group IDs
3439,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3440,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3441,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# grab gosu for easy step-down from root
3442,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3443,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3444,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3445,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3446,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3447,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# see note below about ""*.pyc"" files"
3448,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# arches officialy built by upstream
3449,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3450,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3451,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3452,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3453,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3454,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3455,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3456,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3457,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3458,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3459,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3460,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3461,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3462,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile, # backwards compat
3463,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3464,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3465,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3466,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3467,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		krb5-dev \
3468,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		openldap-dev \
3469,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: prove not found
3470,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3471,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3472,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3473,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3474,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3475,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3476,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3477,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3478,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3479,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3480,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3481,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3482,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3483,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile, # backwards compat
3484,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3485,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3486,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3487,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3488,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		krb5-dev \
3489,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		openldap-dev \
3490,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
3491,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3492,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3493,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3494,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3495,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3496,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3497,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3498,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3499,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3500,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3501,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3502,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
3503,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3504,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3505,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3506,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3507,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile, # backwards compat
3508,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# vim:set ft=dockerfile:
3509,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3510,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# grab gosu for easy step-down from root
3511,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3512,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3513,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# vim:set ft=dockerfile:
3514,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3515,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# grab gosu for easy step-down from root
3516,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3517,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3518,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,# vim:set ft=dockerfile:
3519,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3520,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3521,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
3522,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3523,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3524,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3525,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		krb5-dev \
3526,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		openldap-dev \
3527,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: prove not found
3528,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3529,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3530,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3531,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3532,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3533,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3534,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3535,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3536,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3537,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
3538,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3539,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3540,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3541,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3542,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,# vim:set ft=dockerfile:
3543,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,# explicitly set user/group IDs
3544,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,# grab gosu for easy step-down from root
3545,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3546,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3547,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3548,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
3549,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3550,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3551,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template, # backwards compat
3552,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3553,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3554,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3555,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3556,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		krb5-dev \
3557,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		openldap-dev \
3558,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3559,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3560,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3561,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3562,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3563,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3564,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3565,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3566,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3567,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3568,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3569,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3570,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3571,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3572,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile, # backwards compat
3573,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# vim:set ft=dockerfile:
3574,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# explicitly set user/group IDs
3575,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# grab gosu for easy step-down from root
3576,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3577,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3578,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3579,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3580,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3581,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3582,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile, # backwards compat
3583,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3584,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3585,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3586,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3587,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		krb5-dev \
3588,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		openldap-dev \
3589,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: prove not found
3590,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3591,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3592,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3593,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3594,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3595,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3596,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3597,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3598,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3599,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3600,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3601,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3602,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3603,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3604,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile, # backwards compat
3605,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# vim:set ft=dockerfile:
3606,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# explicitly set user/group IDs
3607,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# grab gosu for easy step-down from root
3608,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3609,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3610,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3611,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3612,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3613,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3614,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile, # backwards compat
3615,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3616,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3617,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,# vim:set ft=dockerfile:
3618,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3619,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3620,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# vim:set ft=dockerfile:
3621,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# explicitly set user/group IDs
3622,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# grab gosu for easy step-down from root
3623,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3624,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3625,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# arches officialy built by upstream
3626,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3627,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3628,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3629,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3630,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3631,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3632,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3633,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3634,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3635,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3636,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3637,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile, # backwards compat
3638,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# vim:set ft=dockerfile:
3639,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3640,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# grab gosu for easy step-down from root
3641,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3642,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3643,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3644,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3645,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3646,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3647,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		krb5-dev \
3648,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		openldap-dev \
3649,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3650,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3651,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3652,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3653,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3654,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3655,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3656,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3657,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3658,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3659,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3660,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# vim:set ft=dockerfile:
3661,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# explicitly set user/group IDs
3662,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# grab gosu for easy step-down from root
3663,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3664,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3665,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3666,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3667,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# arches officialy built by upstream
3668,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3669,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3670,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3671,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3672,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3673,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3674,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3675,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3676,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3677,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3678,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3679,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile, # backwards compat
3680,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# vim:set ft=dockerfile:
3681,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# explicitly set user/group IDs
3682,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# grab gosu for easy step-down from root
3683,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3684,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3685,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3686,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3687,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3688,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3689,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile, # backwards compat
3690,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# vim:set ft=dockerfile:
3691,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# explicitly set user/group IDs
3692,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3693,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3694,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# grab gosu for easy step-down from root
3695,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3696,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3697,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3698,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3699,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3700,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# arches officialy built by upstream
3701,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3702,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3703,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3704,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3705,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3706,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3707,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3708,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3709,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3710,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3711,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3712,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3713,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3714,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile, # backwards compat
3715,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
3716,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3717,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3718,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3719,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		krb5-dev \
3720,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		openldap-dev \
3721,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3722,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3723,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3724,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3725,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3726,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
3727,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3728,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3729,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3730,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3731,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3732,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3733,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		krb5-dev \
3734,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		openldap-dev \
3735,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# configure: error: prove not found
3736,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3737,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3738,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3739,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3740,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3741,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3742,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3743,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3744,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3745,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3746,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3747,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3748,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile, # backwards compat
3749,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3750,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3751,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3752,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3753,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		krb5-dev \
3754,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		openldap-dev \
3755,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: prove not found
3756,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3757,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3758,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3759,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3760,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3761,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3762,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3763,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3764,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3765,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3766,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3767,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3768,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3769,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3770,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile, # backwards compat
3771,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# vim:set ft=dockerfile:
3772,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# explicitly set user/group IDs
3773,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# grab gosu for easy step-down from root
3774,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3775,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3776,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# arches officialy built by upstream
3777,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3778,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3779,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3780,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3781,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3782,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3783,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3784,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3785,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3786,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3787,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3788,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile, # backwards compat
3789,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# vim:set ft=dockerfile:
3790,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# explicitly set user/group IDs
3791,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# grab gosu for easy step-down from root
3792,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3793,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3794,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# vim:set ft=dockerfile:
3795,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# explicitly set user/group IDs
3796,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# grab gosu for easy step-down from root
3797,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3798,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3799,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3800,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3801,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# arches officialy built by upstream
3802,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3803,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3804,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3805,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3806,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3807,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3808,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3809,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3810,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3811,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3812,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3813,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile, # backwards compat
3814,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# vim:set ft=dockerfile:
3815,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3816,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# grab gosu for easy step-down from root
3817,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3818,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3819,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# vim:set ft=dockerfile:
3820,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# explicitly set user/group IDs
3821,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3822,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3823,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# grab gosu for easy step-down from root
3824,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3825,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3826,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3827,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3828,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3829,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# see note below about ""*.pyc"" files"
3830,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# arches officialy built by upstream
3831,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3832,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3833,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3834,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3835,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3836,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3837,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3838,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3839,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3840,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3841,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3842,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3843,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3844,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile, # backwards compat
3845,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3846,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3847,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3848,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3849,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		krb5-dev \
3850,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		openldap-dev \
3851,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: prove not found
3852,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3853,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3854,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3855,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3856,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3857,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3858,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3859,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3860,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3861,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3862,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3863,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3864,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3865,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3866,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile, # backwards compat
3867,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3868,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3869,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3870,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3871,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		krb5-dev \
3872,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		openldap-dev \
3873,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: prove not found
3874,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3875,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3876,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3877,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3878,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3879,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3880,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3881,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3882,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3883,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3884,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3885,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3886,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3887,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3888,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile, # backwards compat
3889,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3890,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3891,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3892,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3893,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		krb5-dev \
3894,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		openldap-dev \
3895,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3896,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3897,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3898,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3899,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3900,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3901,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3902,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3903,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# vim:set ft=dockerfile:
3904,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# explicitly set user/group IDs
3905,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3906,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3907,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
3908,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3909,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3910,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3911,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3912,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3913,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# see note below about ""*.pyc"" files"
3914,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# arches officialy built by upstream
3915,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3916,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3917,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3918,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3919,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3920,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3921,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3922,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3923,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3924,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3925,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3926,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3927,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3928,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile, # backwards compat
3929,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3930,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3931,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3932,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3933,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		krb5-dev \
3934,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		openldap-dev \
3935,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3936,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3937,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3938,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3939,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3940,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3941,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3942,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3943,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3944,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
3945,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3946,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3947,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		krb5-dev \
3948,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		openldap-dev \
3949,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: prove not found
3950,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3951,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3952,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3953,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3954,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3955,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3956,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3957,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3958,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3959,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3960,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3961,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3962,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3963,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3964,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile, # backwards compat
3965,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
3966,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3967,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3968,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3969,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		krb5-dev \
3970,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		openldap-dev \
3971,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: prove not found
3972,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3973,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3974,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3975,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3976,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3977,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3978,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3979,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3980,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3981,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
3982,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3983,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3984,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3985,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3986,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile, # backwards compat
3987,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# vim:set ft=dockerfile:
3988,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# explicitly set user/group IDs
3989,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3990,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3991,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# grab gosu for easy step-down from root
3992,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3993,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3994,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3995,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3996,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
3997,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# arches officialy built by upstream
3998,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3999,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4000,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
4001,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
4002,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4003,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4004,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4005,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4006,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4007,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4008,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
4009,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4010,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4011,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template, # backwards compat
4012,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# vim:set ft=dockerfile:
4013,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# explicitly set user/group IDs
4014,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4015,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4016,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# grab gosu for easy step-down from root
4017,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4018,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4019,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4020,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4021,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
4022,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# arches officialy built by upstream
4023,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4024,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4025,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4026,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4027,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4028,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4029,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4030,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4031,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4032,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4033,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4034,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4035,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4036,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile, # backwards compat
4037,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4038,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4039,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4040,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4041,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		krb5-dev \
4042,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		openldap-dev \
4043,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: prove not found
4044,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4045,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4046,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4047,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4048,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4049,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4050,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4051,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4052,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4053,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4054,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4055,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
4056,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4057,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4058,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4059,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4060,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile, # backwards compat
4061,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,# vim:set ft=dockerfile:
4062,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4063,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4064,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# vim:set ft=dockerfile:
4065,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4066,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# grab gosu for easy step-down from root
4067,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4068,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4069,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4070,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4071,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4072,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4073,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		krb5-dev \
4074,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		openldap-dev \
4075,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: prove not found
4076,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4077,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4078,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4079,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4080,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4081,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4082,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4083,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4084,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4085,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4086,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4087,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4088,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4089,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4090,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile, # backwards compat
4091,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# vim:set ft=dockerfile:
4092,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# explicitly set user/group IDs
4093,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4094,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4095,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# grab gosu for easy step-down from root
4096,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4097,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4098,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4099,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4100,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# arches officialy built by upstream
4101,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4102,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4103,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4104,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4105,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4106,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4107,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4108,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4109,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4110,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4111,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4112,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile, # backwards compat
4113,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4114,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4115,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4116,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4117,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		krb5-dev \
4118,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		openldap-dev \
4119,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4120,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4121,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4122,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4123,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4124,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4125,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4126,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4127,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4128,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4129,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4130,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
4131,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4132,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4133,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		krb5-dev \
4134,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		openldap-dev \
4135,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: prove not found
4136,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4137,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4138,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4139,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4140,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4141,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4142,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4143,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4144,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4145,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#p' --recursive /usr/local \
4146,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4147,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4148,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4149,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4150,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile, # backwards compat
4151,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# vim:set ft=dockerfile:
4152,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# explicitly set user/group IDs
4153,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4154,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4155,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# grab gosu for easy step-down from root
4156,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4157,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4158,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4159,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4160,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4161,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# arches officialy built by upstream
4162,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4163,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4164,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4165,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4166,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4167,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4168,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4169,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4170,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4171,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4172,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4173,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4174,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4175,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile, # backwards compat
4176,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# vim:set ft=dockerfile:
4177,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# explicitly set user/group IDs
4178,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# grab gosu for easy step-down from root
4179,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4180,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4181,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# arches officialy built by upstream
4182,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4183,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4184,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4185,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4186,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4187,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4188,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4189,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4190,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4191,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4192,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4193,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile, # backwards compat
4194,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4195,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4196,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4197,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4198,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		krb5-dev \
4199,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		openldap-dev \
4200,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4201,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4202,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4203,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4204,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4205,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4206,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4207,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4208,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4209,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4210,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4211,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4212,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile, # backwards compat
4213,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# vim:set ft=dockerfile:
4214,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# explicitly set user/group IDs
4215,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4216,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4217,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# grab gosu for easy step-down from root
4218,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4219,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4220,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4221,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4222,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4223,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
4224,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# arches officialy built by upstream
4225,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4226,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4227,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
4228,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
4229,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4230,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4231,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4232,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4233,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4234,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4235,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
4236,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4237,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4238,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template, # backwards compat
4239,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# vim:set ft=dockerfile:
4240,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4241,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# grab gosu for easy step-down from root
4242,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4243,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4244,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4245,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4246,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4247,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4248,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		krb5-dev \
4249,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		openldap-dev \
4250,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: prove not found
4251,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4252,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4253,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4254,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4255,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4256,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4257,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4258,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4259,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4260,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#p' --recursive /usr/local \
4261,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4262,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4263,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4264,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4265,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile, # backwards compat
4266,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# vim:set ft=dockerfile:
4267,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# explicitly set user/group IDs
4268,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# grab gosu for easy step-down from root
4269,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4270,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4271,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4272,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4273,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4274,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4275,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4276,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4277,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4278,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		krb5-dev \
4279,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		openldap-dev \
4280,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: prove not found
4281,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4282,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4283,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4284,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4285,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4286,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4287,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4288,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4289,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4290,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4291,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4292,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4293,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4294,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4295,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4296,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile, # backwards compat
4297,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# vim:set ft=dockerfile:
4298,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# explicitly set user/group IDs
4299,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4300,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4301,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# grab gosu for easy step-down from root
4302,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4303,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4304,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4305,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4306,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
4307,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# arches officialy built by upstream
4308,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4309,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4310,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
4311,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
4312,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4313,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4314,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4315,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4316,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4317,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4318,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
4319,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4320,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4321,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template, # backwards compat
4322,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,# vim:set ft=dockerfile:
4323,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,# explicitly set user/group IDs
4324,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,# grab gosu for easy step-down from root
4325,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4326,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4327,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4328,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
4329,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4330,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4331,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template, # backwards compat
4332,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# vim:set ft=dockerfile:
4333,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# explicitly set user/group IDs
4334,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# grab gosu for easy step-down from root
4335,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4336,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4337,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4338,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4339,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# vim:set ft=dockerfile:
4340,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# explicitly set user/group IDs
4341,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# grab gosu for easy step-down from root
4342,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4343,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4344,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4345,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4346,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4347,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4348,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile, # backwards compat
4349,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
4350,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4351,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
4352,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4353,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,#		krb5-dev \
4354,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,#		openldap-dev \
4355,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4356,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4357,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4358,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4359,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4360,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4361,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
4362,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4363,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4364,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
4365,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4366,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4367,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		krb5-dev \
4368,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		openldap-dev \
4369,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: prove not found
4370,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4371,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4372,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4373,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
4374,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4375,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4376,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4377,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4378,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4379,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4380,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4381,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4382,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4383,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4384,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile, # backwards compat
4385,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
4386,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4387,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4388,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4389,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		krb5-dev \
4390,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		openldap-dev \
4391,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4392,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4393,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4394,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4395,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4396,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4397,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4398,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4399,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4400,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4401,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4402,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4403,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile, # backwards compat
4404,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
4405,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4406,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4407,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4408,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		krb5-dev \
4409,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		openldap-dev \
4410,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: prove not found
4411,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4412,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4413,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4414,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4415,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4416,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4417,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4418,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4419,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4420,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
4421,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4422,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4423,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4424,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4425,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile, # backwards compat
4426,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
4427,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4428,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4429,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4430,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		krb5-dev \
4431,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		openldap-dev \
4432,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: prove not found
4433,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4434,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4435,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4436,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4437,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4438,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4439,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4440,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4441,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4442,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#p' --recursive /usr/local \
4443,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4444,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4445,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4446,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4447,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
4448,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4449,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
4450,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4451,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,#		krb5-dev \
4452,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,#		openldap-dev \
4453,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4454,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4455,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4456,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4457,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4458,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4459,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4460,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4461,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4462,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
4463,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4464,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4465,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template, # backwards compat
4466,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4467,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4468,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4469,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4470,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		krb5-dev \
4471,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		openldap-dev \
4472,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4473,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4474,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4475,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4476,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4477,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4478,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4479,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4480,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4481,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4482,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4483,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile, # backwards compat
4484,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4485,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4486,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4487,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4488,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		krb5-dev \
4489,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		openldap-dev \
4490,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4491,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4492,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4493,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4494,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4495,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4496,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4497,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4498,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4499,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4500,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4501,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile, # backwards compat
4502,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
4503,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# explicitly set user/group IDs
4504,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4505,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4506,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
4507,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4508,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4509,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4510,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4511,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4512,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# arches officialy built by upstream
4513,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4514,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4515,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4516,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4517,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4518,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4519,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4520,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4521,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4522,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4523,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4524,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4525,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4526,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile, # backwards compat
4527,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4528,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4529,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4530,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4531,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		krb5-dev \
4532,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		openldap-dev \
4533,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
4534,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4535,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4536,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4537,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4538,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4539,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4540,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4541,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4542,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4543,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4544,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4545,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
4546,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4547,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4548,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4549,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4550,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile, # backwards compat
4551,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
4552,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4553,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4554,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4555,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		krb5-dev \
4556,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		openldap-dev \
4557,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: prove not found
4558,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4559,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4560,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4561,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4562,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4563,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4564,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4565,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4566,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4567,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#p' --recursive /usr/local \
4568,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4569,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4570,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4571,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4572,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile, # backwards compat
4573,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# vim:set ft=dockerfile:
4574,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# explicitly set user/group IDs
4575,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# grab gosu for easy step-down from root
4576,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4577,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4578,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4579,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4580,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4581,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4582,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile, # backwards compat
4583,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4584,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4585,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4586,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4587,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		krb5-dev \
4588,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		openldap-dev \
4589,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4590,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4591,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4592,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4593,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4594,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4595,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4596,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4597,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4598,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4599,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4600,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4601,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile, # backwards compat
4602,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4603,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4604,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4605,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4606,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		krb5-dev \
4607,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		openldap-dev \
4608,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4609,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4610,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4611,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4612,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4613,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4614,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4615,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4616,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4617,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4618,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4619,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4620,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile, # backwards compat
4621,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# vim:set ft=dockerfile:
4622,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# explicitly set user/group IDs
4623,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# grab gosu for easy step-down from root
4624,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4625,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4626,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4627,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4628,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4629,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4630,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile, # backwards compat
4631,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# vim:set ft=dockerfile:
4632,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# explicitly set user/group IDs
4633,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# grab gosu for easy step-down from root
4634,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4635,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4636,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
4637,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# explicitly set user/group IDs
4638,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
4639,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4640,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4641,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# arches officialy built by upstream
4642,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4643,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4644,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4645,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4646,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4647,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4648,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4649,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4650,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4651,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4652,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4653,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile, # backwards compat
4654,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# vim:set ft=dockerfile:
4655,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# explicitly set user/group IDs
4656,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4657,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4658,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# grab gosu for easy step-down from root
4659,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4660,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4661,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4662,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4663,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4664,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4665,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# arches officialy built by upstream
4666,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4667,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4668,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4669,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4670,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4671,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4672,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4673,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4674,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4675,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4676,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4677,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4678,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4679,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile, # backwards compat
4680,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4681,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4682,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4683,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4684,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		krb5-dev \
4685,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		openldap-dev \
4686,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4687,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4688,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4689,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4690,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4691,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4692,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4693,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4694,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4695,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4696,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4697,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4698,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile, # backwards compat
4699,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# vim:set ft=dockerfile:
4700,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# explicitly set user/group IDs
4701,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4702,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4703,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# grab gosu for easy step-down from root
4704,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4705,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4706,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4707,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4708,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4709,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# arches officialy built by upstream
4710,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4711,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4712,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4713,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4714,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4715,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4716,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4717,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4718,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4719,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4720,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4721,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4722,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4723,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile, # backwards compat
4724,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4725,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4726,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4727,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4728,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		krb5-dev \
4729,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		openldap-dev \
4730,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4731,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4732,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4733,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4734,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4735,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4736,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4737,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4738,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4739,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4740,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4741,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4742,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile, # backwards compat
4743,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
4744,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4745,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4746,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4747,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		krb5-dev \
4748,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		openldap-dev \
4749,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4750,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4751,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4752,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4753,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4754,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4755,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4756,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4757,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4758,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4759,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4760,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4761,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4762,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4763,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile, # backwards compat
4764,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# vim:set ft=dockerfile:
4765,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# explicitly set user/group IDs
4766,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# grab gosu for easy step-down from root
4767,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4768,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4769,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4770,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4771,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# arches officialy built by upstream
4772,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4773,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4774,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4775,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4776,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4777,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4778,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4779,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4780,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4781,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4782,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4783,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile, # backwards compat
4784,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# vim:set ft=dockerfile:
4785,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# explicitly set user/group IDs
4786,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# grab gosu for easy step-down from root
4787,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4788,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4789,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4790,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# explicitly set user/group IDs
4791,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4792,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4793,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4794,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4795,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4796,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4797,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4798,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4799,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4800,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		krb5-dev \
4801,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		openldap-dev \
4802,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: prove not found
4803,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4804,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4805,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4806,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4807,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4808,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4809,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4810,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4811,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4812,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4813,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4814,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4815,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4816,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4817,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile, # backwards compat
4818,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4819,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4820,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4821,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4822,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		krb5-dev \
4823,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		openldap-dev \
4824,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
4825,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4826,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4827,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4828,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4829,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4830,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4831,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4832,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4833,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4834,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4835,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4836,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4837,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4838,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4839,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile, # backwards compat
4840,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# vim:set ft=dockerfile:
4841,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# explicitly set user/group IDs
4842,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4843,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4844,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# grab gosu for easy step-down from root
4845,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4846,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4847,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4848,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4849,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4850,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4851,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# arches officialy built by upstream
4852,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4853,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4854,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4855,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4856,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4857,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4858,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4859,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4860,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4861,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4862,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4863,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4864,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4865,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile, # backwards compat
4866,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4867,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4868,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4869,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4870,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		krb5-dev \
4871,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		openldap-dev \
4872,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4873,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4874,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4875,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4876,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4877,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4878,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4879,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4880,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4881,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4882,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4883,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4884,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4885,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4886,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile, # backwards compat
4887,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# vim:set ft=dockerfile:
4888,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# explicitly set user/group IDs
4889,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4890,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4891,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# grab gosu for easy step-down from root
4892,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4893,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4894,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4895,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4896,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# arches officialy built by upstream
4897,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4898,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4899,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4900,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4901,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4902,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4903,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4904,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4905,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4906,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4907,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4908,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile, # backwards compat
4909,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# vim:set ft=dockerfile:
4910,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# explicitly set user/group IDs
4911,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4912,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4913,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# grab gosu for easy step-down from root
4914,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4915,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4916,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4917,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4918,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4919,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4920,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# arches officialy built by upstream
4921,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4922,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4923,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4924,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4925,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4926,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4927,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4928,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4929,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4930,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4931,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4932,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4933,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4934,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile, # backwards compat
4935,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4936,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# explicitly set user/group IDs
4937,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4938,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4939,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4940,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4941,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4942,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4943,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4944,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4945,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4946,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# arches officialy built by upstream
4947,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4948,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4949,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4950,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4951,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4952,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4953,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4954,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4955,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4956,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4957,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4958,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4959,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4960,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile, # backwards compat
4961,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# vim:set ft=dockerfile:
4962,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4963,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# grab gosu for easy step-down from root
4964,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4965,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4966,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4967,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4968,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4969,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4970,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		krb5-dev \
4971,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		openldap-dev \
4972,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4973,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4974,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4975,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4976,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4977,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4978,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4979,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4980,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4981,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4982,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4983,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4984,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile, # backwards compat
4985,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4986,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4987,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4988,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4989,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		krb5-dev \
4990,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		openldap-dev \
4991,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# configure: error: prove not found
4992,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4993,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4994,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4995,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4996,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4997,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4998,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4999,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5000,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5001,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5002,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5003,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5004,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile, # backwards compat
5005,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5006,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
5007,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5008,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5009,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		krb5-dev \
5010,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		openldap-dev \
5011,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: prove not found
5012,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5013,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5014,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5015,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5016,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5017,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5018,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5019,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5020,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5021,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5022,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5023,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5024,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5025,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5026,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile, # backwards compat
5027,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# vim:set ft=dockerfile:
5028,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# explicitly set user/group IDs
5029,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5030,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5031,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
5032,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5033,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5034,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5035,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5036,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5037,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5038,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# arches officialy built by upstream
5039,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5040,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5041,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5042,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5043,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5044,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5045,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5046,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5047,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5048,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5049,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5050,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5051,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5052,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile, # backwards compat
5053,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# vim:set ft=dockerfile:
5054,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# explicitly set user/group IDs
5055,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5056,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5057,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# grab gosu for easy step-down from root
5058,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5059,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5060,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5061,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5062,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5063,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# arches officialy built by upstream
5064,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5065,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5066,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5067,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5068,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5069,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5070,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5071,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5072,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5073,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5074,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5075,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5076,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5077,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile, # backwards compat
5078,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# vim:set ft=dockerfile:
5079,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# explicitly set user/group IDs
5080,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5081,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5082,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# grab gosu for easy step-down from root
5083,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5084,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5085,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5086,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5087,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5088,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# arches officialy built by upstream
5089,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5090,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5091,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5092,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5093,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5094,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5095,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5096,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5097,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5098,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5099,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5100,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5101,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5102,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile, # backwards compat
5103,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5104,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5105,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5106,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5107,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# vim:set ft=dockerfile:
5108,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# explicitly set user/group IDs
5109,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5110,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5111,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# grab gosu for easy step-down from root
5112,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5113,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5114,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5115,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5116,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5117,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# arches officialy built by upstream
5118,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5119,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5120,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5121,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5122,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5123,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5124,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5125,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5126,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5127,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5128,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5129,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5130,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5131,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile, # backwards compat
5132,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
5133,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5134,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
5135,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5136,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,#		krb5-dev \
5137,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,#		openldap-dev \
5138,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5139,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5140,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5141,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5142,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5143,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5144,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5145,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5146,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
5147,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5148,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5149,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template, # backwards compat
5150,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5151,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5152,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5153,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5154,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		krb5-dev \
5155,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		openldap-dev \
5156,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: prove not found
5157,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5158,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5159,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5160,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5161,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5162,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5163,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5164,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5165,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5166,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5167,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5168,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5169,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5170,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile, # backwards compat
5171,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# vim:set ft=dockerfile:
5172,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# explicitly set user/group IDs
5173,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5174,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5175,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# grab gosu for easy step-down from root
5176,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5177,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5178,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5179,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5180,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5181,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# see note below about ""*.pyc"" files"
5182,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# arches officialy built by upstream
5183,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5184,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5185,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5186,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5187,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5188,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5189,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5190,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5191,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5192,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5193,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5194,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5195,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5196,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile, # backwards compat
5197,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5198,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5199,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5200,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5201,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		krb5-dev \
5202,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		openldap-dev \
5203,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: prove not found
5204,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5205,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5206,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5207,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5208,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5209,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5210,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5211,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5212,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5213,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5214,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5215,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5216,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5217,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5218,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile, # backwards compat
5219,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# vim:set ft=dockerfile:
5220,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# explicitly set user/group IDs
5221,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# grab gosu for easy step-down from root
5222,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5223,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5224,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# arches officialy built by upstream
5225,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5226,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5227,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5228,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5229,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5230,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5231,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5232,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5233,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5234,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5235,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5236,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile, # backwards compat
5237,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5238,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5239,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
5240,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5241,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
5242,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5243,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,#		krb5-dev \
5244,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,#		openldap-dev \
5245,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5246,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5247,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5248,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5249,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5250,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
5251,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
5252,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5253,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
5254,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5255,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5256,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5257,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		krb5-dev \
5258,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		openldap-dev \
5259,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: prove not found
5260,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5261,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5262,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5263,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5264,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5265,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5266,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5267,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5268,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5269,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#p' --recursive /usr/local \
5270,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5271,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5272,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5273,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5274,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
5275,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5276,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
5277,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5278,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,#		krb5-dev \
5279,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,#		openldap-dev \
5280,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,# configure: error: prove not found
5281,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
5282,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5283,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5284,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5285,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5286,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5287,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5288,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5289,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5290,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,#p' --recursive /usr/local \
5291,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5292,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
5293,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5294,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5295,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template, # backwards compat
5296,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# vim:set ft=dockerfile:
5297,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# explicitly set user/group IDs
5298,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5299,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5300,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# grab gosu for easy step-down from root
5301,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5302,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5303,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5304,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5305,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# see note below about ""*.pyc"" files"
5306,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# arches officialy built by upstream
5307,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5308,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5309,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5310,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5311,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5312,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5313,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5314,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5315,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5316,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5317,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5318,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5319,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5320,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile, # backwards compat
5321,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5322,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5323,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5324,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5325,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		krb5-dev \
5326,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		openldap-dev \
5327,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5328,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5329,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5330,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5331,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5332,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5333,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5334,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5335,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5336,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5337,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5338,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile, # backwards compat
5339,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# vim:set ft=dockerfile:
5340,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# explicitly set user/group IDs
5341,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# grab gosu for easy step-down from root
5342,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5343,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5344,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5345,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5346,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5347,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5348,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# vim:set ft=dockerfile:
5349,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# explicitly set user/group IDs
5350,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# grab gosu for easy step-down from root
5351,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5352,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5353,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5354,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5355,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# arches officialy built by upstream
5356,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5357,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5358,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5359,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5360,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5361,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5362,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5363,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5364,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5365,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5366,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5367,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile, # backwards compat
5368,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5369,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5370,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5371,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5372,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5373,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5374,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		krb5-dev \
5375,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		openldap-dev \
5376,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: prove not found
5377,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5378,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5379,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5380,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5381,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5382,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5383,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5384,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5385,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5386,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
5387,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5388,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5389,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5390,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5391,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile, # backwards compat
5392,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# vim:set ft=dockerfile:
5393,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# explicitly set user/group IDs
5394,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5395,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5396,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# grab gosu for easy step-down from root
5397,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5398,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5399,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5400,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5401,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5402,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# arches officialy built by upstream
5403,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5404,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5405,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5406,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5407,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5408,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5409,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5410,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5411,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5412,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5413,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5414,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5415,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5416,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile, # backwards compat
5417,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
5418,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# explicitly set user/group IDs
5419,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5420,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5421,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
5422,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5423,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5424,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5425,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5426,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5427,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# arches officialy built by upstream
5428,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5429,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5430,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5431,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5432,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5433,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5434,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5435,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5436,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5437,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5438,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5439,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5440,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5441,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile, # backwards compat
5442,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# vim:set ft=dockerfile:
5443,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# explicitly set user/group IDs
5444,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5445,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5446,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# grab gosu for easy step-down from root
5447,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5448,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5449,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5450,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5451,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
5452,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# arches officialy built by upstream
5453,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5454,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5455,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5456,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5457,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5458,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5459,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5460,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5461,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5462,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5463,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5464,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5465,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5466,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile, # backwards compat
5467,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,# vim:set ft=dockerfile:
5468,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5469,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,# grab gosu for easy step-down from root
5470,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5471,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5472,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# vim:set ft=dockerfile:
5473,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# explicitly set user/group IDs
5474,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5475,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5476,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# grab gosu for easy step-down from root
5477,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5478,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5479,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5480,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5481,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5482,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# arches officialy built by upstream
5483,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5484,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5485,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5486,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5487,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5488,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5489,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5490,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5491,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5492,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5493,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5494,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5495,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5496,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile, # backwards compat
5497,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# vim:set ft=dockerfile:
5498,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# explicitly set user/group IDs
5499,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# grab gosu for easy step-down from root
5500,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5501,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5502,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# vim:set ft=dockerfile:
5503,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# explicitly set user/group IDs
5504,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# grab gosu for easy step-down from root
5505,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5506,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5507,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5508,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5509,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# vim:set ft=dockerfile:
5510,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# explicitly set user/group IDs
5511,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# grab gosu for easy step-down from root
5512,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5513,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5514,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5515,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5516,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# vim:set ft=dockerfile:
5517,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# explicitly set user/group IDs
5518,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5519,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5520,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# grab gosu for easy step-down from root
5521,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5522,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5523,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5524,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5525,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5526,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# arches officialy built by upstream
5527,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5528,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5529,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5530,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5531,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5532,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5533,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5534,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5535,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5536,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5537,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5538,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5539,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5540,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile, # backwards compat
5541,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5542,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5543,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5544,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5545,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		krb5-dev \
5546,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		openldap-dev \
5547,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5548,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5549,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5550,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5551,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5552,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5553,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5554,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5555,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# vim:set ft=dockerfile:
5556,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# explicitly set user/group IDs
5557,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5558,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5559,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# grab gosu for easy step-down from root
5560,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5561,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5562,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5563,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5564,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5565,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# arches officialy built by upstream
5566,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5567,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5568,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5569,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5570,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5571,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5572,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5573,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5574,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5575,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5576,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5577,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5578,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5579,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile, # backwards compat
5580,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5581,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5582,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5583,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5584,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		krb5-dev \
5585,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		openldap-dev \
5586,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5587,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5588,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5589,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5590,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5591,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5592,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5593,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5594,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# vim:set ft=dockerfile:
5595,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# explicitly set user/group IDs
5596,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# grab gosu for easy step-down from root
5597,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5598,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5599,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5600,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5601,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5602,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5603,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile, # backwards compat
5604,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# vim:set ft=dockerfile:
5605,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# explicitly set user/group IDs
5606,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# grab gosu for easy step-down from root
5607,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5608,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5609,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5610,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5611,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5612,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5613,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		krb5-dev \
5614,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		openldap-dev \
5615,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: prove not found
5616,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5617,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5618,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5619,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5620,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5621,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5622,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5623,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5624,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5625,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5626,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5627,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5628,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5629,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5630,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile, # backwards compat
5631,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5632,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5633,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5634,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5635,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		krb5-dev \
5636,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		openldap-dev \
5637,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: prove not found
5638,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5639,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5640,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5641,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5642,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5643,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5644,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5645,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5646,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5647,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5648,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5649,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5650,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5651,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5652,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile, # backwards compat
5653,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# vim:set ft=dockerfile:
5654,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# explicitly set user/group IDs
5655,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# grab gosu for easy step-down from root
5656,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5657,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5658,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5659,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5660,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5661,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5662,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5663,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5664,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		krb5-dev \
5665,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		openldap-dev \
5666,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5667,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5668,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5669,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5670,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5671,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5672,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5673,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5674,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5675,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5676,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5677,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5678,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile, # backwards compat
5679,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5680,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5681,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5682,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5683,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		krb5-dev \
5684,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		openldap-dev \
5685,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5686,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5687,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5688,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5689,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5690,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
5691,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5692,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5693,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
5694,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5695,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5696,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5697,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		krb5-dev \
5698,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		openldap-dev \
5699,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: prove not found
5700,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5701,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5702,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5703,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5704,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5705,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5706,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5707,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5708,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5709,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#p' --recursive /usr/local \
5710,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5711,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5712,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5713,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5714,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# vim:set ft=dockerfile:
5715,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# explicitly set user/group IDs
5716,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5717,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5718,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
5719,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5720,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5721,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5722,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5723,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5724,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# see note below about ""*.pyc"" files"
5725,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# arches officialy built by upstream
5726,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5727,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5728,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5729,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5730,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5731,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5732,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5733,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5734,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5735,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5736,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5737,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5738,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5739,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile, # backwards compat
5740,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5741,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5742,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5743,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5744,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		krb5-dev \
5745,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		openldap-dev \
5746,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: prove not found
5747,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5748,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5749,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5750,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5751,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5752,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5753,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5754,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5755,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5756,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5757,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5758,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
5759,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5760,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5761,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5762,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5763,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile, # backwards compat
5764,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5765,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5766,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5767,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5768,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		krb5-dev \
5769,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		openldap-dev \
5770,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: prove not found
5771,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5772,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5773,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5774,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5775,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5776,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5777,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5778,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5779,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5780,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5781,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5782,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5783,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5784,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5785,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile, # backwards compat
5786,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# vim:set ft=dockerfile:
5787,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# explicitly set user/group IDs
5788,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# grab gosu for easy step-down from root
5789,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5790,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5791,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5792,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5793,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5794,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5795,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile, # backwards compat
5796,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5797,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5798,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5799,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5800,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		krb5-dev \
5801,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		openldap-dev \
5802,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: prove not found
5803,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5804,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5805,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5806,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5807,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5808,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5809,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5810,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5811,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5812,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5813,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5814,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5815,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5816,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5817,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile, # backwards compat
5818,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# vim:set ft=dockerfile:
5819,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# explicitly set user/group IDs
5820,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5821,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5822,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# grab gosu for easy step-down from root
5823,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5824,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5825,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5826,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5827,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5828,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5829,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# arches officialy built by upstream
5830,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5831,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5832,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5833,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5834,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5835,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5836,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5837,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5838,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5839,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5840,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5841,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5842,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5843,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile, # backwards compat
5844,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5845,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5846,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5847,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5848,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		krb5-dev \
5849,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		openldap-dev \
5850,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5851,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5852,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5853,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5854,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5855,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5856,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5857,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5858,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5859,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5860,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5861,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5862,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile, # backwards compat
5863,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5864,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5865,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5866,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5867,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		krb5-dev \
5868,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		openldap-dev \
5869,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5870,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5871,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5872,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5873,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5874,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5875,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5876,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5877,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5878,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5879,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
5880,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5881,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
5882,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5883,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,#		krb5-dev \
5884,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,#		openldap-dev \
5885,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5886,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5887,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5888,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5889,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5890,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5891,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5892,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5893,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
5894,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5895,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5896,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5897,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5898,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5899,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		krb5-dev \
5900,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		openldap-dev \
5901,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: prove not found
5902,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5903,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5904,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5905,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5906,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5907,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5908,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5909,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5910,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5911,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5912,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5913,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5914,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5915,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5916,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile, # backwards compat
5917,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
5918,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5919,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5920,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5921,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		krb5-dev \
5922,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		openldap-dev \
5923,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: prove not found
5924,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5925,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5926,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5927,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5928,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5929,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5930,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5931,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5932,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5933,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#p' --recursive /usr/local \
5934,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5935,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5936,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5937,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5938,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile, # backwards compat
5939,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# vim:set ft=dockerfile:
5940,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# explicitly set user/group IDs
5941,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# grab gosu for easy step-down from root
5942,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5943,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5944,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5945,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5946,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5947,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# vim:set ft=dockerfile:
5948,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5949,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# grab gosu for easy step-down from root
5950,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5951,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5952,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5953,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5954,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5955,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5956,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		krb5-dev \
5957,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		openldap-dev \
5958,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# configure: error: prove not found
5959,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5960,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5961,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5962,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5963,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5964,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5965,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5966,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5967,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5968,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5969,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5970,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5971,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile, # backwards compat
5972,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5973,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5974,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5975,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5976,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		krb5-dev \
5977,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		openldap-dev \
5978,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: prove not found
5979,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5980,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5981,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5982,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5983,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5984,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5985,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5986,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5987,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5988,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5989,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5990,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5991,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5992,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5993,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile, # backwards compat
5994,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
5995,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5996,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
5997,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5998,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,#		krb5-dev \
5999,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,#		openldap-dev \
6000,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6001,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6002,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6003,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6004,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6005,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6006,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6007,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6008,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6009,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
6010,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6011,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6012,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template, # backwards compat
6013,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6014,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6015,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6016,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6017,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		krb5-dev \
6018,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		openldap-dev \
6019,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6020,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6021,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6022,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6023,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6024,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6025,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6026,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6027,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6028,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6029,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6030,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# vim:set ft=dockerfile:
6031,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6032,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# grab gosu for easy step-down from root
6033,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6034,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6035,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6036,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6037,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6038,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6039,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		krb5-dev \
6040,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		openldap-dev \
6041,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: prove not found
6042,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6043,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6044,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6045,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6046,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6047,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6048,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6049,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6050,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6051,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6052,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6053,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6054,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6055,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6056,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile, # backwards compat
6057,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# vim:set ft=dockerfile:
6058,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# explicitly set user/group IDs
6059,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6060,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6061,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# grab gosu for easy step-down from root
6062,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6063,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6064,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6065,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6066,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# see note below about ""*.pyc"" files"
6067,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# arches officialy built by upstream
6068,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6069,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6070,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6071,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6072,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6073,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6074,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6075,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6076,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6077,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6078,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6079,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6080,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6081,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile, # backwards compat
6082,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# vim:set ft=dockerfile:
6083,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# explicitly set user/group IDs
6084,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6085,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6086,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# grab gosu for easy step-down from root
6087,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6088,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6089,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6090,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6091,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# see note below about ""*.pyc"" files"
6092,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# arches officialy built by upstream
6093,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6094,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6095,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6096,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6097,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6098,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6099,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6100,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6101,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6102,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6103,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6104,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6105,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6106,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile, # backwards compat
6107,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6108,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6109,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6110,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6111,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		krb5-dev \
6112,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		openldap-dev \
6113,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: prove not found
6114,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6115,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6116,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6117,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6118,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6119,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6120,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6121,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6122,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6123,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6124,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6125,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6126,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6127,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6128,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# vim:set ft=dockerfile:
6129,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# explicitly set user/group IDs
6130,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6131,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6132,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# grab gosu for easy step-down from root
6133,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6134,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6135,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6136,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6137,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6138,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6139,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# arches officialy built by upstream
6140,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6141,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6142,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6143,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6144,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6145,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6146,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6147,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6148,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6149,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6150,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6151,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6152,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6153,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile, # backwards compat
6154,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
6155,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6156,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
6157,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6158,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,#		krb5-dev \
6159,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,#		openldap-dev \
6160,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,# configure: error: prove not found
6161,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
6162,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6163,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6164,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6165,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6166,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6167,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6168,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6169,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6170,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,#p' --recursive /usr/local \
6171,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6172,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
6173,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6174,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6175,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template, # backwards compat
6176,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6177,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6178,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6179,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6180,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		krb5-dev \
6181,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		openldap-dev \
6182,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# configure: error: prove not found
6183,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6184,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6185,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6186,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6187,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6188,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6189,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6190,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6191,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6192,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6193,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6194,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6195,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6196,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6197,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile, # backwards compat
6198,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# vim:set ft=dockerfile:
6199,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6200,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# grab gosu for easy step-down from root
6201,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6202,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6203,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
6204,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6205,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
6206,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6207,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,#		krb5-dev \
6208,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,#		openldap-dev \
6209,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6210,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6211,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6212,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6213,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6214,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6215,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6216,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6217,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6218,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
6219,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6220,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6221,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template, # backwards compat
6222,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# vim:set ft=dockerfile:
6223,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6224,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# grab gosu for easy step-down from root
6225,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6226,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6227,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
6228,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6229,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6230,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6231,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		krb5-dev \
6232,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		openldap-dev \
6233,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6234,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6235,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6236,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6237,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6238,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6239,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6240,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6241,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6242,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6243,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6244,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6245,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6246,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6247,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile, # backwards compat
6248,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6249,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6250,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6251,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6252,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		krb5-dev \
6253,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		openldap-dev \
6254,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6255,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6256,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6257,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6258,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6259,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6260,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6261,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6262,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6263,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6264,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6265,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile, # backwards compat
6266,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# vim:set ft=dockerfile:
6267,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6268,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# grab gosu for easy step-down from root
6269,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6270,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6271,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# vim:set ft=dockerfile:
6272,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# explicitly set user/group IDs
6273,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# grab gosu for easy step-down from root
6274,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6275,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6276,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# vim:set ft=dockerfile:
6277,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6278,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# grab gosu for easy step-down from root
6279,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6280,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6281,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# vim:set ft=dockerfile:
6282,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6283,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# grab gosu for easy step-down from root
6284,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6285,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6286,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6287,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6288,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6289,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6290,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		krb5-dev \
6291,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		openldap-dev \
6292,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6293,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6294,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6295,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6296,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6297,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6298,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6299,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6300,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6301,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6302,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6303,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# vim:set ft=dockerfile:
6304,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6305,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# grab gosu for easy step-down from root
6306,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6307,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6308,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# vim:set ft=dockerfile:
6309,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6310,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# grab gosu for easy step-down from root
6311,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6312,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6313,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# vim:set ft=dockerfile:
6314,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# explicitly set user/group IDs
6315,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6316,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6317,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# grab gosu for easy step-down from root
6318,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6319,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6320,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6321,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6322,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
6323,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# arches officialy built by upstream
6324,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6325,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6326,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6327,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6328,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6329,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6330,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6331,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6332,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6333,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6334,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6335,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6336,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6337,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile, # backwards compat
6338,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6339,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6340,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6341,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6342,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		krb5-dev \
6343,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		openldap-dev \
6344,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: prove not found
6345,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6346,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6347,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6348,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6349,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6350,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6351,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6352,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6353,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6354,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6355,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6356,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6357,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6358,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6359,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6360,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6361,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6362,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6363,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		krb5-dev \
6364,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		openldap-dev \
6365,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: prove not found
6366,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6367,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6368,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6369,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6370,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6371,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6372,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6373,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6374,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6375,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6376,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6377,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6378,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6379,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6380,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile, # backwards compat
6381,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6382,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6383,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6384,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6385,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		krb5-dev \
6386,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		openldap-dev \
6387,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6388,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6389,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6390,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6391,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6392,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6393,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6394,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6395,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6396,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6397,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6398,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile, # backwards compat
6399,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6400,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6401,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6402,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6403,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		krb5-dev \
6404,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		openldap-dev \
6405,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
6406,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6407,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6408,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6409,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6410,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6411,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6412,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6413,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6414,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6415,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
6416,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6417,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6418,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6419,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6420,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile, # backwards compat
6421,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,# vim:set ft=dockerfile:
6422,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,# explicitly set user/group IDs
6423,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,# grab gosu for easy step-down from root
6424,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6425,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6426,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# vim:set ft=dockerfile:
6427,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# explicitly set user/group IDs
6428,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# grab gosu for easy step-down from root
6429,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6430,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6431,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6432,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# arches officialy built by upstream
6433,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6434,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6435,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6436,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6437,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6438,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6439,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6440,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6441,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6442,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6443,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6444,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile, # backwards compat
6445,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# vim:set ft=dockerfile:
6446,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# explicitly set user/group IDs
6447,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# grab gosu for easy step-down from root
6448,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6449,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6450,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6451,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6452,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# arches officialy built by upstream
6453,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6454,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6455,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6456,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6457,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6458,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6459,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6460,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6461,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6462,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6463,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6464,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile, # backwards compat
6465,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# vim:set ft=dockerfile:
6466,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6467,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# grab gosu for easy step-down from root
6468,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6469,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6470,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# vim:set ft=dockerfile:
6471,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6472,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# grab gosu for easy step-down from root
6473,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6474,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6475,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6476,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6477,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6478,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6479,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		krb5-dev \
6480,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		openldap-dev \
6481,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6482,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6483,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6484,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6485,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6486,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# vim:set ft=dockerfile:
6487,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# explicitly set user/group IDs
6488,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# grab gosu for easy step-down from root
6489,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6490,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6491,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6492,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6493,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# arches officialy built by upstream
6494,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6495,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
6496,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
6497,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6498,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6499,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6500,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6501,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6502,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
6503,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6504,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6505,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template, # backwards compat
6506,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
6507,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6508,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
6509,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6510,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,#		krb5-dev \
6511,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,#		openldap-dev \
6512,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,# configure: error: prove not found
6513,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6514,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6515,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6516,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6517,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6518,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6519,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6520,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6521,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6522,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
6523,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6524,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6525,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template, # backwards compat
6526,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,# vim:set ft=dockerfile:
6527,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6528,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6529,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# vim:set ft=dockerfile:
6530,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# explicitly set user/group IDs
6531,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6532,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6533,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# grab gosu for easy step-down from root
6534,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6535,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6536,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6537,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6538,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# see note below about ""*.pyc"" files"
6539,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# arches officialy built by upstream
6540,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6541,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6542,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6543,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6544,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6545,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6546,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6547,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6548,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6549,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6550,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6551,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6552,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6553,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile, # backwards compat
6554,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# vim:set ft=dockerfile:
6555,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# explicitly set user/group IDs
6556,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# grab gosu for easy step-down from root
6557,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6558,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6559,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6560,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# arches officialy built by upstream
6561,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6562,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6563,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6564,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6565,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6566,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6567,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6568,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6569,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6570,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6571,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6572,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile, # backwards compat
6573,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6574,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6575,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6576,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6577,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		krb5-dev \
6578,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		openldap-dev \
6579,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: prove not found
6580,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6581,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6582,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6583,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6584,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6585,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6586,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6587,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6588,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6589,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6590,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6591,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
6592,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6593,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6594,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6595,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6596,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile, # backwards compat
6597,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6598,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6599,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6600,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6601,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6602,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6603,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		krb5-dev \
6604,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		openldap-dev \
6605,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: prove not found
6606,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6607,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6608,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6609,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6610,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6611,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6612,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6613,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6614,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6615,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6616,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6617,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6618,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6619,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6620,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile, # backwards compat
6621,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# vim:set ft=dockerfile:
6622,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6623,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# grab gosu for easy step-down from root
6624,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6625,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6626,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# vim:set ft=dockerfile:
6627,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# explicitly set user/group IDs
6628,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6629,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6630,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6631,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6632,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6633,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6634,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6635,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6636,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6637,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# arches officialy built by upstream
6638,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6639,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6640,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6641,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6642,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6643,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6644,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6645,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6646,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6647,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6648,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6649,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6650,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6651,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile, # backwards compat
6652,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# vim:set ft=dockerfile:
6653,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# explicitly set user/group IDs
6654,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# grab gosu for easy step-down from root
6655,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6656,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6657,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
6658,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6659,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
6660,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6661,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,#		krb5-dev \
6662,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,#		openldap-dev \
6663,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6664,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6665,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6666,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6667,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6668,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
6669,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
6670,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6671,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# vim:set ft=dockerfile:
6672,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# explicitly set user/group IDs
6673,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6674,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6675,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# grab gosu for easy step-down from root
6676,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6677,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6678,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6679,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6680,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# arches officialy built by upstream
6681,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6682,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6683,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6684,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6685,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6686,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6687,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6688,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6689,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6690,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6691,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6692,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile, # backwards compat
6693,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# vim:set ft=dockerfile:
6694,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6695,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# grab gosu for easy step-down from root
6696,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6697,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6698,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# vim:set ft=dockerfile:
6699,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# explicitly set user/group IDs
6700,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# grab gosu for easy step-down from root
6701,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6702,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6703,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,# vim:set ft=dockerfile:
6704,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,# explicitly set user/group IDs
6705,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,# grab gosu for easy step-down from root
6706,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6707,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6708,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6709,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
6710,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6711,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# vim:set ft=dockerfile:
6712,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# explicitly set user/group IDs
6713,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# grab gosu for easy step-down from root
6714,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6715,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6716,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6717,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6718,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6719,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6720,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile, # backwards compat
6721,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# vim:set ft=dockerfile:
6722,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# explicitly set user/group IDs
6723,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# grab gosu for easy step-down from root
6724,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6725,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6726,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6727,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6728,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6729,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6730,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile, # backwards compat
6731,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# vim:set ft=dockerfile:
6732,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# explicitly set user/group IDs
6733,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# grab gosu for easy step-down from root
6734,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6735,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6736,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6737,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6738,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6739,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6740,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile, # backwards compat
6741,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# vim:set ft=dockerfile:
6742,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# explicitly set user/group IDs
6743,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6744,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6745,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# grab gosu for easy step-down from root
6746,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6747,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6748,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6749,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6750,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6751,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# arches officialy built by upstream
6752,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6753,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6754,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6755,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6756,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6757,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6758,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6759,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6760,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6761,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6762,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6763,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6764,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6765,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile, # backwards compat
6766,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6767,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6768,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6769,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6770,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		krb5-dev \
6771,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		openldap-dev \
6772,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: prove not found
6773,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6774,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6775,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6776,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6777,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6778,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6779,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6780,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6781,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6782,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6783,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6784,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6785,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6786,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6787,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile, # backwards compat
6788,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6789,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6790,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6791,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6792,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		krb5-dev \
6793,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		openldap-dev \
6794,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: prove not found
6795,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6796,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6797,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6798,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6799,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6800,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6801,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6802,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6803,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6804,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6805,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6806,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6807,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6808,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6809,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile, # backwards compat
6810,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6811,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6812,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6813,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6814,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		krb5-dev \
6815,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		openldap-dev \
6816,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: prove not found
6817,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6818,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6819,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6820,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
6821,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6822,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6823,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6824,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6825,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6826,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6827,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6828,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6829,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6830,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6831,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile, # backwards compat
6832,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6833,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6834,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6835,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6836,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		krb5-dev \
6837,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		openldap-dev \
6838,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: prove not found
6839,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6840,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6841,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6842,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6843,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6844,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6845,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6846,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6847,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6848,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6849,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6850,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6851,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6852,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6853,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile, # backwards compat
6854,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# vim:set ft=dockerfile:
6855,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# explicitly set user/group IDs
6856,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# grab gosu for easy step-down from root
6857,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6858,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6859,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6860,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6861,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# arches officialy built by upstream
6862,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6863,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6864,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6865,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6866,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6867,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6868,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6869,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6870,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6871,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6872,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6873,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile, # backwards compat
6874,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# vim:set ft=dockerfile:
6875,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# explicitly set user/group IDs
6876,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6877,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6878,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# grab gosu for easy step-down from root
6879,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6880,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6881,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6882,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6883,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6884,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# arches officialy built by upstream
6885,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6886,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6887,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6888,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6889,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6890,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6891,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6892,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6893,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6894,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6895,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6896,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6897,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6898,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile, # backwards compat
6899,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# vim:set ft=dockerfile:
6900,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6901,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# grab gosu for easy step-down from root
6902,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6903,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6904,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,# vim:set ft=dockerfile:
6905,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,# explicitly set user/group IDs
6906,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,# grab gosu for easy step-down from root
6907,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6908,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6909,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6910,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
6911,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6912,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6913,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template, # backwards compat
6914,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# vim:set ft=dockerfile:
6915,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# explicitly set user/group IDs
6916,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# grab gosu for easy step-down from root
6917,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6918,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6919,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6920,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6921,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6922,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6923,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile, # backwards compat
6924,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# vim:set ft=dockerfile:
6925,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# explicitly set user/group IDs
6926,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# grab gosu for easy step-down from root
6927,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6928,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6929,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# arches officialy built by upstream
6930,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6931,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6932,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6933,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6934,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6935,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6936,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6937,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6938,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6939,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6940,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6941,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile, # backwards compat
6942,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6943,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6944,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6945,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6946,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		krb5-dev \
6947,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		openldap-dev \
6948,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6949,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6950,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6951,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6952,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6953,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6954,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6955,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6956,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# vim:set ft=dockerfile:
6957,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# explicitly set user/group IDs
6958,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6959,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6960,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# grab gosu for easy step-down from root
6961,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6962,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6963,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6964,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6965,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6966,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# arches officialy built by upstream
6967,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6968,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6969,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6970,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6971,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6972,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6973,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6974,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6975,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6976,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6977,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6978,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6979,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6980,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile, # backwards compat
6981,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6982,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6983,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6984,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6985,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		krb5-dev \
6986,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		openldap-dev \
6987,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: prove not found
6988,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6989,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6990,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6991,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6992,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6993,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6994,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6995,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6996,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6997,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6998,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6999,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7000,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7001,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7002,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile, # backwards compat
7003,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# vim:set ft=dockerfile:
7004,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# explicitly set user/group IDs
7005,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# grab gosu for easy step-down from root
7006,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7007,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7008,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7009,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# arches officialy built by upstream
7010,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7011,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
7012,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
7013,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7014,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7015,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7016,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7017,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7018,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
7019,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7020,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7021,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template, # backwards compat
7022,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7023,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7024,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7025,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7026,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		krb5-dev \
7027,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		openldap-dev \
7028,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7029,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7030,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7031,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7032,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7033,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7034,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7035,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7036,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
7037,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7038,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7039,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7040,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		krb5-dev \
7041,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		openldap-dev \
7042,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: prove not found
7043,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7044,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7045,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7046,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7047,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7048,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7049,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7050,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7051,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7052,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#p' --recursive /usr/local \
7053,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7054,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7055,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7056,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7057,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# vim:set ft=dockerfile:
7058,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# explicitly set user/group IDs
7059,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7060,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7061,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7062,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7063,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7064,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7065,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7066,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7067,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# see note below about ""*.pyc"" files"
7068,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# arches officialy built by upstream
7069,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7070,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7071,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7072,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
7073,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7074,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7075,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7076,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7077,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7078,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7079,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7080,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7081,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7082,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7083,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile, # backwards compat
7084,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# vim:set ft=dockerfile:
7085,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7086,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# grab gosu for easy step-down from root
7087,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7088,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7089,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# vim:set ft=dockerfile:
7090,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7091,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# grab gosu for easy step-down from root
7092,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7093,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7094,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
7095,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7096,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
7097,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7098,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,#		krb5-dev \
7099,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,#		openldap-dev \
7100,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7101,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7102,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7103,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7104,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7105,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7106,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7107,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7108,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
7109,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7110,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7111,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template, # backwards compat
7112,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# vim:set ft=dockerfile:
7113,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# explicitly set user/group IDs
7114,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# grab gosu for easy step-down from root
7115,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7116,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7117,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7118,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7119,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7120,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# vim:set ft=dockerfile:
7121,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# explicitly set user/group IDs
7122,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# grab gosu for easy step-down from root
7123,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7124,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7125,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7126,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# arches officialy built by upstream
7127,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7128,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7129,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7130,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7131,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7132,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7133,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7134,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7135,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7136,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7137,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7138,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile, # backwards compat
7139,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7140,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7141,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7142,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7143,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		krb5-dev \
7144,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		openldap-dev \
7145,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: prove not found
7146,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7147,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7148,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7149,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7150,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7151,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7152,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7153,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7154,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7155,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7156,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7157,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7158,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7159,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile, # backwards compat
7160,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7161,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7162,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7163,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7164,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		krb5-dev \
7165,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		openldap-dev \
7166,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7167,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7168,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7169,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7170,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7171,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7172,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7173,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7174,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7175,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7176,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7177,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7178,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		krb5-dev \
7179,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		openldap-dev \
7180,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7181,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7182,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7183,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7184,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7185,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7186,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7187,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7188,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# vim:set ft=dockerfile:
7189,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7190,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# grab gosu for easy step-down from root
7191,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7192,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7193,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# vim:set ft=dockerfile:
7194,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# explicitly set user/group IDs
7195,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7196,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7197,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# grab gosu for easy step-down from root
7198,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7199,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7200,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7201,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7202,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7203,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# arches officialy built by upstream
7204,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7205,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7206,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7207,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7208,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7209,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7210,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7211,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7212,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7213,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7214,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7215,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7216,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7217,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile, # backwards compat
7218,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7219,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7220,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7221,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7222,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		krb5-dev \
7223,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		openldap-dev \
7224,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: prove not found
7225,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7226,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7227,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7228,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7229,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7230,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7231,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7232,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7233,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7234,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7235,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7236,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7237,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7238,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7239,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7240,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile, # backwards compat
7241,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7242,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7243,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7244,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7245,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		krb5-dev \
7246,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		openldap-dev \
7247,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: prove not found
7248,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7249,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7250,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7251,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7252,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7253,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7254,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7255,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7256,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7257,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7258,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7259,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7260,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7261,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7262,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile, # backwards compat
7263,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7264,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
7265,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7266,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7267,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		krb5-dev \
7268,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		openldap-dev \
7269,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: prove not found
7270,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7271,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7272,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7273,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7274,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7275,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7276,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7277,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7278,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7279,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7280,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7281,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7282,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7283,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7284,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile, # backwards compat
7285,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# vim:set ft=dockerfile:
7286,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# explicitly set user/group IDs
7287,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# grab gosu for easy step-down from root
7288,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7289,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7290,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# arches officialy built by upstream
7291,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7292,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7293,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7294,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7295,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7296,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7297,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7298,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7299,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7300,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7301,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7302,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile, # backwards compat
7303,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# vim:set ft=dockerfile:
7304,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# explicitly set user/group IDs
7305,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7306,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7307,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7308,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7309,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7310,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7311,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7312,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7313,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
7314,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# arches officialy built by upstream
7315,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7316,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7317,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7318,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7319,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7320,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7321,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7322,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7323,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7324,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7325,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7326,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7327,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7328,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile, # backwards compat
7329,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# vim:set ft=dockerfile:
7330,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# explicitly set user/group IDs
7331,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# grab gosu for easy step-down from root
7332,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7333,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7334,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# arches officialy built by upstream
7335,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7336,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7337,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7338,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7339,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7340,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7341,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7342,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7343,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7344,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7345,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7346,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile, # backwards compat
7347,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
7348,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7349,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
7350,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7351,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,#		krb5-dev \
7352,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,#		openldap-dev \
7353,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7354,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7355,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7356,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7357,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7358,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7359,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7360,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7361,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7362,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
7363,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7364,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7365,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template, # backwards compat
7366,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7367,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7368,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7369,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7370,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		krb5-dev \
7371,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		openldap-dev \
7372,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: prove not found
7373,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7374,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7375,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7376,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7377,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7378,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7379,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7380,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7381,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7382,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7383,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7384,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7385,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7386,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7387,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile, # backwards compat
7388,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# vim:set ft=dockerfile:
7389,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# explicitly set user/group IDs
7390,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7391,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7392,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# grab gosu for easy step-down from root
7393,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7394,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7395,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7396,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7397,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# see note below about ""*.pyc"" files"
7398,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# arches officialy built by upstream
7399,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7400,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7401,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7402,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7403,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7404,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7405,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7406,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7407,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7408,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7409,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7410,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7411,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7412,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile, # backwards compat
7413,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# vim:set ft=dockerfile:
7414,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# explicitly set user/group IDs
7415,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7416,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7417,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# grab gosu for easy step-down from root
7418,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7419,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7420,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7421,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7422,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# see note below about ""*.pyc"" files"
7423,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# arches officialy built by upstream
7424,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7425,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7426,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7427,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7428,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7429,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7430,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7431,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7432,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7433,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7434,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7435,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7436,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7437,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile, # backwards compat
7438,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# vim:set ft=dockerfile:
7439,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7440,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# grab gosu for easy step-down from root
7441,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7442,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7443,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# vim:set ft=dockerfile:
7444,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# explicitly set user/group IDs
7445,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# grab gosu for easy step-down from root
7446,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7447,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7448,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7449,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7450,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7451,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7452,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# vim:set ft=dockerfile:
7453,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# explicitly set user/group IDs
7454,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# grab gosu for easy step-down from root
7455,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7456,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7457,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7458,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7459,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7460,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# vim:set ft=dockerfile:
7461,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# explicitly set user/group IDs
7462,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# grab gosu for easy step-down from root
7463,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7464,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7465,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7466,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7467,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7468,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7469,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		krb5-dev \
7470,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		openldap-dev \
7471,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7472,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7473,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7474,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7475,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7476,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7477,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7478,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7479,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7480,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7481,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7482,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile, # backwards compat
7483,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7484,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7485,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7486,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7487,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		krb5-dev \
7488,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		openldap-dev \
7489,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: prove not found
7490,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7491,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7492,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7493,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7494,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7495,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7496,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7497,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7498,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7499,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7500,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7501,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7502,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7503,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7504,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile, # backwards compat
7505,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# vim:set ft=dockerfile:
7506,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7507,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# grab gosu for easy step-down from root
7508,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7509,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7510,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7511,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7512,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7513,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7514,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		krb5-dev \
7515,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		openldap-dev \
7516,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: prove not found
7517,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7518,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7519,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7520,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7521,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7522,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7523,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7524,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7525,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7526,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7527,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7528,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7529,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7530,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7531,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile, # backwards compat
7532,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7533,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7534,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7535,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7536,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		krb5-dev \
7537,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		openldap-dev \
7538,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: prove not found
7539,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7540,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7541,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7542,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7543,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7544,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7545,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7546,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7547,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7548,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
7549,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7550,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7551,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7552,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7553,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile, # backwards compat
7554,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# vim:set ft=dockerfile:
7555,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7556,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# grab gosu for easy step-down from root
7557,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7558,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7559,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# vim:set ft=dockerfile:
7560,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7561,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# grab gosu for easy step-down from root
7562,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7563,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7564,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7565,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7566,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7567,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7568,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		krb5-dev \
7569,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		openldap-dev \
7570,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7571,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7572,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7573,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7574,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7575,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
7576,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7577,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7578,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# vim:set ft=dockerfile:
7579,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# explicitly set user/group IDs
7580,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7581,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7582,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7583,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7584,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7585,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7586,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7587,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7588,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7589,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# arches officialy built by upstream
7590,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7591,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7592,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7593,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7594,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7595,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7596,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7597,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7598,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7599,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7600,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7601,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7602,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7603,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile, # backwards compat
7604,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# vim:set ft=dockerfile:
7605,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7606,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# grab gosu for easy step-down from root
7607,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7608,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7609,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7610,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7611,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7612,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7613,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		krb5-dev \
7614,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		openldap-dev \
7615,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: prove not found
7616,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7617,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7618,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7619,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7620,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7621,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7622,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7623,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7624,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7625,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7626,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7627,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
7628,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7629,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7630,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7631,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7632,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile, # backwards compat
7633,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7634,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7635,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7636,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7637,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		krb5-dev \
7638,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		openldap-dev \
7639,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7640,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7641,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7642,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7643,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7644,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7645,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7646,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7647,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7648,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7649,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7650,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7651,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile, # backwards compat
7652,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# vim:set ft=dockerfile:
7653,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7654,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# grab gosu for easy step-down from root
7655,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7656,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7657,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7658,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7659,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7660,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7661,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		krb5-dev \
7662,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		openldap-dev \
7663,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: prove not found
7664,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7665,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7666,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7667,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7668,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7669,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7670,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7671,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7672,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7673,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7674,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7675,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7676,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7677,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7678,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile, # backwards compat
7679,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# vim:set ft=dockerfile:
7680,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# explicitly set user/group IDs
7681,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# grab gosu for easy step-down from root
7682,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7683,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7684,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# arches officialy built by upstream
7685,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7686,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7687,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7688,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7689,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7690,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7691,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7692,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7693,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7694,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7695,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7696,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile, # backwards compat
7697,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7698,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7699,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7700,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7701,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		krb5-dev \
7702,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		openldap-dev \
7703,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7704,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7705,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7706,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7707,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7708,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
7709,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7710,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7711,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7712,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7713,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7714,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7715,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		krb5-dev \
7716,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		openldap-dev \
7717,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: prove not found
7718,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7719,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7720,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7721,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7722,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7723,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7724,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7725,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7726,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7727,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7728,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7729,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7730,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7731,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7732,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile, # backwards compat
7733,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7734,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7735,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7736,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7737,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		krb5-dev \
7738,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		openldap-dev \
7739,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: prove not found
7740,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7741,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7742,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7743,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7744,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7745,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7746,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7747,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7748,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7749,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7750,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7751,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7752,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7753,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7754,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile, # backwards compat
7755,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# vim:set ft=dockerfile:
7756,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# explicitly set user/group IDs
7757,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# grab gosu for easy step-down from root
7758,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7759,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7760,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7761,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7762,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7763,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7764,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile, # backwards compat
7765,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7766,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7767,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7768,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7769,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		krb5-dev \
7770,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		openldap-dev \
7771,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: prove not found
7772,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7773,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7774,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7775,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7776,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7777,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7778,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7779,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7780,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7781,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7782,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7783,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7784,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7785,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7786,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile, # backwards compat
7787,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# vim:set ft=dockerfile:
7788,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# explicitly set user/group IDs
7789,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# grab gosu for easy step-down from root
7790,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7791,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7792,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# arches officialy built by upstream
7793,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7794,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
7795,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
7796,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7797,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7798,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7799,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7800,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7801,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
7802,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7803,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7804,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template, # backwards compat
7805,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7806,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7807,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7808,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7809,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		krb5-dev \
7810,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		openldap-dev \
7811,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: prove not found
7812,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7813,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7814,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7815,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7816,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7817,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7818,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7819,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7820,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7821,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7822,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7823,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7824,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7825,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile, # backwards compat
7826,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# vim:set ft=dockerfile:
7827,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# explicitly set user/group IDs
7828,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7829,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7830,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# grab gosu for easy step-down from root
7831,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7832,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7833,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7834,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7835,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7836,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# see note below about ""*.pyc"" files"
7837,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# arches officialy built by upstream
7838,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7839,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7840,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7841,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7842,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7843,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7844,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7845,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7846,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7847,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7848,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7849,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7850,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7851,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile, # backwards compat
7852,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7853,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7854,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7855,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7856,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		krb5-dev \
7857,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		openldap-dev \
7858,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: prove not found
7859,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7860,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7861,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7862,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7863,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7864,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7865,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7866,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7867,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7868,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7869,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7870,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7871,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7872,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7873,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile, # backwards compat
7874,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# vim:set ft=dockerfile:
7875,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# explicitly set user/group IDs
7876,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# grab gosu for easy step-down from root
7877,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7878,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7879,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7880,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7881,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7882,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7883,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile, # backwards compat
7884,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# vim:set ft=dockerfile:
7885,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# explicitly set user/group IDs
7886,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# grab gosu for easy step-down from root
7887,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7888,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7889,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7890,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7891,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7892,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7893,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7894,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7895,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		krb5-dev \
7896,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		openldap-dev \
7897,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: prove not found
7898,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7899,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7900,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7901,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7902,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7903,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7904,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7905,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7906,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7907,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7908,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7909,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7910,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7911,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7912,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile, # backwards compat
7913,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7914,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7915,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7916,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7917,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
7918,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7919,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
7920,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7921,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,#		krb5-dev \
7922,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,#		openldap-dev \
7923,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,# configure: error: prove not found
7924,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
7925,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7926,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7927,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7928,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7929,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7930,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7931,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7932,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7933,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,#p' --recursive /usr/local \
7934,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7935,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
7936,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7937,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7938,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template, # backwards compat
7939,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
7940,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
7941,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
7942,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7943,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,#		krb5-dev \
7944,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,#		openldap-dev \
7945,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,# configure: error: prove not found
7946,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
7947,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7948,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7949,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7950,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7951,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7952,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7953,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7954,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7955,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,#p' --recursive /usr/local \
7956,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7957,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
7958,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7959,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7960,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template, # backwards compat
7961,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7962,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7963,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7964,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7965,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7966,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7967,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		krb5-dev \
7968,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		openldap-dev \
7969,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: prove not found
7970,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7971,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7972,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7973,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7974,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7975,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7976,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7977,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7978,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7979,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7980,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7981,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7982,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7983,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7984,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile, # backwards compat
7985,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# vim:set ft=dockerfile:
7986,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# explicitly set user/group IDs
7987,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# grab gosu for easy step-down from root
7988,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7989,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7990,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7991,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7992,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7993,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7994,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# vim:set ft=dockerfile:
7995,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# explicitly set user/group IDs
7996,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# grab gosu for easy step-down from root
7997,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7998,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7999,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8000,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8001,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8002,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8003,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8004,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8005,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8006,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		krb5-dev \
8007,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		openldap-dev \
8008,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8009,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8010,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8011,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8012,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8013,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8014,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8015,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8016,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# vim:set ft=dockerfile:
8017,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# explicitly set user/group IDs
8018,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# grab gosu for easy step-down from root
8019,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8020,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8021,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8022,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8023,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8024,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8025,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		krb5-dev \
8026,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		openldap-dev \
8027,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: prove not found
8028,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8029,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8030,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8031,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8032,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8033,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8034,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8035,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8036,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8037,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8038,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8039,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8040,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8041,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8042,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile, # backwards compat
8043,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8044,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8045,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8046,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8047,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		krb5-dev \
8048,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		openldap-dev \
8049,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: prove not found
8050,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8051,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8052,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8053,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8054,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8055,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8056,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8057,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8058,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8059,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8060,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8061,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8062,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8063,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8064,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile, # backwards compat
8065,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# vim:set ft=dockerfile:
8066,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# explicitly set user/group IDs
8067,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# grab gosu for easy step-down from root
8068,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8069,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8070,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# arches officialy built by upstream
8071,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8072,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8073,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8074,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8075,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8076,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8077,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8078,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8079,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8080,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8081,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8082,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile, # backwards compat
8083,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# vim:set ft=dockerfile:
8084,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# explicitly set user/group IDs
8085,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# grab gosu for easy step-down from root
8086,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8087,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8088,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8089,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8090,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# arches officialy built by upstream
8091,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8092,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8093,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8094,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8095,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8096,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8097,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8098,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8099,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8100,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8101,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8102,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile, # backwards compat
8103,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8104,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8105,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8106,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8107,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		krb5-dev \
8108,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		openldap-dev \
8109,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: prove not found
8110,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8111,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8112,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8113,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8114,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8115,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8116,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8117,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8118,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8119,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8120,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8121,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8122,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8123,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8124,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile, # backwards compat
8125,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# vim:set ft=dockerfile:
8126,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# explicitly set user/group IDs
8127,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# grab gosu for easy step-down from root
8128,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8129,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8130,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8131,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8132,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8133,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8134,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile, # backwards compat
8135,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# vim:set ft=dockerfile:
8136,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# explicitly set user/group IDs
8137,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# grab gosu for easy step-down from root
8138,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8139,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8140,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8141,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8142,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8143,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8144,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile, # backwards compat
8145,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8146,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8147,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8148,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8149,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		krb5-dev \
8150,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		openldap-dev \
8151,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8152,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8153,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8154,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8155,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8156,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8157,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8158,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8159,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8160,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8161,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8162,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8163,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		krb5-dev \
8164,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		openldap-dev \
8165,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: prove not found
8166,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8167,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8168,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8169,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8170,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8171,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8172,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8173,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8174,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8175,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8176,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8177,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8178,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8179,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8180,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile, # backwards compat
8181,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# vim:set ft=dockerfile:
8182,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# explicitly set user/group IDs
8183,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# grab gosu for easy step-down from root
8184,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8185,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8186,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8187,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# arches officialy built by upstream
8188,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8189,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
8190,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
8191,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8192,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8193,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8194,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8195,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8196,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
8197,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8198,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8199,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template, # backwards compat
8200,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8201,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8202,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8203,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8204,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		krb5-dev \
8205,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		openldap-dev \
8206,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: prove not found
8207,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8208,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8209,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8210,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8211,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8212,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8213,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8214,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8215,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8216,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8217,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8218,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8219,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8220,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8221,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile, # backwards compat
8222,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8223,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8224,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8225,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8226,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		krb5-dev \
8227,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		openldap-dev \
8228,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: prove not found
8229,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8230,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8231,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8232,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8233,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8234,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8235,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8236,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8237,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8238,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8239,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8240,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8241,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8242,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8243,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile, # backwards compat
8244,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# vim:set ft=dockerfile:
8245,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# explicitly set user/group IDs
8246,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# grab gosu for easy step-down from root
8247,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8248,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8249,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# arches officialy built by upstream
8250,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8251,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8252,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8253,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8254,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8255,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8256,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8257,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8258,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8259,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8260,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8261,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile, # backwards compat
8262,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# vim:set ft=dockerfile:
8263,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# explicitly set user/group IDs
8264,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# grab gosu for easy step-down from root
8265,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8266,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8267,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8268,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8269,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8270,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8271,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8272,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8273,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		krb5-dev \
8274,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		openldap-dev \
8275,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: prove not found
8276,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8277,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8278,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8279,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8280,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8281,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8282,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8283,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8284,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8285,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8286,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8287,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8288,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8289,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8290,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# vim:set ft=dockerfile:
8291,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# explicitly set user/group IDs
8292,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8293,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8294,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# grab gosu for easy step-down from root
8295,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8296,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8297,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8298,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8299,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
8300,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# arches officialy built by upstream
8301,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8302,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8303,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8304,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8305,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8306,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8307,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8308,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8309,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8310,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8311,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8312,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8313,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8314,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile, # backwards compat
8315,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# vim:set ft=dockerfile:
8316,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8317,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# grab gosu for easy step-down from root
8318,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8319,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8320,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# vim:set ft=dockerfile:
8321,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8322,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# grab gosu for easy step-down from root
8323,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8324,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8325,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# vim:set ft=dockerfile:
8326,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# explicitly set user/group IDs
8327,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8328,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8329,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# grab gosu for easy step-down from root
8330,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8331,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8332,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8333,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8334,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# arches officialy built by upstream
8335,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8336,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8337,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8338,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8339,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8340,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8341,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8342,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8343,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8344,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8345,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8346,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile, # backwards compat
8347,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# vim:set ft=dockerfile:
8348,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# explicitly set user/group IDs
8349,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# grab gosu for easy step-down from root
8350,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8351,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8352,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8353,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8354,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
8355,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8356,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8357,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8358,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		krb5-dev \
8359,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		openldap-dev \
8360,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: prove not found
8361,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8362,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8363,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8364,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8365,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8366,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8367,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8368,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8369,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8370,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
8371,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8372,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8373,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8374,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8375,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile, # backwards compat
8376,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,# vim:set ft=dockerfile:
8377,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8378,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,# grab gosu for easy step-down from root
8379,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8380,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8381,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# vim:set ft=dockerfile:
8382,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# explicitly set user/group IDs
8383,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# grab gosu for easy step-down from root
8384,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8385,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8386,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8387,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# arches officialy built by upstream
8388,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8389,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8390,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8391,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8392,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8393,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8394,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8395,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8396,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8397,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8398,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8399,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile, # backwards compat
8400,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
8401,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8402,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8403,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8404,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		krb5-dev \
8405,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		openldap-dev \
8406,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: prove not found
8407,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8408,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8409,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8410,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8411,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8412,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8413,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8414,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8415,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8416,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
8417,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8418,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8419,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8420,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8421,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile, # backwards compat
8422,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8423,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8424,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8425,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8426,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		krb5-dev \
8427,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		openldap-dev \
8428,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: prove not found
8429,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8430,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8431,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8432,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8433,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8434,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8435,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8436,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8437,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8438,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8439,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8440,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8441,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8442,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8443,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile, # backwards compat
8444,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8445,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8446,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8447,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8448,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		krb5-dev \
8449,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		openldap-dev \
8450,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: prove not found
8451,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8452,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8453,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8454,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8455,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8456,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8457,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8458,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8459,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8460,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
8461,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8462,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8463,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8464,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8465,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile, # backwards compat
8466,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# vim:set ft=dockerfile:
8467,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# explicitly set user/group IDs
8468,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# grab gosu for easy step-down from root
8469,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8470,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8471,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8472,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8473,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# arches officialy built by upstream
8474,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8475,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8476,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8477,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8478,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8479,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8480,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8481,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8482,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8483,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8484,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8485,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile, # backwards compat
8486,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# vim:set ft=dockerfile:
8487,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# explicitly set user/group IDs
8488,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8489,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8490,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8491,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8492,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8493,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8494,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8495,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8496,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# see note below about ""*.pyc"" files"
8497,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# arches officialy built by upstream
8498,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8499,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8500,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8501,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8502,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8503,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8504,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8505,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8506,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8507,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8508,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8509,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8510,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8511,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile, # backwards compat
8512,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# vim:set ft=dockerfile:
8513,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# explicitly set user/group IDs
8514,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8515,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8516,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# grab gosu for easy step-down from root
8517,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8518,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8519,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8520,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8521,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
8522,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# arches officialy built by upstream
8523,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8524,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8525,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8526,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8527,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8528,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8529,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8530,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8531,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8532,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8533,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8534,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8535,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8536,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile, # backwards compat
8537,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# vim:set ft=dockerfile:
8538,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# explicitly set user/group IDs
8539,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# grab gosu for easy step-down from root
8540,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8541,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8542,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8543,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8544,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# arches officialy built by upstream
8545,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8546,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
8547,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
8548,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8549,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8550,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8551,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8552,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8553,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
8554,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8555,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8556,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template, # backwards compat
8557,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# vim:set ft=dockerfile:
8558,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# explicitly set user/group IDs
8559,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# grab gosu for easy step-down from root
8560,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8561,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8562,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# arches officialy built by upstream
8563,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8564,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8565,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8566,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8567,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8568,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8569,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8570,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8571,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8572,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8573,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8574,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile, # backwards compat
8575,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8576,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8577,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8578,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8579,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		krb5-dev \
8580,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		openldap-dev \
8581,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: prove not found
8582,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8583,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8584,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8585,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8586,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8587,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8588,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8589,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8590,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8591,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8592,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8593,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8594,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8595,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile, # backwards compat
8596,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8597,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8598,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8599,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8600,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		krb5-dev \
8601,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		openldap-dev \
8602,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8603,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8604,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8605,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8606,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8607,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
8608,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8609,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
8610,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8611,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,#		krb5-dev \
8612,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,#		openldap-dev \
8613,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8614,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8615,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8616,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8617,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8618,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
8619,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
8620,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8621,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,# vim:set ft=dockerfile:
8622,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,# explicitly set user/group IDs
8623,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,# grab gosu for easy step-down from root
8624,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8625,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8626,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8627,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
8628,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8629,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8630,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template, # backwards compat
8631,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# vim:set ft=dockerfile:
8632,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# explicitly set user/group IDs
8633,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# grab gosu for easy step-down from root
8634,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8635,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8636,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8637,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# arches officialy built by upstream
8638,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8639,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8640,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8641,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8642,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8643,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8644,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8645,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8646,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8647,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8648,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8649,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile, # backwards compat
8650,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
8651,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# explicitly set user/group IDs
8652,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
8653,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8654,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8655,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8656,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8657,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
8658,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8659,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8660,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8661,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		krb5-dev \
8662,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		openldap-dev \
8663,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: prove not found
8664,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8665,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8666,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8667,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8668,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8669,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8670,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8671,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8672,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8673,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#p' --recursive /usr/local \
8674,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8675,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8676,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8677,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8678,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8679,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8680,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8681,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8682,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		krb5-dev \
8683,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		openldap-dev \
8684,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8685,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8686,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8687,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8688,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8689,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8690,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8691,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8692,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8693,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8694,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8695,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile, # backwards compat
8696,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# vim:set ft=dockerfile:
8697,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# explicitly set user/group IDs
8698,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# grab gosu for easy step-down from root
8699,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8700,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8701,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,# vim:set ft=dockerfile:
8702,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8703,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8704,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8705,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8706,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8707,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8708,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		krb5-dev \
8709,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		openldap-dev \
8710,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8711,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8712,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8713,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8714,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8715,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8716,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8717,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8718,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8719,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8720,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8721,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8722,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8723,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8724,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile, # backwards compat
8725,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8726,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8727,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8728,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8729,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		krb5-dev \
8730,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		openldap-dev \
8731,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8732,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8733,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8734,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8735,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8736,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8737,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8738,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8739,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8740,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8741,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8742,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
8743,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8744,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
8745,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8746,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,#		krb5-dev \
8747,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,#		openldap-dev \
8748,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,# configure: error: prove not found
8749,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
8750,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8751,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8752,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8753,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8754,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8755,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8756,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8757,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8758,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,#p' --recursive /usr/local \
8759,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8760,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
8761,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8762,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8763,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template, # backwards compat
8764,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
8765,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# explicitly set user/group IDs
8766,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
8767,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8768,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8769,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8770,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8771,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8772,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# vim:set ft=dockerfile:
8773,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8774,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# grab gosu for easy step-down from root
8775,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8776,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8777,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# vim:set ft=dockerfile:
8778,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# explicitly set user/group IDs
8779,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# grab gosu for easy step-down from root
8780,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8781,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8782,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# arches officialy built by upstream
8783,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8784,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8785,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8786,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8787,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8788,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8789,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8790,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8791,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8792,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8793,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8794,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile, # backwards compat
8795,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8796,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8797,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8798,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8799,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		krb5-dev \
8800,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		openldap-dev \
8801,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8802,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8803,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8804,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8805,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8806,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8807,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8808,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8809,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8810,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8811,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8812,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# vim:set ft=dockerfile:
8813,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# explicitly set user/group IDs
8814,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# grab gosu for easy step-down from root
8815,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8816,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8817,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8818,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8819,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8820,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8821,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile, # backwards compat
8822,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8823,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8824,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8825,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8826,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		krb5-dev \
8827,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		openldap-dev \
8828,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# configure: error: prove not found
8829,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8830,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8831,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8832,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8833,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8834,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8835,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8836,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8837,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8838,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8839,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8840,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8841,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile, # backwards compat
8842,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8843,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8844,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8845,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8846,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		krb5-dev \
8847,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		openldap-dev \
8848,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: prove not found
8849,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8850,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8851,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8852,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8853,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8854,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8855,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8856,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8857,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8858,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8859,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8860,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8861,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8862,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8863,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile, # backwards compat
8864,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# vim:set ft=dockerfile:
8865,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# explicitly set user/group IDs
8866,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# grab gosu for easy step-down from root
8867,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8868,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8869,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8870,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# arches officialy built by upstream
8871,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8872,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8873,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8874,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8875,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8876,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8877,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8878,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8879,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8880,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8881,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8882,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile, # backwards compat
8883,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8884,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8885,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8886,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8887,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		krb5-dev \
8888,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		openldap-dev \
8889,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: prove not found
8890,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8891,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8892,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8893,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8894,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8895,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8896,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8897,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8898,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8899,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8900,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8901,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8902,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8903,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8904,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile, # backwards compat
8905,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# vim:set ft=dockerfile:
8906,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# explicitly set user/group IDs
8907,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# grab gosu for easy step-down from root
8908,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8909,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8910,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
8911,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8912,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
8913,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8914,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,#		krb5-dev \
8915,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,#		openldap-dev \
8916,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8917,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8918,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8919,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8920,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8921,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8922,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
8923,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8924,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# vim:set ft=dockerfile:
8925,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# explicitly set user/group IDs
8926,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# grab gosu for easy step-down from root
8927,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8928,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8929,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# arches officialy built by upstream
8930,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8931,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8932,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8933,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8934,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8935,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8936,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8937,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8938,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8939,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8940,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8941,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile, # backwards compat
8942,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# vim:set ft=dockerfile:
8943,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# explicitly set user/group IDs
8944,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8945,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8946,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8947,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8948,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8949,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8950,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8951,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8952,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8953,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# arches officialy built by upstream
8954,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8955,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8956,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8957,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8958,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8959,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8960,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8961,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8962,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8963,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8964,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8965,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8966,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8967,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile, # backwards compat
8968,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8969,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8970,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8971,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8972,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		krb5-dev \
8973,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		openldap-dev \
8974,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8975,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8976,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8977,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8978,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8979,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8980,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8981,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8982,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8983,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8984,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8985,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8986,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8987,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8988,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		krb5-dev \
8989,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		openldap-dev \
8990,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: prove not found
8991,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8992,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8993,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8994,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8995,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8996,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8997,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8998,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8999,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9000,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9001,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9002,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9003,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9004,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9005,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile, # backwards compat
9006,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9007,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9008,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9009,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9010,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		krb5-dev \
9011,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		openldap-dev \
9012,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# configure: error: prove not found
9013,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9014,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9015,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9016,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9017,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9018,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9019,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9020,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9021,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9022,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9023,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9024,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9025,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9026,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9027,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile, # backwards compat
9028,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
9029,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9030,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
9031,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9032,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,#		krb5-dev \
9033,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,#		openldap-dev \
9034,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,# configure: error: prove not found
9035,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
9036,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9037,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9038,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9039,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9040,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9041,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9042,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9043,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9044,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,#p' --recursive /usr/local \
9045,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9046,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
9047,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9048,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9049,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template, # backwards compat
9050,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# vim:set ft=dockerfile:
9051,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# explicitly set user/group IDs
9052,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9053,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9054,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# grab gosu for easy step-down from root
9055,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9056,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9057,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9058,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9059,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
9060,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# arches officialy built by upstream
9061,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9062,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9063,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9064,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9065,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9066,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9067,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9068,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9069,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9070,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9071,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9072,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9073,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9074,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile, # backwards compat
9075,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# vim:set ft=dockerfile:
9076,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# explicitly set user/group IDs
9077,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# grab gosu for easy step-down from root
9078,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9079,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9080,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# arches officialy built by upstream
9081,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9082,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9083,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9084,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9085,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9086,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9087,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9088,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9089,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9090,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9091,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9092,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile, # backwards compat
9093,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9094,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9095,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9096,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9097,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		krb5-dev \
9098,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		openldap-dev \
9099,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: prove not found
9100,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9101,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9102,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9103,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9104,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9105,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9106,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9107,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9108,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9109,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9110,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9111,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9112,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9113,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9114,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile, # backwards compat
9115,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9116,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9117,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9118,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9119,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		krb5-dev \
9120,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		openldap-dev \
9121,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9122,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9123,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9124,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9125,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9126,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
9127,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9128,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9129,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# vim:set ft=dockerfile:
9130,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# explicitly set user/group IDs
9131,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# grab gosu for easy step-down from root
9132,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9133,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9134,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9135,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9136,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9137,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9138,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile, # backwards compat
9139,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# vim:set ft=dockerfile:
9140,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# explicitly set user/group IDs
9141,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9142,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9143,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# grab gosu for easy step-down from root
9144,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9145,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9146,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9147,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9148,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
9149,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# arches officialy built by upstream
9150,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9151,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9152,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9153,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9154,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9155,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9156,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9157,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9158,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9159,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9160,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9161,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9162,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9163,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile, # backwards compat
9164,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9165,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9166,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9167,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9168,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		krb5-dev \
9169,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		openldap-dev \
9170,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9171,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9172,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9173,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9174,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9175,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9176,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9177,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9178,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9179,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9180,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9181,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile, # backwards compat
9182,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9183,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9184,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9185,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9186,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		krb5-dev \
9187,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		openldap-dev \
9188,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: prove not found
9189,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9190,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9191,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9192,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9193,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9194,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9195,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9196,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9197,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9198,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9199,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9200,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9201,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9202,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9203,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9204,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9205,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9206,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9207,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		krb5-dev \
9208,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		openldap-dev \
9209,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: prove not found
9210,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9211,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9212,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9213,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9214,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9215,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9216,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9217,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9218,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9219,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9220,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9221,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9222,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9223,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9224,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile, # backwards compat
9225,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9226,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9227,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9228,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9229,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		krb5-dev \
9230,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		openldap-dev \
9231,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: prove not found
9232,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9233,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9234,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9235,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9236,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9237,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9238,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9239,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9240,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9241,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9242,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9243,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9244,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9245,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9246,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9247,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9248,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9249,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9250,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		krb5-dev \
9251,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		openldap-dev \
9252,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: prove not found
9253,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9254,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9255,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9256,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9257,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9258,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9259,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9260,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9261,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9262,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
9263,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9264,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9265,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9266,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9267,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile, # backwards compat
9268,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,# vim:set ft=dockerfile:
9269,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,# explicitly set user/group IDs
9270,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,# grab gosu for easy step-down from root
9271,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9272,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9273,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9274,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
9275,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9276,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9277,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9278,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9279,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9280,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		krb5-dev \
9281,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		openldap-dev \
9282,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: prove not found
9283,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9284,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9285,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9286,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9287,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9288,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9289,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9290,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9291,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9292,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9293,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9294,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
9295,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9296,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9297,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9298,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9299,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile, # backwards compat
9300,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,# vim:set ft=dockerfile:
9301,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9302,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,# grab gosu for easy step-down from root
9303,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9304,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9305,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# vim:set ft=dockerfile:
9306,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# explicitly set user/group IDs
9307,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# grab gosu for easy step-down from root
9308,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9309,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9310,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9311,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9312,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# arches officialy built by upstream
9313,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9314,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9315,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9316,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9317,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9318,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9319,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9320,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9321,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9322,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9323,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9324,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile, # backwards compat
9325,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9326,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9327,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9328,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9329,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		krb5-dev \
9330,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		openldap-dev \
9331,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: prove not found
9332,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9333,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9334,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9335,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9336,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9337,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9338,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9339,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9340,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9341,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9342,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9343,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9344,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9345,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9346,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile, # backwards compat
9347,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# vim:set ft=dockerfile:
9348,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# explicitly set user/group IDs
9349,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9350,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9351,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# grab gosu for easy step-down from root
9352,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9353,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9354,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9355,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9356,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
9357,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# arches officialy built by upstream
9358,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9359,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9360,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
9361,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
9362,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9363,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9364,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9365,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9366,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9367,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9368,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
9369,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9370,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9371,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template, # backwards compat
9372,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# vim:set ft=dockerfile:
9373,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# explicitly set user/group IDs
9374,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# grab gosu for easy step-down from root
9375,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9376,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9377,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# arches officialy built by upstream
9378,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9379,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9380,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9381,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9382,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9383,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9384,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9385,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9386,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9387,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9388,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9389,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile, # backwards compat
9390,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# vim:set ft=dockerfile:
9391,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# explicitly set user/group IDs
9392,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# grab gosu for easy step-down from root
9393,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9394,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9395,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# arches officialy built by upstream
9396,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9397,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9398,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9399,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9400,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9401,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9402,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9403,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9404,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9405,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9406,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9407,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile, # backwards compat
9408,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9409,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9410,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9411,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9412,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		krb5-dev \
9413,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		openldap-dev \
9414,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: prove not found
9415,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9416,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9417,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9418,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9419,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9420,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9421,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9422,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9423,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9424,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9425,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9426,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9427,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9428,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9429,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile, # backwards compat
9430,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9431,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9432,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9433,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9434,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		krb5-dev \
9435,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		openldap-dev \
9436,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: prove not found
9437,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9438,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9439,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9440,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9441,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9442,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9443,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9444,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9445,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9446,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
9447,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9448,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9449,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9450,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9451,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile, # backwards compat
9452,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9453,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9454,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9455,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9456,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		krb5-dev \
9457,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		openldap-dev \
9458,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9459,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9460,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9461,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9462,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9463,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9464,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9465,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9466,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# vim:set ft=dockerfile:
9467,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# explicitly set user/group IDs
9468,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9469,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9470,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# grab gosu for easy step-down from root
9471,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9472,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9473,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9474,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9475,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9476,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# arches officialy built by upstream
9477,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9478,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9479,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9480,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9481,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9482,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9483,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9484,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9485,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9486,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9487,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9488,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9489,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9490,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile, # backwards compat
9491,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# vim:set ft=dockerfile:
9492,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# explicitly set user/group IDs
9493,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# grab gosu for easy step-down from root
9494,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9495,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9496,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9497,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9498,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9499,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# vim:set ft=dockerfile:
9500,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9501,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# grab gosu for easy step-down from root
9502,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9503,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9504,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9505,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9506,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9507,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9508,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		krb5-dev \
9509,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		openldap-dev \
9510,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9511,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9512,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9513,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9514,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9515,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9516,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9517,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9518,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
9519,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9520,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
9521,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9522,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,#		krb5-dev \
9523,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,#		openldap-dev \
9524,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,# configure: error: prove not found
9525,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
9526,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9527,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9528,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9529,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9530,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9531,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9532,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9533,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9534,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,#p' --recursive /usr/local \
9535,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9536,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
9537,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9538,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9539,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template, # backwards compat
9540,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,# vim:set ft=dockerfile:
9541,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9542,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,# grab gosu for easy step-down from root
9543,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9544,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9545,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# vim:set ft=dockerfile:
9546,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# explicitly set user/group IDs
9547,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9548,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9549,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
9550,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9551,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9552,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9553,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
9554,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9555,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
9556,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# arches officialy built by upstream
9557,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9558,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9559,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9560,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9561,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9562,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9563,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9564,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9565,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9566,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9567,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9568,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9569,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9570,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile, # backwards compat
9571,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9572,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9573,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9574,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9575,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		krb5-dev \
9576,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		openldap-dev \
9577,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: prove not found
9578,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9579,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9580,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9581,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9582,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9583,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9584,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9585,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9586,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9587,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9588,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9589,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9590,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9591,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9592,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile, # backwards compat
9593,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9594,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9595,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9596,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9597,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		krb5-dev \
9598,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		openldap-dev \
9599,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: prove not found
9600,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9601,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9602,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9603,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
9604,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9605,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9606,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9607,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9608,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9609,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9610,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9611,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9612,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9613,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9614,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile, # backwards compat
9615,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# vim:set ft=dockerfile:
9616,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9617,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# grab gosu for easy step-down from root
9618,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9619,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9620,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9621,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9622,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9623,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9624,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		krb5-dev \
9625,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		openldap-dev \
9626,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9627,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9628,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9629,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9630,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9631,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9632,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9633,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9634,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9635,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9636,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9637,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9638,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile, # backwards compat
9639,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# vim:set ft=dockerfile:
9640,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9641,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# grab gosu for easy step-down from root
9642,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9643,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9644,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# vim:set ft=dockerfile:
9645,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# explicitly set user/group IDs
9646,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9647,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9648,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# grab gosu for easy step-down from root
9649,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9650,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9651,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9652,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
9653,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9654,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# see note below about ""*.pyc"" files"
9655,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# arches officialy built by upstream
9656,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9657,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9658,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9659,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9660,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9661,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9662,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9663,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9664,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9665,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9666,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9667,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9668,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9669,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile, # backwards compat
9670,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9671,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9672,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9673,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9674,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		krb5-dev \
9675,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		openldap-dev \
9676,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
9677,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9678,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9679,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9680,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9681,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9682,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9683,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9684,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9685,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9686,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9687,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9688,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9689,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9690,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile, # backwards compat
9691,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9692,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9693,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9694,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9695,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		krb5-dev \
9696,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		openldap-dev \
9697,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: prove not found
9698,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9699,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9700,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9701,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9702,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9703,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9704,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9705,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9706,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9707,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
9708,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9709,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9710,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9711,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9712,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile, # backwards compat
9713,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,# vim:set ft=dockerfile:
9714,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9715,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,# grab gosu for easy step-down from root
9716,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9717,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9718,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# vim:set ft=dockerfile:
9719,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# explicitly set user/group IDs
9720,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# grab gosu for easy step-down from root
9721,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9722,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9723,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9724,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# arches officialy built by upstream
9725,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9726,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9727,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9728,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9729,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9730,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9731,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9732,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9733,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9734,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9735,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9736,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile, # backwards compat
9737,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# vim:set ft=dockerfile:
9738,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# explicitly set user/group IDs
9739,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# grab gosu for easy step-down from root
9740,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9741,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9742,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9743,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9744,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# arches officialy built by upstream
9745,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9746,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
9747,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
9748,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9749,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9750,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9751,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9752,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9753,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
9754,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9755,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9756,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template, # backwards compat
9757,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9758,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9759,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9760,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9761,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		krb5-dev \
9762,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		openldap-dev \
9763,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: prove not found
9764,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9765,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9766,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9767,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9768,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9769,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9770,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9771,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9772,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9773,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9774,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9775,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9776,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9777,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9778,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9779,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9780,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9781,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9782,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		krb5-dev \
9783,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		openldap-dev \
9784,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: prove not found
9785,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9786,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9787,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9788,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9789,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9790,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9791,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9792,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9793,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9794,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9795,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9796,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9797,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9798,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9799,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile, # backwards compat
9800,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9801,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9802,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9803,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9804,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		krb5-dev \
9805,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		openldap-dev \
9806,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9807,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9808,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9809,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9810,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9811,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9812,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9813,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9814,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9815,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9816,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9817,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9818,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9819,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9820,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile, # backwards compat
9821,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9822,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9823,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9824,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9825,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		krb5-dev \
9826,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		openldap-dev \
9827,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9828,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9829,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9830,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9831,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9832,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9833,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9834,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9835,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9836,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9837,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9838,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9839,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile, # backwards compat
9840,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# vim:set ft=dockerfile:
9841,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9842,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# grab gosu for easy step-down from root
9843,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9844,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9845,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# vim:set ft=dockerfile:
9846,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# explicitly set user/group IDs
9847,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# grab gosu for easy step-down from root
9848,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9849,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9850,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# vim:set ft=dockerfile:
9851,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# explicitly set user/group IDs
9852,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9853,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9854,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# grab gosu for easy step-down from root
9855,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9856,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9857,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9858,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9859,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9860,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# arches officialy built by upstream
9861,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9862,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9863,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9864,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9865,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9866,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9867,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9868,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9869,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9870,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9871,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9872,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9873,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9874,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile, # backwards compat
9875,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9876,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9877,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9878,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9879,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		krb5-dev \
9880,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		openldap-dev \
9881,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: prove not found
9882,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9883,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9884,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9885,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9886,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9887,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9888,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9889,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9890,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9891,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
9892,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9893,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9894,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9895,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9896,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile, # backwards compat
9897,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9898,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9899,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9900,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9901,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		krb5-dev \
9902,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		openldap-dev \
9903,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: prove not found
9904,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9905,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9906,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9907,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9908,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9909,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9910,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9911,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9912,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9913,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9914,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9915,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9916,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9917,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9918,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile, # backwards compat
9919,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9920,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9921,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9922,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9923,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		krb5-dev \
9924,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		openldap-dev \
9925,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9926,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9927,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9928,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9929,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9930,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9931,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9932,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9933,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9934,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9935,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9936,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9937,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile, # backwards compat
9938,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9939,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9940,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9941,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9942,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		krb5-dev \
9943,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		openldap-dev \
9944,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9945,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9946,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9947,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9948,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9949,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9950,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9951,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9952,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9953,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9954,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9955,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile, # backwards compat
9956,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
9957,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
9958,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
9959,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9960,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,#		krb5-dev \
9961,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,#		openldap-dev \
9962,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9963,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9964,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9965,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9966,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9967,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9968,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
9969,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9970,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
9971,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9972,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
9973,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9974,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,#		krb5-dev \
9975,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,#		openldap-dev \
9976,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,# configure: error: prove not found
9977,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
9978,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9979,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9980,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9981,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9982,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9983,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9984,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9985,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9986,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,#p' --recursive /usr/local \
9987,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9988,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
9989,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9990,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9991,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template, # backwards compat
9992,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# vim:set ft=dockerfile:
9993,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# explicitly set user/group IDs
9994,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# grab gosu for easy step-down from root
9995,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9996,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9997,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# arches officialy built by upstream
9998,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9999,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10000,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10001,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10002,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10003,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10004,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10005,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10006,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10007,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10008,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10009,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile, # backwards compat
10010,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,# vim:set ft=dockerfile:
10011,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10012,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10013,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10014,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10015,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# vim:set ft=dockerfile:
10016,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# explicitly set user/group IDs
10017,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# grab gosu for easy step-down from root
10018,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10019,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10020,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10021,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10022,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10023,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10024,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile, # backwards compat
10025,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# vim:set ft=dockerfile:
10026,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# explicitly set user/group IDs
10027,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# grab gosu for easy step-down from root
10028,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10029,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10030,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# arches officialy built by upstream
10031,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10032,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10033,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10034,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10035,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10036,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10037,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10038,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10039,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10040,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10041,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10042,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile, # backwards compat
10043,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10044,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10045,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10046,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10047,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		krb5-dev \
10048,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		openldap-dev \
10049,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: prove not found
10050,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10051,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10052,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10053,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
10054,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10055,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10056,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10057,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10058,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10059,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
10060,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10061,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10062,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10063,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10064,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile, # backwards compat
10065,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10066,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10067,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10068,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10069,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		krb5-dev \
10070,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		openldap-dev \
10071,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10072,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10073,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10074,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10075,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10076,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10077,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10078,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10079,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10080,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10081,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10082,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10083,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile, # backwards compat
10084,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
10085,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10086,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10087,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10088,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		krb5-dev \
10089,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		openldap-dev \
10090,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: prove not found
10091,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10092,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10093,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10094,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10095,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10096,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10097,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10098,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10099,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10100,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#p' --recursive /usr/local \
10101,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10102,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10103,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10104,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10105,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile, # backwards compat
10106,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# vim:set ft=dockerfile:
10107,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10108,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# grab gosu for easy step-down from root
10109,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10110,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10111,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# vim:set ft=dockerfile:
10112,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# explicitly set user/group IDs
10113,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# grab gosu for easy step-down from root
10114,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10115,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10116,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10117,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10118,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# vim:set ft=dockerfile:
10119,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# explicitly set user/group IDs
10120,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10121,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10122,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# grab gosu for easy step-down from root
10123,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10124,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10125,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10126,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10127,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
10128,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# arches officialy built by upstream
10129,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10130,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10131,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10132,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10133,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10134,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10135,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10136,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10137,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10138,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10139,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10140,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10141,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10142,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile, # backwards compat
10143,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# vim:set ft=dockerfile:
10144,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# explicitly set user/group IDs
10145,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# grab gosu for easy step-down from root
10146,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10147,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10148,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10149,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10150,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10151,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10152,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10153,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10154,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		krb5-dev \
10155,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		openldap-dev \
10156,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: prove not found
10157,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10158,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10159,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10160,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10161,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10162,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10163,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10164,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10165,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10166,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10167,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10168,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10169,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10170,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10171,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile, # backwards compat
10172,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10173,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10174,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10175,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10176,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		krb5-dev \
10177,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		openldap-dev \
10178,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: prove not found
10179,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10180,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10181,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10182,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10183,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10184,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10185,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10186,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10187,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10188,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10189,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10190,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10191,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10192,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile, # backwards compat
10193,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# vim:set ft=dockerfile:
10194,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10195,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# grab gosu for easy step-down from root
10196,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10197,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10198,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10199,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10200,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10201,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10202,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		krb5-dev \
10203,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		openldap-dev \
10204,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: prove not found
10205,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10206,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10207,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10208,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10209,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10210,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10211,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10212,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10213,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10214,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10215,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10216,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10217,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10218,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10219,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile, # backwards compat
10220,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# vim:set ft=dockerfile:
10221,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# explicitly set user/group IDs
10222,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10223,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10224,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# grab gosu for easy step-down from root
10225,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10226,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10227,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10228,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10229,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
10230,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# arches officialy built by upstream
10231,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10232,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10233,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10234,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10235,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10236,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10237,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10238,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10239,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10240,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10241,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10242,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10243,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10244,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile, # backwards compat
10245,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# vim:set ft=dockerfile:
10246,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# explicitly set user/group IDs
10247,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# grab gosu for easy step-down from root
10248,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10249,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10250,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# vim:set ft=dockerfile:
10251,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10252,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# grab gosu for easy step-down from root
10253,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10254,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10255,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# vim:set ft=dockerfile:
10256,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10257,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# grab gosu for easy step-down from root
10258,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10259,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10260,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# vim:set ft=dockerfile:
10261,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10262,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# grab gosu for easy step-down from root
10263,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10264,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10265,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,# vim:set ft=dockerfile:
10266,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,# explicitly set user/group IDs
10267,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,# grab gosu for easy step-down from root
10268,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10269,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10270,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10271,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
10272,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10273,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10274,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template, # backwards compat
10275,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# vim:set ft=dockerfile:
10276,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10277,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# grab gosu for easy step-down from root
10278,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10279,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10280,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# vim:set ft=dockerfile:
10281,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# explicitly set user/group IDs
10282,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# grab gosu for easy step-down from root
10283,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10284,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10285,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# arches officialy built by upstream
10286,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10287,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10288,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10289,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10290,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10291,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10292,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10293,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10294,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10295,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10296,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10297,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile, # backwards compat
10298,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# vim:set ft=dockerfile:
10299,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# explicitly set user/group IDs
10300,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10301,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10302,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# grab gosu for easy step-down from root
10303,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10304,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10305,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10306,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10307,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10308,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# arches officialy built by upstream
10309,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10310,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10311,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10312,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10313,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10314,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10315,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10316,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10317,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10318,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10319,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10320,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10321,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10322,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile, # backwards compat
10323,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10324,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10325,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10326,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10327,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		krb5-dev \
10328,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		openldap-dev \
10329,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: prove not found
10330,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10331,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10332,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10333,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10334,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10335,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10336,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10337,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10338,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10339,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10340,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10341,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10342,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10343,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10344,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile, # backwards compat
10345,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10346,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10347,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10348,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10349,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		krb5-dev \
10350,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		openldap-dev \
10351,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10352,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10353,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10354,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10355,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10356,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10357,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10358,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10359,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10360,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10361,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10362,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10363,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile, # backwards compat
10364,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# vim:set ft=dockerfile:
10365,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# explicitly set user/group IDs
10366,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# grab gosu for easy step-down from root
10367,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10368,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10369,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10370,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10371,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10372,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10373,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile, # backwards compat
10374,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# vim:set ft=dockerfile:
10375,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# explicitly set user/group IDs
10376,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10377,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10378,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# grab gosu for easy step-down from root
10379,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10380,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10381,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10382,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10383,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
10384,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# arches officialy built by upstream
10385,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10386,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10387,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
10388,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
10389,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10390,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10391,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10392,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10393,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10394,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10395,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
10396,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10397,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10398,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template, # backwards compat
10399,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10400,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10401,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10402,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10403,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		krb5-dev \
10404,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		openldap-dev \
10405,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10406,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10407,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10408,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10409,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10410,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10411,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10412,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10413,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10414,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10415,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10416,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10417,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile, # backwards compat
10418,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# vim:set ft=dockerfile:
10419,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# explicitly set user/group IDs
10420,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10421,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10422,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# grab gosu for easy step-down from root
10423,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10424,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10425,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10426,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10427,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10428,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# arches officialy built by upstream
10429,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10430,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10431,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10432,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10433,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10434,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10435,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10436,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10437,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10438,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10439,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10440,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10441,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10442,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile, # backwards compat
10443,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10444,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10445,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10446,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10447,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		krb5-dev \
10448,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		openldap-dev \
10449,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10450,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10451,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10452,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10453,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10454,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10455,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10456,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10457,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10458,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10459,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10460,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10461,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10462,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10463,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile, # backwards compat
10464,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# vim:set ft=dockerfile:
10465,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# explicitly set user/group IDs
10466,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# grab gosu for easy step-down from root
10467,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10468,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10469,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10470,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10471,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# vim:set ft=dockerfile:
10472,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# explicitly set user/group IDs
10473,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10474,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10475,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# grab gosu for easy step-down from root
10476,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10477,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10478,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10479,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10480,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
10481,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# arches officialy built by upstream
10482,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10483,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10484,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10485,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10486,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10487,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10488,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10489,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10490,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10491,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10492,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10493,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10494,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10495,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile, # backwards compat
10496,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
10497,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# explicitly set user/group IDs
10498,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
10499,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10500,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10501,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10502,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10503,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# vim:set ft=dockerfile:
10504,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# explicitly set user/group IDs
10505,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# grab gosu for easy step-down from root
10506,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10507,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10508,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# arches officialy built by upstream
10509,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10510,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
10511,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
10512,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10513,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10514,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10515,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10516,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10517,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
10518,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10519,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10520,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template, # backwards compat
10521,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# vim:set ft=dockerfile:
10522,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10523,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# grab gosu for easy step-down from root
10524,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10525,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10526,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# vim:set ft=dockerfile:
10527,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# explicitly set user/group IDs
10528,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10529,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10530,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# grab gosu for easy step-down from root
10531,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10532,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10533,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10534,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10535,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# arches officialy built by upstream
10536,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10537,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10538,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10539,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10540,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10541,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10542,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10543,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10544,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10545,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10546,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10547,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile, # backwards compat
10548,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10549,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10550,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10551,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10552,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		krb5-dev \
10553,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		openldap-dev \
10554,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: prove not found
10555,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10556,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10557,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10558,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10559,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10560,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10561,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10562,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10563,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10564,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10565,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10566,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
10567,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10568,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10569,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10570,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10571,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile, # backwards compat
10572,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# vim:set ft=dockerfile:
10573,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10574,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# grab gosu for easy step-down from root
10575,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10576,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10577,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# vim:set ft=dockerfile:
10578,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10579,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# grab gosu for easy step-down from root
10580,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10581,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10582,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10583,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10584,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10585,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10586,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		krb5-dev \
10587,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		openldap-dev \
10588,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10589,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10590,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10591,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10592,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10593,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10594,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10595,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10596,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10597,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10598,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10599,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10600,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile, # backwards compat
10601,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
10602,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# explicitly set user/group IDs
10603,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
10604,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10605,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10606,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10607,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10608,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10609,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10610,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10611,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10612,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10613,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		krb5-dev \
10614,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		openldap-dev \
10615,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10616,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10617,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10618,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10619,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10620,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10621,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10622,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10623,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10624,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10625,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10626,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile, # backwards compat
10627,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# vim:set ft=dockerfile:
10628,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# explicitly set user/group IDs
10629,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# grab gosu for easy step-down from root
10630,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10631,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10632,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10633,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# arches officialy built by upstream
10634,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10635,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10636,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10637,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10638,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10639,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10640,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10641,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10642,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10643,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10644,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10645,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile, # backwards compat
10646,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# vim:set ft=dockerfile:
10647,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# explicitly set user/group IDs
10648,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10649,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10650,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# grab gosu for easy step-down from root
10651,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10652,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10653,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10654,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10655,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# see note below about ""*.pyc"" files"
10656,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# arches officialy built by upstream
10657,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10658,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10659,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10660,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10661,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10662,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10663,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10664,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10665,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10666,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10667,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10668,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10669,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10670,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile, # backwards compat
10671,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10672,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10673,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10674,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10675,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		krb5-dev \
10676,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		openldap-dev \
10677,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: prove not found
10678,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10679,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10680,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10681,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10682,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10683,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10684,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10685,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10686,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10687,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10688,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10689,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10690,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10691,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10692,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile, # backwards compat
10693,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10694,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10695,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10696,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10697,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		krb5-dev \
10698,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		openldap-dev \
10699,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# configure: error: prove not found
10700,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10701,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10702,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10703,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10704,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10705,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10706,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10707,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10708,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10709,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10710,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10711,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10712,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile, # backwards compat
10713,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10714,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10715,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10716,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10717,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		krb5-dev \
10718,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		openldap-dev \
10719,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: prove not found
10720,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10721,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10722,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10723,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10724,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10725,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10726,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10727,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10728,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10729,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10730,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10731,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10732,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10733,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10734,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile, # backwards compat
10735,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10736,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10737,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10738,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10739,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		krb5-dev \
10740,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		openldap-dev \
10741,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10742,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10743,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10744,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10745,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10746,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10747,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10748,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10749,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10750,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10751,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10752,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# vim:set ft=dockerfile:
10753,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10754,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# grab gosu for easy step-down from root
10755,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10756,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10757,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
10758,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10759,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10760,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10761,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		krb5-dev \
10762,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		openldap-dev \
10763,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: prove not found
10764,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10765,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10766,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10767,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10768,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10769,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10770,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10771,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10772,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10773,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#p' --recursive /usr/local \
10774,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10775,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10776,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10777,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10778,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# vim:set ft=dockerfile:
10779,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# explicitly set user/group IDs
10780,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# grab gosu for easy step-down from root
10781,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10782,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10783,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# arches officialy built by upstream
10784,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10785,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
10786,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
10787,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10788,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10789,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10790,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10791,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10792,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
10793,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10794,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10795,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template, # backwards compat
10796,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# vim:set ft=dockerfile:
10797,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# explicitly set user/group IDs
10798,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# grab gosu for easy step-down from root
10799,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10800,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10801,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10802,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10803,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# vim:set ft=dockerfile:
10804,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# explicitly set user/group IDs
10805,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# grab gosu for easy step-down from root
10806,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10807,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10808,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10809,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10810,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10811,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10812,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile, # backwards compat
10813,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# vim:set ft=dockerfile:
10814,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# explicitly set user/group IDs
10815,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10816,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10817,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# grab gosu for easy step-down from root
10818,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10819,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10820,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10821,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10822,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10823,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10824,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# arches officialy built by upstream
10825,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10826,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10827,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10828,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10829,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10830,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10831,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10832,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10833,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10834,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10835,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10836,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10837,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10838,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile, # backwards compat
10839,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10840,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10841,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10842,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10843,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		krb5-dev \
10844,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		openldap-dev \
10845,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# configure: error: prove not found
10846,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10847,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10848,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10849,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10850,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10851,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10852,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10853,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10854,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10855,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10856,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10857,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10858,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10859,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10860,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile, # backwards compat
10861,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# vim:set ft=dockerfile:
10862,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# explicitly set user/group IDs
10863,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# grab gosu for easy step-down from root
10864,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10865,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10866,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10867,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10868,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# arches officialy built by upstream
10869,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10870,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10871,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10872,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10873,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10874,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10875,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10876,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10877,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10878,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10879,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10880,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile, # backwards compat
10881,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# vim:set ft=dockerfile:
10882,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10883,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# grab gosu for easy step-down from root
10884,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10885,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10886,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,# vim:set ft=dockerfile:
10887,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10888,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,# grab gosu for easy step-down from root
10889,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10890,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10891,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
10892,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10893,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10894,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10895,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		krb5-dev \
10896,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		openldap-dev \
10897,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10898,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10899,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10900,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10901,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10902,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10903,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10904,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10905,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10906,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10907,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
10908,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10909,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
10910,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10911,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,#		krb5-dev \
10912,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,#		openldap-dev \
10913,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,# configure: error: prove not found
10914,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
10915,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10916,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10917,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10918,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10919,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10920,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10921,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10922,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10923,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,#p' --recursive /usr/local \
10924,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10925,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
10926,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10927,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10928,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template, # backwards compat
10929,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# vim:set ft=dockerfile:
10930,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# explicitly set user/group IDs
10931,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10932,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10933,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# grab gosu for easy step-down from root
10934,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10935,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10936,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10937,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10938,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10939,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# arches officialy built by upstream
10940,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10941,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10942,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10943,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10944,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10945,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10946,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10947,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10948,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10949,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10950,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10951,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10952,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10953,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile, # backwards compat
10954,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# vim:set ft=dockerfile:
10955,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# explicitly set user/group IDs
10956,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# grab gosu for easy step-down from root
10957,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10958,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10959,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10960,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10961,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# arches officialy built by upstream
10962,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10963,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10964,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10965,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10966,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10967,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10968,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10969,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10970,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10971,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10972,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10973,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile, # backwards compat
10974,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# vim:set ft=dockerfile:
10975,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# explicitly set user/group IDs
10976,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# grab gosu for easy step-down from root
10977,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10978,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10979,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10980,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10981,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10982,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10983,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10984,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10985,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		krb5-dev \
10986,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		openldap-dev \
10987,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: prove not found
10988,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10989,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10990,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10991,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
10992,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10993,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10994,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10995,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10996,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10997,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10998,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10999,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11000,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11001,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11002,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile, # backwards compat
11003,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11004,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11005,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11006,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11007,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		krb5-dev \
11008,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		openldap-dev \
11009,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: prove not found
11010,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11011,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11012,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11013,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11014,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11015,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11016,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11017,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11018,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11019,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11020,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11021,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11022,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11023,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11024,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile, # backwards compat
11025,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11026,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11027,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11028,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11029,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		krb5-dev \
11030,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		openldap-dev \
11031,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: prove not found
11032,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11033,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11034,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11035,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11036,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11037,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11038,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11039,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11040,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11041,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11042,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11043,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11044,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11045,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile, # backwards compat
11046,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# vim:set ft=dockerfile:
11047,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# explicitly set user/group IDs
11048,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11049,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11050,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# grab gosu for easy step-down from root
11051,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11052,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11053,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11054,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11055,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11056,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# arches officialy built by upstream
11057,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11058,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11059,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11060,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11061,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11062,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11063,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11064,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11065,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11066,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11067,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11068,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11069,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11070,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile, # backwards compat
11071,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11072,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11073,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11074,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11075,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		krb5-dev \
11076,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		openldap-dev \
11077,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: prove not found
11078,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11079,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11080,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11081,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11082,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11083,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11084,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11085,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11086,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11087,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11088,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11089,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11090,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11091,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11092,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile, # backwards compat
11093,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
11094,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11095,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11096,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11097,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		krb5-dev \
11098,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		openldap-dev \
11099,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: prove not found
11100,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11101,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11102,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11103,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11104,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11105,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11106,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11107,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11108,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11109,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#p' --recursive /usr/local \
11110,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11111,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11112,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11113,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11114,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# vim:set ft=dockerfile:
11115,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# explicitly set user/group IDs
11116,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# grab gosu for easy step-down from root
11117,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11118,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11119,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11120,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11121,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11122,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11123,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile, # backwards compat
11124,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11125,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11126,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11127,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11128,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		krb5-dev \
11129,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		openldap-dev \
11130,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11131,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11132,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11133,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11134,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11135,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11136,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11137,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11138,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11139,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11140,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
11141,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11142,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
11143,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11144,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,#		krb5-dev \
11145,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,#		openldap-dev \
11146,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,# configure: error: prove not found
11147,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
11148,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11149,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11150,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11151,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11152,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11153,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11154,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11155,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11156,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,#p' --recursive /usr/local \
11157,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11158,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
11159,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11160,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11161,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template, # backwards compat
11162,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
11163,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11164,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11165,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11166,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		krb5-dev \
11167,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		openldap-dev \
11168,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: prove not found
11169,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11170,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11171,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11172,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11173,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11174,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11175,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11176,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11177,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11178,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
11179,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11180,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11181,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11182,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11183,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# vim:set ft=dockerfile:
11184,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11185,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# grab gosu for easy step-down from root
11186,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11187,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11188,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11189,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11190,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11191,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11192,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		krb5-dev \
11193,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		openldap-dev \
11194,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: prove not found
11195,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11196,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11197,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
11198,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11199,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11200,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11201,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11202,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11203,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11204,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11205,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11206,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
11207,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11208,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11209,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11210,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11211,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile, # backwards compat
11212,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# vim:set ft=dockerfile:
11213,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# explicitly set user/group IDs
11214,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# grab gosu for easy step-down from root
11215,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11216,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11217,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11218,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11219,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11220,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11221,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
11222,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11223,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
11224,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11225,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,#		krb5-dev \
11226,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,#		openldap-dev \
11227,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11228,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11229,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11230,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11231,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11232,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11233,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11234,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11235,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
11236,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11237,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11238,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# vim:set ft=dockerfile:
11239,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11240,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# grab gosu for easy step-down from root
11241,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11242,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11243,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11244,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
11245,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11246,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11247,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		krb5-dev \
11248,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		openldap-dev \
11249,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: prove not found
11250,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11251,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11252,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11253,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11254,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11255,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11256,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11257,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11258,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11259,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11260,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11261,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11262,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11263,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11264,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile, # backwards compat
11265,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11266,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11267,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11268,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11269,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		krb5-dev \
11270,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		openldap-dev \
11271,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11272,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11273,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11274,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11275,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11276,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
11277,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11278,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11279,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# vim:set ft=dockerfile:
11280,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# explicitly set user/group IDs
11281,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11282,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11283,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
11284,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11285,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11286,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11287,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11288,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11289,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11290,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# arches officialy built by upstream
11291,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11292,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11293,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11294,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11295,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11296,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11297,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11298,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11299,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11300,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11301,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11302,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11303,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11304,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile, # backwards compat
11305,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# vim:set ft=dockerfile:
11306,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# explicitly set user/group IDs
11307,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11308,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11309,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# grab gosu for easy step-down from root
11310,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11311,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11312,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11313,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11314,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11315,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# arches officialy built by upstream
11316,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11317,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11318,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11319,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11320,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11321,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11322,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11323,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11324,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11325,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11326,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11327,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11328,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11329,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile, # backwards compat
11330,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# vim:set ft=dockerfile:
11331,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# explicitly set user/group IDs
11332,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# grab gosu for easy step-down from root
11333,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11334,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11335,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11336,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11337,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11338,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11339,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11340,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11341,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		krb5-dev \
11342,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		openldap-dev \
11343,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11344,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11345,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11346,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11347,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11348,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11349,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11350,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11351,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11352,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11353,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11354,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11355,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		krb5-dev \
11356,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		openldap-dev \
11357,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: prove not found
11358,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11359,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11360,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11361,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11362,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11363,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11364,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11365,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11366,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11367,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11368,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11369,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11370,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11371,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11372,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile, # backwards compat
11373,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# vim:set ft=dockerfile:
11374,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# explicitly set user/group IDs
11375,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# grab gosu for easy step-down from root
11376,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11377,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11378,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11379,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11380,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11381,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11382,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile, # backwards compat
11383,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11384,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11385,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11386,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11387,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		krb5-dev \
11388,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		openldap-dev \
11389,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11390,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11391,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11392,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11393,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11394,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11395,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11396,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11397,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# vim:set ft=dockerfile:
11398,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11399,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# grab gosu for easy step-down from root
11400,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11401,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11402,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# vim:set ft=dockerfile:
11403,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# explicitly set user/group IDs
11404,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11405,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11406,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# grab gosu for easy step-down from root
11407,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11408,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11409,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11410,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11411,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
11412,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# arches officialy built by upstream
11413,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11414,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11415,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11416,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11417,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11418,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11419,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11420,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11421,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11422,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11423,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11424,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11425,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11426,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile, # backwards compat
11427,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11428,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11429,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11430,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11431,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		krb5-dev \
11432,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		openldap-dev \
11433,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11434,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11435,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11436,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11437,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11438,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11439,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11440,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11441,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11442,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11443,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11444,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile, # backwards compat
11445,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11446,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11447,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11448,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11449,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		krb5-dev \
11450,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		openldap-dev \
11451,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: prove not found
11452,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11453,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11454,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11455,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11456,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11457,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11458,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11459,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11460,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11461,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11462,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11463,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11464,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11465,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11466,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile, # backwards compat
11467,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
11468,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11469,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
11470,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11471,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,#		krb5-dev \
11472,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,#		openldap-dev \
11473,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,# configure: error: prove not found
11474,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
11475,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11476,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11477,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
11478,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11479,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11480,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11481,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11482,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11483,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,#p' --recursive /usr/local \
11484,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11485,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
11486,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11487,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11488,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template, # backwards compat
11489,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# vim:set ft=dockerfile:
11490,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# explicitly set user/group IDs
11491,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11492,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11493,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
11494,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11495,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11496,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11497,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11498,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11499,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# see note below about ""*.pyc"" files"
11500,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# arches officialy built by upstream
11501,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11502,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11503,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11504,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11505,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11506,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11507,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11508,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11509,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11510,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11511,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11512,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11513,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11514,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile, # backwards compat
11515,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# vim:set ft=dockerfile:
11516,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# explicitly set user/group IDs
11517,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11518,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11519,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# grab gosu for easy step-down from root
11520,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11521,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11522,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11523,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11524,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
11525,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# arches officialy built by upstream
11526,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11527,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11528,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
11529,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
11530,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11531,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11532,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11533,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11534,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11535,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11536,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
11537,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11538,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11539,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template, # backwards compat
11540,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11541,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11542,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11543,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11544,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		krb5-dev \
11545,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		openldap-dev \
11546,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: prove not found
11547,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11548,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11549,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11550,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11551,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11552,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11553,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11554,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11555,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11556,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11557,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11558,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11559,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11560,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11561,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile, # backwards compat
11562,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# vim:set ft=dockerfile:
11563,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# explicitly set user/group IDs
11564,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11565,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11566,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# grab gosu for easy step-down from root
11567,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11568,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11569,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11570,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11571,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11572,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11573,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# arches officialy built by upstream
11574,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11575,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11576,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11577,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11578,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11579,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11580,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11581,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11582,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11583,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11584,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11585,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11586,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11587,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile, # backwards compat
11588,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# vim:set ft=dockerfile:
11589,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# explicitly set user/group IDs
11590,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11591,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11592,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# grab gosu for easy step-down from root
11593,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11594,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11595,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11596,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11597,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11598,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# see note below about ""*.pyc"" files"
11599,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# arches officialy built by upstream
11600,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11601,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11602,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11603,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11604,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11605,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11606,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11607,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11608,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11609,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11610,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11611,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11612,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11613,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile, # backwards compat
11614,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# vim:set ft=dockerfile:
11615,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# explicitly set user/group IDs
11616,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# grab gosu for easy step-down from root
11617,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11618,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11619,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# arches officialy built by upstream
11620,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11621,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11622,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11623,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11624,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11625,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11626,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11627,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11628,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11629,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11630,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11631,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile, # backwards compat
11632,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# vim:set ft=dockerfile:
11633,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# explicitly set user/group IDs
11634,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11635,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11636,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# grab gosu for easy step-down from root
11637,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11638,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11639,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11640,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11641,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# arches officialy built by upstream
11642,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11643,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11644,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11645,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11646,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11647,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11648,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11649,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11650,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11651,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11652,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11653,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile, # backwards compat
11654,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# vim:set ft=dockerfile:
11655,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# explicitly set user/group IDs
11656,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11657,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11658,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# grab gosu for easy step-down from root
11659,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11660,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11661,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11662,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11663,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11664,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# arches officialy built by upstream
11665,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11666,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11667,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11668,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11669,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11670,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11671,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11672,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11673,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11674,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11675,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11676,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11677,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11678,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile, # backwards compat
11679,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# vim:set ft=dockerfile:
11680,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11681,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# grab gosu for easy step-down from root
11682,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11683,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11684,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# vim:set ft=dockerfile:
11685,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# explicitly set user/group IDs
11686,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# grab gosu for easy step-down from root
11687,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11688,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11689,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11690,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11691,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# arches officialy built by upstream
11692,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11693,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11694,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11695,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11696,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11697,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11698,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11699,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11700,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11701,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11702,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11703,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile, # backwards compat
11704,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# vim:set ft=dockerfile:
11705,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# explicitly set user/group IDs
11706,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11707,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11708,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# grab gosu for easy step-down from root
11709,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11710,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11711,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11712,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11713,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11714,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# see note below about ""*.pyc"" files"
11715,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# arches officialy built by upstream
11716,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11717,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11718,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11719,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11720,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11721,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11722,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11723,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11724,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11725,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11726,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11727,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11728,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11729,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile, # backwards compat
11730,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# vim:set ft=dockerfile:
11731,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# explicitly set user/group IDs
11732,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11733,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11734,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# grab gosu for easy step-down from root
11735,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11736,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11737,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11738,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11739,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# see note below about ""*.pyc"" files"
11740,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# arches officialy built by upstream
11741,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11742,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11743,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11744,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11745,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11746,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11747,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11748,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11749,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11750,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11751,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11752,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11753,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11754,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile, # backwards compat
11755,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# vim:set ft=dockerfile:
11756,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# explicitly set user/group IDs
11757,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# grab gosu for easy step-down from root
11758,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11759,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11760,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# arches officialy built by upstream
11761,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11762,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
11763,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
11764,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11765,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11766,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11767,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11768,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11769,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
11770,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11771,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11772,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template, # backwards compat
11773,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11774,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11775,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11776,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11777,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		krb5-dev \
11778,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		openldap-dev \
11779,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: prove not found
11780,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11781,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11782,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11783,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11784,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11785,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11786,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11787,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11788,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11789,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
11790,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11791,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11792,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11793,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11794,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile, # backwards compat
11795,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# vim:set ft=dockerfile:
11796,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# explicitly set user/group IDs
11797,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# grab gosu for easy step-down from root
11798,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11799,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11800,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11801,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11802,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11803,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11804,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile, # backwards compat
11805,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# vim:set ft=dockerfile:
11806,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# explicitly set user/group IDs
11807,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# grab gosu for easy step-down from root
11808,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11809,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11810,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11811,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11812,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11813,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11814,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11815,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11816,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11817,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11818,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		krb5-dev \
11819,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		openldap-dev \
11820,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: prove not found
11821,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11822,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11823,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11824,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11825,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11826,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11827,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11828,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11829,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11830,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11831,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11832,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11833,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11834,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11835,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile, # backwards compat
11836,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# vim:set ft=dockerfile:
11837,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11838,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# grab gosu for easy step-down from root
11839,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11840,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11841,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11842,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11843,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11844,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11845,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		krb5-dev \
11846,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		openldap-dev \
11847,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11848,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11849,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11850,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11851,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11852,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11853,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11854,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11855,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11856,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		krb5-dev \
11857,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		openldap-dev \
11858,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: prove not found
11859,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11860,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11861,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11862,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11863,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11864,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11865,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11866,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11867,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11868,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11869,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11870,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11871,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11872,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11873,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile, # backwards compat
11874,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# vim:set ft=dockerfile:
11875,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# explicitly set user/group IDs
11876,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# grab gosu for easy step-down from root
11877,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11878,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11879,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# arches officialy built by upstream
11880,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11881,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
11882,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
11883,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11884,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11885,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11886,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11887,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11888,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
11889,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11890,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11891,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template, # backwards compat
11892,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
11893,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11894,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
11895,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11896,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,#		krb5-dev \
11897,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,#		openldap-dev \
11898,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,# configure: error: prove not found
11899,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
11900,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11901,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11902,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11903,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11904,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11905,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11906,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11907,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11908,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,#p' --recursive /usr/local \
11909,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11910,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
11911,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11912,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11913,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template, # backwards compat
11914,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# vim:set ft=dockerfile:
11915,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# explicitly set user/group IDs
11916,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# grab gosu for easy step-down from root
11917,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11918,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11919,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# vim:set ft=dockerfile:
11920,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# explicitly set user/group IDs
11921,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# grab gosu for easy step-down from root
11922,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11923,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11924,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11925,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11926,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# arches officialy built by upstream
11927,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11928,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11929,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11930,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11931,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11932,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11933,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11934,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11935,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11936,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11937,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11938,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile, # backwards compat
11939,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# vim:set ft=dockerfile:
11940,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# explicitly set user/group IDs
11941,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# grab gosu for easy step-down from root
11942,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11943,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11944,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# arches officialy built by upstream
11945,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11946,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11947,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11948,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11949,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11950,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11951,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11952,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11953,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11954,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11955,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11956,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile, # backwards compat
11957,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11958,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11959,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11960,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11961,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		krb5-dev \
11962,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		openldap-dev \
11963,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11964,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11965,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11966,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11967,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11968,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11969,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11970,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11971,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11972,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11973,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11974,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11975,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11976,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11977,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11978,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		krb5-dev \
11979,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		openldap-dev \
11980,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11981,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11982,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11983,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11984,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11985,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11986,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11987,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11988,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11989,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11990,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# vim:set ft=dockerfile:
11991,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# explicitly set user/group IDs
11992,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11993,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11994,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# grab gosu for easy step-down from root
11995,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11996,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11997,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11998,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11999,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
12000,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# arches officialy built by upstream
12001,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12002,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12003,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12004,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12005,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12006,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12007,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12008,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12009,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12010,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12011,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12012,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12013,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12014,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile, # backwards compat
12015,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
12016,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12017,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12018,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12019,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		krb5-dev \
12020,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		openldap-dev \
12021,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: prove not found
12022,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12023,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12024,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12025,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
12026,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12027,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12028,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12029,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12030,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12031,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#p' --recursive /usr/local \
12032,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12033,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12034,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12035,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12036,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12037,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12038,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12039,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12040,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		krb5-dev \
12041,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		openldap-dev \
12042,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12043,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12044,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12045,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12046,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12047,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12048,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12049,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12050,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12051,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12052,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12053,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile, # backwards compat
12054,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12055,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12056,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12057,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12058,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		krb5-dev \
12059,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		openldap-dev \
12060,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12061,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12062,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12063,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12064,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12065,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
12066,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12067,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12068,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# vim:set ft=dockerfile:
12069,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# explicitly set user/group IDs
12070,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# grab gosu for easy step-down from root
12071,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12072,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12073,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12074,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12075,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12076,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12077,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile, # backwards compat
12078,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
12079,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12080,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
12081,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12082,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,#		krb5-dev \
12083,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,#		openldap-dev \
12084,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12085,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12086,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12087,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12088,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12089,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12090,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12091,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12092,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12093,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		krb5-dev \
12094,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		openldap-dev \
12095,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12096,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12097,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12098,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12099,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12100,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12101,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12102,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12103,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12104,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12105,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12106,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12107,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile, # backwards compat
12108,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12109,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12110,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12111,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12112,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		krb5-dev \
12113,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		openldap-dev \
12114,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: prove not found
12115,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12116,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12117,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12118,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12119,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12120,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12121,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12122,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12123,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12124,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
12125,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12126,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12127,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12128,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12129,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile, # backwards compat
12130,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12131,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12132,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12133,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12134,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		krb5-dev \
12135,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		openldap-dev \
12136,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: prove not found
12137,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12138,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12139,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12140,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12141,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12142,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12143,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12144,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12145,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12146,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12147,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12148,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12149,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12150,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile, # backwards compat
12151,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12152,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12153,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12154,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12155,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		krb5-dev \
12156,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		openldap-dev \
12157,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: prove not found
12158,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12159,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12160,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12161,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12162,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12163,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12164,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12165,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12166,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12167,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12168,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12169,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
12170,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12171,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12172,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12173,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12174,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile, # backwards compat
12175,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# vim:set ft=dockerfile:
12176,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# explicitly set user/group IDs
12177,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# grab gosu for easy step-down from root
12178,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12179,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12180,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# vim:set ft=dockerfile:
12181,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# explicitly set user/group IDs
12182,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12183,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12184,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# grab gosu for easy step-down from root
12185,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12186,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12187,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12188,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12189,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
12190,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# arches officialy built by upstream
12191,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12192,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12193,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
12194,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
12195,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12196,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12197,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12198,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12199,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12200,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12201,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
12202,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12203,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12204,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template, # backwards compat
12205,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12206,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12207,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12208,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12209,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		krb5-dev \
12210,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		openldap-dev \
12211,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: prove not found
12212,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12213,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12214,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12215,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12216,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12217,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12218,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12219,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12220,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12221,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12222,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12223,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12224,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12225,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12226,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile, # backwards compat
12227,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
12228,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12229,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12230,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12231,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		krb5-dev \
12232,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		openldap-dev \
12233,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: prove not found
12234,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12235,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12236,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12237,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
12238,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12239,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12240,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12241,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12242,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12243,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#p' --recursive /usr/local \
12244,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12245,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12246,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12247,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12248,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# vim:set ft=dockerfile:
12249,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# explicitly set user/group IDs
12250,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12251,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12252,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# grab gosu for easy step-down from root
12253,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12254,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12255,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12256,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12257,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12258,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# arches officialy built by upstream
12259,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12260,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12261,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12262,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12263,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12264,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12265,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12266,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12267,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12268,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12269,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12270,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12271,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12272,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile, # backwards compat
12273,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,# vim:set ft=dockerfile:
12274,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12275,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,# grab gosu for easy step-down from root
12276,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12277,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12278,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# vim:set ft=dockerfile:
12279,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# explicitly set user/group IDs
12280,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12281,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12282,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# grab gosu for easy step-down from root
12283,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12284,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12285,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12286,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12287,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
12288,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# arches officialy built by upstream
12289,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12290,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12291,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12292,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12293,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12294,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12295,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12296,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12297,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12298,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12299,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12300,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12301,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12302,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile, # backwards compat
12303,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12304,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12305,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12306,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12307,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		krb5-dev \
12308,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		openldap-dev \
12309,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: prove not found
12310,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12311,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12312,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12313,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12314,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12315,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12316,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12317,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12318,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12319,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12320,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12321,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12322,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12323,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12324,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile, # backwards compat
12325,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# vim:set ft=dockerfile:
12326,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# explicitly set user/group IDs
12327,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12328,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12329,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# grab gosu for easy step-down from root
12330,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12331,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12332,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12333,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12334,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12335,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# arches officialy built by upstream
12336,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12337,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12338,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12339,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12340,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12341,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12342,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12343,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12344,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12345,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12346,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12347,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12348,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12349,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile, # backwards compat
12350,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12351,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12352,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12353,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12354,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		krb5-dev \
12355,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		openldap-dev \
12356,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12357,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12358,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12359,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12360,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12361,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12362,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12363,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12364,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12365,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12366,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12367,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile, # backwards compat
12368,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# vim:set ft=dockerfile:
12369,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# explicitly set user/group IDs
12370,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12371,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12372,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# grab gosu for easy step-down from root
12373,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12374,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12375,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12376,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12377,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# see note below about ""*.pyc"" files"
12378,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# arches officialy built by upstream
12379,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12380,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12381,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12382,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12383,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12384,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12385,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12386,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12387,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12388,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12389,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12390,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12391,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12392,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile, # backwards compat
12393,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12394,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12395,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12396,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12397,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		krb5-dev \
12398,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		openldap-dev \
12399,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: prove not found
12400,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12401,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12402,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12403,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12404,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12405,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12406,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12407,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12408,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12409,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12410,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12411,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12412,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12413,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile, # backwards compat
12414,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# vim:set ft=dockerfile:
12415,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# explicitly set user/group IDs
12416,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# grab gosu for easy step-down from root
12417,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12418,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12419,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12420,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12421,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# vim:set ft=dockerfile:
12422,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# explicitly set user/group IDs
12423,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# grab gosu for easy step-down from root
12424,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12425,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12426,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12427,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12428,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12429,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12430,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		krb5-dev \
12431,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		openldap-dev \
12432,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: prove not found
12433,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12434,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12435,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12436,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12437,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12438,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12439,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12440,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12441,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12442,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12443,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12444,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12445,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12446,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12447,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile, # backwards compat
12448,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12449,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12450,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12451,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12452,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		krb5-dev \
12453,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		openldap-dev \
12454,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12455,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12456,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12457,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12458,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12459,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12460,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12461,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12462,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12463,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12464,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12465,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12466,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12467,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12468,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12469,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		krb5-dev \
12470,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		openldap-dev \
12471,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: prove not found
12472,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12473,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12474,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12475,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12476,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12477,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12478,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12479,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12480,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12481,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12482,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12483,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12484,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12485,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12486,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile, # backwards compat
12487,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# vim:set ft=dockerfile:
12488,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# explicitly set user/group IDs
12489,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12490,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12491,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# grab gosu for easy step-down from root
12492,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12493,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12494,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12495,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12496,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12497,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12498,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# arches officialy built by upstream
12499,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12500,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12501,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12502,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12503,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12504,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12505,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12506,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12507,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12508,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12509,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12510,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12511,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12512,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile, # backwards compat
12513,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# vim:set ft=dockerfile:
12514,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# explicitly set user/group IDs
12515,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# grab gosu for easy step-down from root
12516,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12517,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12518,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12519,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12520,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12521,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12522,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile, # backwards compat
12523,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12524,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12525,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12526,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12527,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		krb5-dev \
12528,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		openldap-dev \
12529,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12530,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12531,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12532,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12533,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12534,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12535,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12536,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12537,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# vim:set ft=dockerfile:
12538,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12539,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# grab gosu for easy step-down from root
12540,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12541,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12542,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# vim:set ft=dockerfile:
12543,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# explicitly set user/group IDs
12544,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12545,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12546,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# grab gosu for easy step-down from root
12547,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12548,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12549,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12550,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12551,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12552,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# arches officialy built by upstream
12553,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12554,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12555,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12556,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12557,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12558,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12559,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12560,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12561,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12562,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12563,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12564,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12565,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12566,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile, # backwards compat
12567,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12568,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12569,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12570,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12571,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		krb5-dev \
12572,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		openldap-dev \
12573,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: prove not found
12574,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12575,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12576,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12577,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12578,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12579,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12580,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12581,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12582,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12583,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#p' --recursive /usr/local \
12584,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12585,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12586,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12587,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12588,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile, # backwards compat
12589,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# vim:set ft=dockerfile:
12590,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# explicitly set user/group IDs
12591,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# grab gosu for easy step-down from root
12592,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12593,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12594,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12595,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12596,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# arches officialy built by upstream
12597,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12598,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12599,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12600,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12601,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12602,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12603,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12604,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12605,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12606,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12607,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12608,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile, # backwards compat
12609,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
12610,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12611,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12612,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12613,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		krb5-dev \
12614,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		openldap-dev \
12615,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: prove not found
12616,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12617,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12618,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12619,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12620,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12621,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12622,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12623,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12624,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12625,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#p' --recursive /usr/local \
12626,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12627,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12628,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12629,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12630,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile, # backwards compat
12631,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
12632,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12633,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
12634,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12635,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,#		krb5-dev \
12636,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,#		openldap-dev \
12637,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,# configure: error: prove not found
12638,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
12639,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12640,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12641,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12642,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12643,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12644,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12645,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12646,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12647,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12648,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
12649,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12650,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12651,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template, # backwards compat
12652,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12653,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12654,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12655,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12656,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		krb5-dev \
12657,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		openldap-dev \
12658,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: prove not found
12659,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12660,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12661,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12662,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12663,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12664,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12665,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12666,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12667,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12668,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12669,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12670,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12671,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12672,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12673,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile, # backwards compat
12674,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# vim:set ft=dockerfile:
12675,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12676,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# grab gosu for easy step-down from root
12677,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12678,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12679,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12680,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12681,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12682,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12683,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		krb5-dev \
12684,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		openldap-dev \
12685,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12686,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12687,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12688,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12689,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12690,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12691,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12692,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12693,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,# vim:set ft=dockerfile:
12694,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,# explicitly set user/group IDs
12695,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,# grab gosu for easy step-down from root
12696,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12697,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12698,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12699,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
12700,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12701,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12702,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template, # backwards compat
12703,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# vim:set ft=dockerfile:
12704,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# explicitly set user/group IDs
12705,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# grab gosu for easy step-down from root
12706,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12707,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12708,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12709,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12710,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12711,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12712,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12713,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12714,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12715,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		krb5-dev \
12716,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		openldap-dev \
12717,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: prove not found
12718,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12719,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12720,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12721,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12722,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12723,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12724,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12725,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12726,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12727,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12728,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12729,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12730,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12731,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12732,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile, # backwards compat
12733,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12734,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12735,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12736,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12737,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		krb5-dev \
12738,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		openldap-dev \
12739,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12740,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12741,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12742,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12743,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12744,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12745,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12746,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12747,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
12748,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12749,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
12750,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12751,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,#		krb5-dev \
12752,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,#		openldap-dev \
12753,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,# configure: error: prove not found
12754,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
12755,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12756,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12757,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12758,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12759,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12760,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12761,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12762,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12763,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,#p' --recursive /usr/local \
12764,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12765,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
12766,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12767,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12768,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template, # backwards compat
12769,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# vim:set ft=dockerfile:
12770,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# explicitly set user/group IDs
12771,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12772,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12773,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# grab gosu for easy step-down from root
12774,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12775,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12776,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12777,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12778,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12779,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
12780,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# arches officialy built by upstream
12781,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12782,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12783,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
12784,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
12785,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12786,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12787,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12788,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12789,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12790,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12791,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
12792,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12793,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12794,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template, # backwards compat
12795,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# vim:set ft=dockerfile:
12796,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# explicitly set user/group IDs
12797,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# grab gosu for easy step-down from root
12798,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12799,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12800,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# vim:set ft=dockerfile:
12801,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# explicitly set user/group IDs
12802,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# grab gosu for easy step-down from root
12803,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12804,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12805,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12806,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12807,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# vim:set ft=dockerfile:
12808,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12809,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# grab gosu for easy step-down from root
12810,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12811,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12812,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# vim:set ft=dockerfile:
12813,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# explicitly set user/group IDs
12814,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12815,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12816,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# grab gosu for easy step-down from root
12817,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12818,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12819,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12820,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12821,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
12822,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# arches officialy built by upstream
12823,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12824,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12825,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12826,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12827,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12828,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12829,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12830,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12831,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12832,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12833,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12834,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12835,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12836,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile, # backwards compat
12837,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# vim:set ft=dockerfile:
12838,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# explicitly set user/group IDs
12839,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12840,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12841,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# grab gosu for easy step-down from root
12842,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12843,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12844,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12845,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12846,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
12847,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# arches officialy built by upstream
12848,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12849,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12850,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12851,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12852,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12853,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12854,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12855,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12856,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12857,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12858,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12859,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12860,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12861,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile, # backwards compat
12862,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12863,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12864,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12865,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12866,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		krb5-dev \
12867,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		openldap-dev \
12868,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: prove not found
12869,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12870,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12871,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12872,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
12873,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12874,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12875,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12876,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12877,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12878,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12879,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12880,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12881,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12882,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12883,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile, # backwards compat
12884,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# vim:set ft=dockerfile:
12885,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# explicitly set user/group IDs
12886,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12887,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12888,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# grab gosu for easy step-down from root
12889,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12890,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12891,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12892,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12893,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12894,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# arches officialy built by upstream
12895,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12896,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12897,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12898,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12899,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12900,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12901,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12902,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12903,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12904,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12905,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12906,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12907,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12908,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile, # backwards compat
12909,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12910,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12911,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12912,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12913,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		krb5-dev \
12914,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		openldap-dev \
12915,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12916,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12917,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12918,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12919,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12920,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12921,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12922,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12923,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# vim:set ft=dockerfile:
12924,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# explicitly set user/group IDs
12925,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12926,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12927,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# grab gosu for easy step-down from root
12928,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12929,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12930,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12931,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12932,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12933,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# arches officialy built by upstream
12934,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12935,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12936,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12937,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12938,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12939,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12940,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12941,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12942,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12943,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12944,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12945,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12946,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12947,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile, # backwards compat
12948,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# vim:set ft=dockerfile:
12949,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# explicitly set user/group IDs
12950,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# grab gosu for easy step-down from root
12951,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12952,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12953,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# vim:set ft=dockerfile:
12954,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# explicitly set user/group IDs
12955,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# grab gosu for easy step-down from root
12956,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12957,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12958,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12959,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12960,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# arches officialy built by upstream
12961,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12962,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12963,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12964,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12965,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12966,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12967,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12968,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12969,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12970,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12971,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12972,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile, # backwards compat
12973,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12974,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12975,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12976,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12977,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		krb5-dev \
12978,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		openldap-dev \
12979,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: prove not found
12980,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12981,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12982,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12983,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12984,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12985,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12986,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12987,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12988,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12989,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12990,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12991,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12992,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12993,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12994,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile, # backwards compat
12995,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# vim:set ft=dockerfile:
12996,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12997,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# grab gosu for easy step-down from root
12998,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12999,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13000,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13001,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13002,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13003,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13004,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		krb5-dev \
13005,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		openldap-dev \
13006,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: prove not found
13007,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13008,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13009,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13010,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13011,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13012,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13013,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13014,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13015,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13016,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13017,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13018,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13019,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13020,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13021,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13022,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile, # backwards compat
13023,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
13024,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
13025,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13026,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13027,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# vim:set ft=dockerfile:
13028,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# explicitly set user/group IDs
13029,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13030,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13031,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# grab gosu for easy step-down from root
13032,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13033,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13034,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13035,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13036,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
13037,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# arches officialy built by upstream
13038,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13039,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13040,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13041,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13042,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13043,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13044,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13045,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13046,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13047,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13048,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13049,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13050,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13051,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile, # backwards compat
13052,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# vim:set ft=dockerfile:
13053,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# explicitly set user/group IDs
13054,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# grab gosu for easy step-down from root
13055,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13056,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13057,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# arches officialy built by upstream
13058,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13059,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13060,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13061,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13062,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13063,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13064,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13065,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13066,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13067,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13068,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13069,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile, # backwards compat
13070,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# vim:set ft=dockerfile:
13071,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# explicitly set user/group IDs
13072,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# grab gosu for easy step-down from root
13073,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13074,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13075,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13076,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13077,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13078,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13079,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile, # backwards compat
13080,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
13081,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13082,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13083,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13084,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		krb5-dev \
13085,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		openldap-dev \
13086,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: prove not found
13087,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13088,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13089,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13090,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13091,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13092,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13093,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13094,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13095,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13096,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
13097,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13098,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13099,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13100,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13101,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile, # backwards compat
13102,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
13103,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13104,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13105,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13106,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		krb5-dev \
13107,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		openldap-dev \
13108,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: prove not found
13109,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13110,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13111,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13112,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13113,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13114,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13115,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13116,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13117,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13118,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#p' --recursive /usr/local \
13119,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13120,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13121,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13122,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13123,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13124,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13125,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13126,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13127,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		krb5-dev \
13128,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		openldap-dev \
13129,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13130,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13131,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13132,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13133,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13134,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
13135,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13136,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13137,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# vim:set ft=dockerfile:
13138,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# explicitly set user/group IDs
13139,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# grab gosu for easy step-down from root
13140,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13141,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13142,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# arches officialy built by upstream
13143,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13144,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13145,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13146,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13147,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13148,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13149,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13150,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13151,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13152,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13153,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13154,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile, # backwards compat
13155,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13156,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13157,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13158,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13159,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		krb5-dev \
13160,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		openldap-dev \
13161,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: prove not found
13162,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13163,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13164,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13165,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13166,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13167,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13168,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13169,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13170,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13171,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13172,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13173,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13174,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13175,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13176,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile, # backwards compat
13177,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13178,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13179,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13180,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13181,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		krb5-dev \
13182,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		openldap-dev \
13183,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: prove not found
13184,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13185,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13186,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13187,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13188,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13189,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13190,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13191,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13192,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13193,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13194,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13195,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13196,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13197,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13198,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile, # backwards compat
13199,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# vim:set ft=dockerfile:
13200,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# explicitly set user/group IDs
13201,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# grab gosu for easy step-down from root
13202,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13203,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13204,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13205,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# arches officialy built by upstream
13206,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13207,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13208,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13209,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13210,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13211,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13212,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13213,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13214,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13215,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13216,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13217,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile, # backwards compat
13218,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
13219,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13220,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
13221,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13222,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,#		krb5-dev \
13223,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,#		openldap-dev \
13224,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,# configure: error: prove not found
13225,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
13226,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13227,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13228,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13229,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13230,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13231,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13232,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13233,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13234,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,#p' --recursive /usr/local \
13235,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13236,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
13237,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13238,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13239,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template, # backwards compat
13240,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# vim:set ft=dockerfile:
13241,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# explicitly set user/group IDs
13242,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13243,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13244,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# grab gosu for easy step-down from root
13245,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13246,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13247,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13248,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13249,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
13250,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# arches officialy built by upstream
13251,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13252,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13253,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
13254,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
13255,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13256,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13257,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13258,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13259,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13260,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13261,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
13262,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13263,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13264,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template, # backwards compat
13265,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13266,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13267,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# vim:set ft=dockerfile:
13268,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# explicitly set user/group IDs
13269,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13270,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13271,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# grab gosu for easy step-down from root
13272,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13273,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13274,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13275,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13276,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# arches officialy built by upstream
13277,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13278,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13279,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13280,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13281,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13282,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13283,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13284,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13285,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13286,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13287,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13288,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile, # backwards compat
13289,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# vim:set ft=dockerfile:
13290,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# explicitly set user/group IDs
13291,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13292,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13293,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# grab gosu for easy step-down from root
13294,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13295,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13296,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13297,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13298,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
13299,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# arches officialy built by upstream
13300,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13301,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13302,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13303,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13304,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13305,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13306,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13307,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13308,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13309,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13310,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13311,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13312,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13313,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile, # backwards compat
13314,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
13315,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13316,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13317,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13318,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		krb5-dev \
13319,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		openldap-dev \
13320,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13321,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13322,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13323,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13324,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13325,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13326,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13327,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13328,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13329,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13330,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13331,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile, # backwards compat
13332,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,# vim:set ft=dockerfile:
13333,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,# explicitly set user/group IDs
13334,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,# grab gosu for easy step-down from root
13335,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13336,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13337,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13338,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
13339,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13340,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13341,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13342,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13343,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13344,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13345,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		krb5-dev \
13346,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		openldap-dev \
13347,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13348,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13349,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13350,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13351,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13352,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13353,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13354,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13355,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13356,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13357,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13358,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13359,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13360,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13361,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13362,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		krb5-dev \
13363,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		openldap-dev \
13364,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: prove not found
13365,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13366,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13367,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13368,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13369,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13370,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13371,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13372,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13373,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13374,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13375,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13376,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13377,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13378,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile, # backwards compat
13379,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,# vim:set ft=dockerfile:
13380,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13381,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,# grab gosu for easy step-down from root
13382,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13383,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13384,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13385,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13386,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13387,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13388,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		krb5-dev \
13389,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		openldap-dev \
13390,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: prove not found
13391,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13392,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13393,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13394,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13395,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13396,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13397,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13398,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13399,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13400,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13401,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13402,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13403,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13404,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13405,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile, # backwards compat
13406,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# vim:set ft=dockerfile:
13407,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# explicitly set user/group IDs
13408,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# grab gosu for easy step-down from root
13409,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13410,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13411,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# vim:set ft=dockerfile:
13412,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# explicitly set user/group IDs
13413,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# grab gosu for easy step-down from root
13414,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13415,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13416,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13417,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13418,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13419,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13420,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		krb5-dev \
13421,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		openldap-dev \
13422,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13423,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13424,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13425,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13426,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13427,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13428,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13429,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13430,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13431,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13432,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13433,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile, # backwards compat
13434,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13435,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13436,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13437,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13438,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		krb5-dev \
13439,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		openldap-dev \
13440,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: prove not found
13441,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13442,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13443,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13444,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13445,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13446,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13447,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13448,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13449,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13450,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13451,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13452,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13453,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13454,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13455,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13456,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile, # backwards compat
13457,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# vim:set ft=dockerfile:
13458,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13459,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# grab gosu for easy step-down from root
13460,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13461,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13462,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# vim:set ft=dockerfile:
13463,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# explicitly set user/group IDs
13464,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# grab gosu for easy step-down from root
13465,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13466,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13467,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# arches officialy built by upstream
13468,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13469,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13470,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13471,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13472,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13473,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13474,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13475,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13476,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13477,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13478,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13479,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile, # backwards compat
13480,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# vim:set ft=dockerfile:
13481,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# explicitly set user/group IDs
13482,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# grab gosu for easy step-down from root
13483,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13484,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13485,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13486,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# arches officialy built by upstream
13487,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13488,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13489,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13490,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13491,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13492,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13493,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13494,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13495,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13496,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13497,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13498,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile, # backwards compat
13499,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# vim:set ft=dockerfile:
13500,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# explicitly set user/group IDs
13501,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13502,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13503,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# grab gosu for easy step-down from root
13504,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13505,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13506,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13507,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13508,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13509,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13510,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# arches officialy built by upstream
13511,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13512,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13513,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13514,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13515,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13516,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13517,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13518,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13519,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13520,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13521,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13522,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13523,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13524,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile, # backwards compat
13525,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# vim:set ft=dockerfile:
13526,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# explicitly set user/group IDs
13527,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# grab gosu for easy step-down from root
13528,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13529,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13530,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13531,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13532,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# arches officialy built by upstream
13533,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13534,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13535,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13536,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13537,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13538,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13539,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13540,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13541,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13542,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13543,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13544,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile, # backwards compat
13545,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# vim:set ft=dockerfile:
13546,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# explicitly set user/group IDs
13547,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# grab gosu for easy step-down from root
13548,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13549,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13550,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13551,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13552,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13553,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13554,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile, # backwards compat
13555,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13556,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13557,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13558,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13559,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		krb5-dev \
13560,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		openldap-dev \
13561,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13562,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13563,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13564,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13565,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13566,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# vim:set ft=dockerfile:
13567,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13568,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# grab gosu for easy step-down from root
13569,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13570,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13571,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# vim:set ft=dockerfile:
13572,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13573,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# grab gosu for easy step-down from root
13574,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13575,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13576,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# vim:set ft=dockerfile:
13577,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# explicitly set user/group IDs
13578,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13579,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13580,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# grab gosu for easy step-down from root
13581,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13582,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13583,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13584,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13585,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
13586,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# arches officialy built by upstream
13587,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13588,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13589,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13590,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13591,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13592,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13593,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13594,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13595,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13596,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13597,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13598,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13599,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13600,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile, # backwards compat
13601,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,# vim:set ft=dockerfile:
13602,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13603,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13604,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13605,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13606,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13607,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13608,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		krb5-dev \
13609,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		openldap-dev \
13610,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: prove not found
13611,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13612,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13613,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13614,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13615,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13616,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13617,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13618,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13619,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13620,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13621,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13622,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13623,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13624,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13625,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile, # backwards compat
13626,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13627,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13628,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13629,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13630,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13631,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13632,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		krb5-dev \
13633,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		openldap-dev \
13634,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: prove not found
13635,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13636,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13637,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13638,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13639,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13640,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13641,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13642,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13643,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13644,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13645,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13646,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13647,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13648,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13649,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13650,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile, # backwards compat
13651,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13652,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13653,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13654,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13655,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13656,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13657,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13658,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13659,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		krb5-dev \
13660,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		openldap-dev \
13661,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: prove not found
13662,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13663,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13664,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13665,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13666,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13667,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13668,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13669,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13670,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13671,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13672,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13673,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13674,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13675,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13676,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile, # backwards compat
13677,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
13678,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13679,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13680,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13681,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		krb5-dev \
13682,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		openldap-dev \
13683,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: prove not found
13684,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13685,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13686,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13687,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13688,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13689,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13690,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13691,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13692,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13693,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#p' --recursive /usr/local \
13694,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13695,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13696,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13697,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13698,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile, # backwards compat
13699,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13700,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13701,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13702,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13703,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		krb5-dev \
13704,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		openldap-dev \
13705,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: prove not found
13706,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13707,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13708,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13709,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13710,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13711,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13712,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13713,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13714,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13715,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13716,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13717,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
13718,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13719,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13720,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13721,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13722,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile, # backwards compat
13723,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
13724,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13725,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13726,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13727,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		krb5-dev \
13728,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		openldap-dev \
13729,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: prove not found
13730,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13731,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13732,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13733,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13734,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13735,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13736,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13737,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13738,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13739,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#p' --recursive /usr/local \
13740,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13741,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13742,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13743,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13744,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile, # backwards compat
13745,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
13746,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13747,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
13748,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13749,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,#		krb5-dev \
13750,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,#		openldap-dev \
13751,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13752,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13753,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13754,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13755,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13756,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13757,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13758,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13759,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
13760,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13761,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13762,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template, # backwards compat
13763,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13764,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13765,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13766,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13767,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		krb5-dev \
13768,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		openldap-dev \
13769,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: prove not found
13770,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13771,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13772,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13773,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13774,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13775,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13776,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13777,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13778,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13779,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13780,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13781,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13782,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13783,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13784,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile, # backwards compat
13785,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# vim:set ft=dockerfile:
13786,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# explicitly set user/group IDs
13787,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# grab gosu for easy step-down from root
13788,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13789,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13790,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13791,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13792,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13793,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13794,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# vim:set ft=dockerfile:
13795,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# explicitly set user/group IDs
13796,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13797,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13798,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# grab gosu for easy step-down from root
13799,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13800,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13801,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13802,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13803,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# see note below about ""*.pyc"" files"
13804,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# arches officialy built by upstream
13805,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13806,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13807,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13808,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13809,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13810,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13811,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13812,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13813,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13814,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13815,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13816,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13817,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13818,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile, # backwards compat
13819,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# vim:set ft=dockerfile:
13820,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13821,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# grab gosu for easy step-down from root
13822,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13823,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13824,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# vim:set ft=dockerfile:
13825,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# explicitly set user/group IDs
13826,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# grab gosu for easy step-down from root
13827,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13828,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13829,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13830,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13831,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# arches officialy built by upstream
13832,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13833,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13834,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13835,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13836,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13837,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13838,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13839,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13840,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13841,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13842,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13843,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile, # backwards compat
13844,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# vim:set ft=dockerfile:
13845,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# explicitly set user/group IDs
13846,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13847,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13848,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# grab gosu for easy step-down from root
13849,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13850,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13851,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13852,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13853,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# see note below about ""*.pyc"" files"
13854,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# arches officialy built by upstream
13855,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13856,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13857,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13858,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13859,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13860,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13861,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13862,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13863,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13864,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13865,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13866,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13867,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13868,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile, # backwards compat
13869,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13870,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13871,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13872,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13873,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		krb5-dev \
13874,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		openldap-dev \
13875,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13876,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13877,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13878,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13879,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13880,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13881,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13882,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13883,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# vim:set ft=dockerfile:
13884,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# explicitly set user/group IDs
13885,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# grab gosu for easy step-down from root
13886,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13887,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13888,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13889,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13890,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13891,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13892,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile, # backwards compat
13893,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13894,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13895,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13896,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13897,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		krb5-dev \
13898,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		openldap-dev \
13899,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: prove not found
13900,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13901,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13902,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13903,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13904,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13905,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13906,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13907,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13908,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13909,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13910,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13911,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
13912,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13913,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13914,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13915,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13916,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile, # backwards compat
13917,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
13918,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13919,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
13920,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13921,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,#		krb5-dev \
13922,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,#		openldap-dev \
13923,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,# configure: error: prove not found
13924,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
13925,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13926,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13927,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
13928,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13929,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13930,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13931,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13932,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13933,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,#p' --recursive /usr/local \
13934,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13935,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
13936,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13937,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13938,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template, # backwards compat
13939,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13940,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13941,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13942,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13943,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		krb5-dev \
13944,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		openldap-dev \
13945,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13946,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13947,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13948,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13949,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13950,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13951,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13952,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13953,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13954,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13955,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13956,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13957,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		krb5-dev \
13958,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		openldap-dev \
13959,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: prove not found
13960,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13961,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13962,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13963,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13964,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13965,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13966,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13967,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13968,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13969,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13970,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13971,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13972,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13973,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13974,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile, # backwards compat
13975,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# vim:set ft=dockerfile:
13976,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# explicitly set user/group IDs
13977,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# grab gosu for easy step-down from root
13978,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13979,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13980,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# arches officialy built by upstream
13981,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13982,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13983,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13984,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13985,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13986,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13987,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13988,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13989,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13990,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13991,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13992,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile, # backwards compat
13993,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# vim:set ft=dockerfile:
13994,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# explicitly set user/group IDs
13995,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13996,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13997,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# grab gosu for easy step-down from root
13998,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13999,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14000,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14001,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14002,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14003,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14004,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# arches officialy built by upstream
14005,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14006,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14007,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14008,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14009,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14010,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14011,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14012,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14013,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14014,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14015,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14016,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14017,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14018,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile, # backwards compat
14019,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,# vim:set ft=dockerfile:
14020,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,# explicitly set user/group IDs
14021,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,# grab gosu for easy step-down from root
14022,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14023,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14024,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14025,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
14026,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14027,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
14028,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14029,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
14030,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14031,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,#		krb5-dev \
14032,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,#		openldap-dev \
14033,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,# configure: error: prove not found
14034,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
14035,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14036,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14037,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14038,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14039,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14040,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14041,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14042,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14043,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,#p' --recursive /usr/local \
14044,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14045,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
14046,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14047,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14048,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template, # backwards compat
14049,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# vim:set ft=dockerfile:
14050,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# explicitly set user/group IDs
14051,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# grab gosu for easy step-down from root
14052,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14053,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14054,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14055,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14056,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# vim:set ft=dockerfile:
14057,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# explicitly set user/group IDs
14058,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# grab gosu for easy step-down from root
14059,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14060,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14061,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14062,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14063,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14064,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14065,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile, # backwards compat
14066,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# vim:set ft=dockerfile:
14067,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14068,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# grab gosu for easy step-down from root
14069,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14070,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14071,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14072,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14073,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14074,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14075,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		krb5-dev \
14076,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		openldap-dev \
14077,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: prove not found
14078,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14079,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14080,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14081,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14082,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14083,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14084,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14085,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14086,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14087,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14088,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14089,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14090,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14091,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14092,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile, # backwards compat
14093,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# vim:set ft=dockerfile:
14094,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# explicitly set user/group IDs
14095,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# grab gosu for easy step-down from root
14096,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14097,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14098,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14099,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14100,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14101,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# vim:set ft=dockerfile:
14102,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# explicitly set user/group IDs
14103,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14104,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14105,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# grab gosu for easy step-down from root
14106,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14107,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14108,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14109,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14110,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14111,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# see note below about ""*.pyc"" files"
14112,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# arches officialy built by upstream
14113,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14114,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14115,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14116,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14117,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14118,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14119,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14120,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14121,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14122,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14123,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14124,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14125,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14126,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile, # backwards compat
14127,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14128,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14129,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14130,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14131,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		krb5-dev \
14132,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		openldap-dev \
14133,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14134,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14135,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14136,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14137,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14138,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
14139,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14140,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14141,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14142,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
14143,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14144,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14145,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		krb5-dev \
14146,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		openldap-dev \
14147,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: prove not found
14148,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14149,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14150,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14151,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14152,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14153,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14154,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14155,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14156,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14157,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14158,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14159,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14160,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14161,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14162,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# vim:set ft=dockerfile:
14163,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14164,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# grab gosu for easy step-down from root
14165,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14166,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14167,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# vim:set ft=dockerfile:
14168,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14169,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# grab gosu for easy step-down from root
14170,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14171,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14172,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14173,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14174,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14175,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14176,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		krb5-dev \
14177,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		openldap-dev \
14178,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: prove not found
14179,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14180,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14181,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14182,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14183,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14184,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14185,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14186,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14187,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14188,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14189,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14190,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14191,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14192,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14193,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile, # backwards compat
14194,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# vim:set ft=dockerfile:
14195,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# explicitly set user/group IDs
14196,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# grab gosu for easy step-down from root
14197,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14198,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14199,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# arches officialy built by upstream
14200,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14201,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14202,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14203,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14204,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14205,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14206,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14207,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14208,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14209,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14210,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14211,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile, # backwards compat
14212,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14213,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14214,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14215,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14216,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		krb5-dev \
14217,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		openldap-dev \
14218,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# configure: error: prove not found
14219,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14220,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14221,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14222,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14223,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14224,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14225,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14226,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14227,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14228,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14229,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14230,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14231,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile, # backwards compat
14232,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
14233,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
14234,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14235,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14236,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		krb5-dev \
14237,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		openldap-dev \
14238,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: prove not found
14239,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14240,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14241,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14242,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14243,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14244,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14245,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14246,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14247,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14248,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
14249,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14250,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14251,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14252,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14253,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14254,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14255,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14256,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14257,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		krb5-dev \
14258,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		openldap-dev \
14259,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: prove not found
14260,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14261,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14262,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14263,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14264,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14265,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14266,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14267,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14268,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14269,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14270,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14271,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14272,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14273,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14274,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile, # backwards compat
14275,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
14276,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14277,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
14278,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14279,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,#		krb5-dev \
14280,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,#		openldap-dev \
14281,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,# configure: error: prove not found
14282,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
14283,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14284,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14285,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14286,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14287,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14288,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14289,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14290,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14291,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,#p' --recursive /usr/local \
14292,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14293,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
14294,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14295,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14296,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template, # backwards compat
14297,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# vim:set ft=dockerfile:
14298,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# explicitly set user/group IDs
14299,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14300,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14301,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
14302,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14303,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14304,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14305,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14306,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14307,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
14308,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# arches officialy built by upstream
14309,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14310,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14311,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14312,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14313,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14314,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14315,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14316,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14317,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14318,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14319,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14320,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14321,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14322,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile, # backwards compat
14323,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# vim:set ft=dockerfile:
14324,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# explicitly set user/group IDs
14325,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# grab gosu for easy step-down from root
14326,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14327,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14328,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# arches officialy built by upstream
14329,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14330,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14331,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14332,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14333,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14334,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14335,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14336,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14337,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14338,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14339,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14340,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile, # backwards compat
14341,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
14342,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14343,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14344,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14345,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		krb5-dev \
14346,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		openldap-dev \
14347,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14348,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14349,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14350,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14351,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14352,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14353,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14354,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14355,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14356,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14357,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
14358,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14359,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14360,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14361,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		krb5-dev \
14362,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		openldap-dev \
14363,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: prove not found
14364,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14365,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14366,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14367,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14368,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14369,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14370,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14371,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14372,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14373,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#p' --recursive /usr/local \
14374,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14375,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14376,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14377,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14378,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile, # backwards compat
14379,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14380,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14381,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14382,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14383,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		krb5-dev \
14384,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		openldap-dev \
14385,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: prove not found
14386,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14387,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14388,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14389,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14390,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14391,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14392,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14393,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14394,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14395,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14396,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14397,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14398,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14399,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14400,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile, # backwards compat
14401,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14402,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14403,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14404,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14405,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		krb5-dev \
14406,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		openldap-dev \
14407,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: prove not found
14408,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14409,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14410,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14411,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14412,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14413,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14414,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14415,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14416,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14417,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14418,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14419,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14420,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14421,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14422,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14423,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14424,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14425,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14426,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		krb5-dev \
14427,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		openldap-dev \
14428,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14429,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14430,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14431,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14432,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14433,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
14434,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14435,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14436,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# vim:set ft=dockerfile:
14437,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# explicitly set user/group IDs
14438,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# grab gosu for easy step-down from root
14439,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14440,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14441,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# vim:set ft=dockerfile:
14442,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# explicitly set user/group IDs
14443,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14444,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14445,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# grab gosu for easy step-down from root
14446,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14447,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14448,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14449,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14450,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14451,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# arches officialy built by upstream
14452,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14453,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14454,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14455,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14456,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14457,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14458,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14459,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14460,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14461,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14462,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14463,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14464,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14465,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile, # backwards compat
14466,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# vim:set ft=dockerfile:
14467,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# explicitly set user/group IDs
14468,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# grab gosu for easy step-down from root
14469,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14470,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14471,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14472,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14473,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14474,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14475,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14476,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14477,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14478,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		krb5-dev \
14479,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		openldap-dev \
14480,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: prove not found
14481,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14482,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14483,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14484,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14485,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14486,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14487,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14488,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14489,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14490,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14491,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14492,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14493,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14494,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14495,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14496,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14497,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14498,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14499,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		krb5-dev \
14500,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		openldap-dev \
14501,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# configure: error: prove not found
14502,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14503,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14504,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14505,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14506,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14507,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14508,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14509,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14510,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14511,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14512,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14513,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14514,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14515,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14516,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile, # backwards compat
14517,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# vim:set ft=dockerfile:
14518,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14519,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# grab gosu for easy step-down from root
14520,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14521,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14522,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14523,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14524,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# vim:set ft=dockerfile:
14525,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14526,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# grab gosu for easy step-down from root
14527,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14528,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14529,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,# vim:set ft=dockerfile:
14530,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14531,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14532,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# vim:set ft=dockerfile:
14533,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# explicitly set user/group IDs
14534,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14535,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14536,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# grab gosu for easy step-down from root
14537,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14538,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14539,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14540,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14541,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
14542,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# arches officialy built by upstream
14543,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14544,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14545,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14546,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14547,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14548,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14549,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14550,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14551,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14552,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14553,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14554,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14555,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14556,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile, # backwards compat
14557,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14558,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14559,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14560,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14561,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		krb5-dev \
14562,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		openldap-dev \
14563,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# configure: error: prove not found
14564,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14565,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14566,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14567,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14568,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14569,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14570,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14571,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14572,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14573,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14574,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14575,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14576,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile, # backwards compat
14577,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,# vim:set ft=dockerfile:
14578,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,# explicitly set user/group IDs
14579,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,# grab gosu for easy step-down from root
14580,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14581,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14582,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14583,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
14584,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14585,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14586,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template, # backwards compat
14587,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14588,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14589,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14590,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14591,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14592,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14593,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		krb5-dev \
14594,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		openldap-dev \
14595,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: prove not found
14596,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14597,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14598,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14599,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14600,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14601,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14602,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14603,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14604,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14605,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14606,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14607,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14608,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14609,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14610,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile, # backwards compat
14611,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14612,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14613,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14614,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14615,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		krb5-dev \
14616,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		openldap-dev \
14617,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: prove not found
14618,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14619,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14620,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14621,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14622,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14623,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14624,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14625,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14626,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14627,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14628,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14629,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14630,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14631,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14632,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile, # backwards compat
14633,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14634,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14635,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14636,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14637,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		krb5-dev \
14638,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		openldap-dev \
14639,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14640,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14641,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14642,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14643,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14644,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14645,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14646,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14647,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14648,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14649,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14650,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14651,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14652,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14653,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14654,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		krb5-dev \
14655,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		openldap-dev \
14656,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: prove not found
14657,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14658,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14659,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14660,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14661,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14662,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14663,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14664,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14665,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14666,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14667,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14668,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14669,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14670,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14671,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile, # backwards compat
14672,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14673,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14674,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14675,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14676,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		krb5-dev \
14677,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		openldap-dev \
14678,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: prove not found
14679,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14680,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14681,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14682,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14683,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14684,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14685,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14686,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14687,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14688,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14689,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14690,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14691,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14692,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14693,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile, # backwards compat
14694,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# vim:set ft=dockerfile:
14695,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14696,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# grab gosu for easy step-down from root
14697,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14698,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14699,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
14700,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14701,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
14702,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14703,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,#		krb5-dev \
14704,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,#		openldap-dev \
14705,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14706,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14707,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14708,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14709,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14710,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14711,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14712,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14713,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
14714,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14715,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14716,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template, # backwards compat
14717,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# vim:set ft=dockerfile:
14718,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# explicitly set user/group IDs
14719,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14720,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14721,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# grab gosu for easy step-down from root
14722,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14723,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14724,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14725,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14726,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# see note below about ""*.pyc"" files"
14727,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# arches officialy built by upstream
14728,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14729,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14730,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14731,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14732,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14733,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14734,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14735,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14736,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14737,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14738,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14739,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14740,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14741,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile, # backwards compat
14742,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# vim:set ft=dockerfile:
14743,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# explicitly set user/group IDs
14744,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14745,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14746,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# grab gosu for easy step-down from root
14747,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14748,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14749,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14750,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14751,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
14752,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# arches officialy built by upstream
14753,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14754,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14755,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14756,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14757,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14758,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14759,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14760,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14761,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14762,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14763,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14764,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14765,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14766,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile, # backwards compat
14767,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
14768,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14769,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14770,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14771,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		krb5-dev \
14772,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		openldap-dev \
14773,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: prove not found
14774,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14775,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14776,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14777,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14778,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14779,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14780,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14781,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14782,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14783,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
14784,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14785,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14786,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14787,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14788,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile, # backwards compat
14789,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14790,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14791,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14792,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14793,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		krb5-dev \
14794,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		openldap-dev \
14795,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14796,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14797,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14798,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14799,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14800,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14801,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14802,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14803,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14804,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14805,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14806,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14807,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile, # backwards compat
14808,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# vim:set ft=dockerfile:
14809,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14810,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# grab gosu for easy step-down from root
14811,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14812,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14813,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
14814,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14815,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14816,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14817,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		krb5-dev \
14818,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		openldap-dev \
14819,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14820,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14821,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14822,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14823,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14824,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14825,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14826,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14827,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14828,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14829,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14830,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14831,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14832,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14833,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile, # backwards compat
14834,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# vim:set ft=dockerfile:
14835,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14836,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# grab gosu for easy step-down from root
14837,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14838,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14839,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# vim:set ft=dockerfile:
14840,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# explicitly set user/group IDs
14841,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# grab gosu for easy step-down from root
14842,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14843,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14844,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# vim:set ft=dockerfile:
14845,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# explicitly set user/group IDs
14846,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14847,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14848,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# grab gosu for easy step-down from root
14849,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14850,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14851,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14852,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14853,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
14854,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# arches officialy built by upstream
14855,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14856,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14857,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14858,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14859,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14860,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14861,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14862,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14863,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14864,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14865,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14866,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14867,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14868,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile, # backwards compat
14869,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# vim:set ft=dockerfile:
14870,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# explicitly set user/group IDs
14871,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# grab gosu for easy step-down from root
14872,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14873,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14874,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14875,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14876,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# arches officialy built by upstream
14877,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14878,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14879,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14880,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14881,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14882,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14883,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14884,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14885,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14886,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14887,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14888,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile, # backwards compat
14889,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
14890,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
14891,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14892,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14893,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		krb5-dev \
14894,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		openldap-dev \
14895,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: prove not found
14896,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14897,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14898,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14899,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
14900,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14901,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14902,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14903,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14904,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14905,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
14906,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14907,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14908,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14909,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14910,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile, # backwards compat
14911,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14912,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
14913,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14914,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14915,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		krb5-dev \
14916,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		openldap-dev \
14917,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: prove not found
14918,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14919,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14920,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14921,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14922,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14923,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14924,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14925,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14926,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14927,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
14928,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14929,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14930,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14931,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14932,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile, # backwards compat
14933,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# vim:set ft=dockerfile:
14934,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14935,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# grab gosu for easy step-down from root
14936,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14937,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14938,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# vim:set ft=dockerfile:
14939,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# explicitly set user/group IDs
14940,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# grab gosu for easy step-down from root
14941,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14942,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14943,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14944,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14945,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# arches officialy built by upstream
14946,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14947,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14948,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14949,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14950,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14951,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14952,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14953,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14954,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14955,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14956,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14957,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile, # backwards compat
14958,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# vim:set ft=dockerfile:
14959,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14960,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# grab gosu for easy step-down from root
14961,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14962,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14963,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14964,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14965,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14966,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14967,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		krb5-dev \
14968,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		openldap-dev \
14969,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14970,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14971,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14972,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14973,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14974,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14975,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14976,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14977,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14978,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14979,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14980,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14981,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile, # backwards compat
14982,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14983,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14984,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14985,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14986,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		krb5-dev \
14987,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		openldap-dev \
14988,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14989,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14990,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14991,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14992,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14993,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14994,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14995,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14996,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14997,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14998,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14999,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15000,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15001,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15002,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile, # backwards compat
15003,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# vim:set ft=dockerfile:
15004,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# explicitly set user/group IDs
15005,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# grab gosu for easy step-down from root
15006,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15007,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15008,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15009,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# arches officialy built by upstream
15010,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15011,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15012,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15013,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15014,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15015,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15016,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15017,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15018,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15019,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15020,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15021,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile, # backwards compat
15022,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,# vim:set ft=dockerfile:
15023,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15024,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15025,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# vim:set ft=dockerfile:
15026,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# explicitly set user/group IDs
15027,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15028,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15029,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# grab gosu for easy step-down from root
15030,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15031,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15032,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15033,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15034,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15035,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# arches officialy built by upstream
15036,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15037,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15038,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15039,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15040,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15041,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15042,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15043,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15044,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15045,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15046,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15047,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15048,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15049,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile, # backwards compat
15050,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# vim:set ft=dockerfile:
15051,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# explicitly set user/group IDs
15052,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# grab gosu for easy step-down from root
15053,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15054,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15055,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,# vim:set ft=dockerfile:
15056,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15057,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15058,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# vim:set ft=dockerfile:
15059,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# explicitly set user/group IDs
15060,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# grab gosu for easy step-down from root
15061,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15062,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15063,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# vim:set ft=dockerfile:
15064,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# explicitly set user/group IDs
15065,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15066,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15067,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
15068,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15069,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15070,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15071,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15072,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15073,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
15074,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# arches officialy built by upstream
15075,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15076,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15077,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
15078,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
15079,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15080,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15081,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15082,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15083,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15084,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15085,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
15086,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15087,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15088,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template, # backwards compat
15089,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15090,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15091,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15092,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15093,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		krb5-dev \
15094,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		openldap-dev \
15095,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15096,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15097,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15098,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15099,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15100,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15101,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15102,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15103,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15104,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15105,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15106,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile, # backwards compat
15107,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# vim:set ft=dockerfile:
15108,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# explicitly set user/group IDs
15109,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# grab gosu for easy step-down from root
15110,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15111,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15112,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15113,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15114,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15115,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15116,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile, # backwards compat
15117,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
15118,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15119,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
15120,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15121,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,#		krb5-dev \
15122,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,#		openldap-dev \
15123,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,# configure: error: prove not found
15124,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
15125,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15126,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15127,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15128,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15129,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15130,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15131,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15132,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15133,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,#p' --recursive /usr/local \
15134,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15135,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
15136,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15137,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15138,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template, # backwards compat
15139,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# vim:set ft=dockerfile:
15140,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# explicitly set user/group IDs
15141,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# grab gosu for easy step-down from root
15142,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15143,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15144,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15145,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15146,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15147,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15148,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile, # backwards compat
15149,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15150,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15151,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15152,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15153,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		krb5-dev \
15154,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		openldap-dev \
15155,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15156,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15157,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15158,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15159,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15160,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15161,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15162,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15163,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15164,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15165,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15166,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile, # backwards compat
15167,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# vim:set ft=dockerfile:
15168,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# explicitly set user/group IDs
15169,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15170,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15171,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# grab gosu for easy step-down from root
15172,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15173,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15174,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15175,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15176,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
15177,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# arches officialy built by upstream
15178,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15179,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15180,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15181,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15182,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15183,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15184,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15185,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15186,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15187,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15188,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15189,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15190,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15191,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile, # backwards compat
15192,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# vim:set ft=dockerfile:
15193,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# explicitly set user/group IDs
15194,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# grab gosu for easy step-down from root
15195,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15196,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15197,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15198,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15199,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15200,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15201,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile, # backwards compat
15202,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# vim:set ft=dockerfile:
15203,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# explicitly set user/group IDs
15204,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# grab gosu for easy step-down from root
15205,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15206,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15207,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15208,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15209,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15210,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15211,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile, # backwards compat
15212,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15213,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15214,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15215,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15216,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		krb5-dev \
15217,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		openldap-dev \
15218,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: prove not found
15219,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15220,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15221,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15222,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15223,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15224,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15225,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15226,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15227,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15228,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15229,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15230,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15231,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15232,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile, # backwards compat
15233,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# vim:set ft=dockerfile:
15234,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15235,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# grab gosu for easy step-down from root
15236,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15237,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15238,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# vim:set ft=dockerfile:
15239,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# explicitly set user/group IDs
15240,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# grab gosu for easy step-down from root
15241,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15242,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15243,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15244,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15245,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15246,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15247,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile, # backwards compat
15248,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# vim:set ft=dockerfile:
15249,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# explicitly set user/group IDs
15250,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# grab gosu for easy step-down from root
15251,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15252,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15253,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15254,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15255,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15256,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15257,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile, # backwards compat
15258,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# vim:set ft=dockerfile:
15259,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# explicitly set user/group IDs
15260,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# grab gosu for easy step-down from root
15261,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15262,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15263,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# arches officialy built by upstream
15264,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15265,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15266,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15267,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15268,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15269,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15270,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15271,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15272,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15273,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15274,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15275,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile, # backwards compat
15276,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15277,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15278,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15279,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15280,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		krb5-dev \
15281,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		openldap-dev \
15282,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: prove not found
15283,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15284,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15285,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15286,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15287,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15288,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15289,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15290,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15291,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15292,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15293,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15294,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15295,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15296,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15297,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15298,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile, # backwards compat
15299,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# vim:set ft=dockerfile:
15300,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# explicitly set user/group IDs
15301,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# grab gosu for easy step-down from root
15302,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15303,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15304,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# arches officialy built by upstream
15305,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15306,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15307,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15308,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15309,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15310,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15311,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15312,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15313,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15314,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15315,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15316,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile, # backwards compat
15317,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# vim:set ft=dockerfile:
15318,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# explicitly set user/group IDs
15319,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15320,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15321,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# grab gosu for easy step-down from root
15322,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15323,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15324,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15325,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15326,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
15327,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# arches officialy built by upstream
15328,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15329,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15330,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15331,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15332,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15333,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15334,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15335,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15336,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15337,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15338,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15339,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15340,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15341,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile, # backwards compat
15342,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# vim:set ft=dockerfile:
15343,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# explicitly set user/group IDs
15344,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15345,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15346,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
15347,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15348,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15349,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15350,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15351,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15352,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15353,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# arches officialy built by upstream
15354,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15355,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15356,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15357,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15358,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15359,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15360,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15361,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15362,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15363,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15364,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15365,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15366,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15367,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile, # backwards compat
15368,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# vim:set ft=dockerfile:
15369,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15370,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# grab gosu for easy step-down from root
15371,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15372,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15373,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
15374,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15375,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15376,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15377,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		krb5-dev \
15378,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		openldap-dev \
15379,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15380,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15381,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15382,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15383,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15384,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15385,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15386,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15387,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15388,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15389,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15390,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15391,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile, # backwards compat
15392,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15393,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15394,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# vim:set ft=dockerfile:
15395,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# explicitly set user/group IDs
15396,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# grab gosu for easy step-down from root
15397,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15398,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15399,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15400,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15401,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15402,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15403,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile, # backwards compat
15404,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# vim:set ft=dockerfile:
15405,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15406,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# grab gosu for easy step-down from root
15407,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15408,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15409,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
15410,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15411,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15412,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15413,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		krb5-dev \
15414,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		openldap-dev \
15415,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: prove not found
15416,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15417,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15418,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15419,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15420,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15421,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15422,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15423,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15424,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15425,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#p' --recursive /usr/local \
15426,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15427,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15428,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15429,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15430,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15431,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15432,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15433,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15434,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		krb5-dev \
15435,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		openldap-dev \
15436,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: prove not found
15437,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15438,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15439,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15440,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15441,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15442,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15443,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15444,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15445,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15446,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15447,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15448,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15449,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15450,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15451,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile, # backwards compat
15452,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# vim:set ft=dockerfile:
15453,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# explicitly set user/group IDs
15454,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15455,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15456,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# grab gosu for easy step-down from root
15457,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15458,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15459,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15460,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15461,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15462,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# arches officialy built by upstream
15463,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15464,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15465,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15466,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15467,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15468,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15469,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15470,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15471,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15472,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15473,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15474,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15475,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15476,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile, # backwards compat
15477,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# vim:set ft=dockerfile:
15478,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# explicitly set user/group IDs
15479,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15480,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15481,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# grab gosu for easy step-down from root
15482,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15483,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15484,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15485,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15486,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15487,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15488,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# arches officialy built by upstream
15489,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15490,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15491,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15492,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15493,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15494,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15495,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15496,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15497,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15498,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15499,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15500,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15501,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15502,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile, # backwards compat
15503,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# vim:set ft=dockerfile:
15504,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15505,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# grab gosu for easy step-down from root
15506,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15507,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15508,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# vim:set ft=dockerfile:
15509,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# explicitly set user/group IDs
15510,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# grab gosu for easy step-down from root
15511,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15512,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15513,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15514,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15515,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15516,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15517,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
15518,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15519,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
15520,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15521,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,#		krb5-dev \
15522,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,#		openldap-dev \
15523,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15524,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15525,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15526,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15527,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15528,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15529,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15530,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15531,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
15532,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15533,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15534,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# vim:set ft=dockerfile:
15535,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# explicitly set user/group IDs
15536,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# grab gosu for easy step-down from root
15537,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15538,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15539,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15540,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15541,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15542,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15543,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile, # backwards compat
15544,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# vim:set ft=dockerfile:
15545,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# explicitly set user/group IDs
15546,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15547,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15548,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# grab gosu for easy step-down from root
15549,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15550,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15551,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15552,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15553,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
15554,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# arches officialy built by upstream
15555,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15556,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15557,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
15558,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
15559,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15560,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15561,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15562,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15563,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15564,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15565,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
15566,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15567,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15568,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template, # backwards compat
15569,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15570,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15571,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15572,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15573,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		krb5-dev \
15574,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		openldap-dev \
15575,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: prove not found
15576,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15577,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15578,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15579,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15580,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15581,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15582,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15583,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15584,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15585,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15586,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15587,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
15588,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15589,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15590,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15591,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15592,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile, # backwards compat
15593,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# vim:set ft=dockerfile:
15594,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# explicitly set user/group IDs
15595,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15596,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15597,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# grab gosu for easy step-down from root
15598,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15599,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15600,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15601,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15602,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15603,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# arches officialy built by upstream
15604,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15605,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15606,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15607,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15608,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15609,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15610,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15611,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15612,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15613,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15614,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15615,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15616,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15617,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile, # backwards compat
15618,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# vim:set ft=dockerfile:
15619,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15620,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# grab gosu for easy step-down from root
15621,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15622,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15623,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15624,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15625,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15626,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15627,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		krb5-dev \
15628,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		openldap-dev \
15629,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15630,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15631,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15632,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15633,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15634,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15635,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15636,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15637,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15638,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15639,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15640,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile, # backwards compat
15641,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15642,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15643,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15644,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15645,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		krb5-dev \
15646,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		openldap-dev \
15647,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15648,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15649,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15650,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15651,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15652,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15653,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15654,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15655,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15656,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15657,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15658,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15659,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile, # backwards compat
15660,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# vim:set ft=dockerfile:
15661,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# explicitly set user/group IDs
15662,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15663,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15664,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# grab gosu for easy step-down from root
15665,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15666,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15667,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15668,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15669,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15670,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# arches officialy built by upstream
15671,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15672,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15673,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15674,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15675,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15676,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15677,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15678,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15679,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15680,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15681,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15682,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15683,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15684,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile, # backwards compat
15685,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# vim:set ft=dockerfile:
15686,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# explicitly set user/group IDs
15687,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15688,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15689,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# grab gosu for easy step-down from root
15690,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15691,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15692,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15693,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15694,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
15695,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# arches officialy built by upstream
15696,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15697,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15698,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15699,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15700,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15701,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15702,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15703,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15704,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15705,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15706,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15707,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15708,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15709,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile, # backwards compat
15710,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# vim:set ft=dockerfile:
15711,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# explicitly set user/group IDs
15712,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# grab gosu for easy step-down from root
15713,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15714,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15715,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15716,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15717,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# vim:set ft=dockerfile:
15718,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15719,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# grab gosu for easy step-down from root
15720,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15721,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15722,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15723,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15724,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15725,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15726,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		krb5-dev \
15727,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		openldap-dev \
15728,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: prove not found
15729,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15730,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15731,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15732,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15733,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15734,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15735,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15736,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15737,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15738,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15739,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15740,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15741,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15742,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15743,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile, # backwards compat
15744,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15745,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15746,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15747,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15748,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		krb5-dev \
15749,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		openldap-dev \
15750,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: prove not found
15751,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15752,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15753,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15754,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15755,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15756,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15757,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15758,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15759,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15760,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15761,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15762,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15763,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15764,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15765,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile, # backwards compat
15766,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# vim:set ft=dockerfile:
15767,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# explicitly set user/group IDs
15768,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15769,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15770,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# grab gosu for easy step-down from root
15771,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15772,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15773,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15774,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15775,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15776,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# arches officialy built by upstream
15777,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15778,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15779,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15780,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15781,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15782,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15783,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15784,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15785,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15786,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15787,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15788,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15789,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15790,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile, # backwards compat
15791,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15792,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15793,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15794,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15795,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		krb5-dev \
15796,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		openldap-dev \
15797,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15798,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15799,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15800,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15801,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15802,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15803,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15804,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15805,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15806,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15807,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15808,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile, # backwards compat
15809,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# vim:set ft=dockerfile:
15810,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15811,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# grab gosu for easy step-down from root
15812,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15813,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15814,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# vim:set ft=dockerfile:
15815,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# explicitly set user/group IDs
15816,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# grab gosu for easy step-down from root
15817,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15818,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15819,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15820,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# arches officialy built by upstream
15821,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15822,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15823,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15824,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15825,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15826,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15827,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15828,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15829,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15830,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15831,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15832,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile, # backwards compat
15833,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# vim:set ft=dockerfile:
15834,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15835,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# grab gosu for easy step-down from root
15836,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15837,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15838,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# vim:set ft=dockerfile:
15839,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# explicitly set user/group IDs
15840,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15841,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15842,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# grab gosu for easy step-down from root
15843,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15844,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15845,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15846,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15847,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15848,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
15849,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# arches officialy built by upstream
15850,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15851,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15852,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15853,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15854,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15855,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15856,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15857,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15858,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15859,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15860,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15861,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15862,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15863,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile, # backwards compat
15864,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# vim:set ft=dockerfile:
15865,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# explicitly set user/group IDs
15866,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# grab gosu for easy step-down from root
15867,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15868,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15869,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# arches officialy built by upstream
15870,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15871,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15872,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15873,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15874,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15875,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15876,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15877,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15878,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15879,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15880,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15881,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile, # backwards compat
15882,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# vim:set ft=dockerfile:
15883,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15884,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# grab gosu for easy step-down from root
15885,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15886,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15887,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15888,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15889,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15890,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15891,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		krb5-dev \
15892,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		openldap-dev \
15893,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15894,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15895,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15896,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15897,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15898,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15899,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15900,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15901,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15902,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15903,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15904,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15905,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile, # backwards compat
15906,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# vim:set ft=dockerfile:
15907,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# explicitly set user/group IDs
15908,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15909,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15910,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# grab gosu for easy step-down from root
15911,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15912,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15913,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15914,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15915,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
15916,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# arches officialy built by upstream
15917,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15918,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15919,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15920,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15921,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15922,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15923,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15924,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15925,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15926,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15927,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15928,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15929,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15930,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile, # backwards compat
15931,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# vim:set ft=dockerfile:
15932,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# explicitly set user/group IDs
15933,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15934,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15935,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# grab gosu for easy step-down from root
15936,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15937,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15938,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15939,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15940,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# arches officialy built by upstream
15941,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15942,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15943,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15944,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15945,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15946,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15947,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15948,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15949,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15950,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15951,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15952,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile, # backwards compat
15953,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
15954,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15955,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15956,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15957,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		krb5-dev \
15958,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		openldap-dev \
15959,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: prove not found
15960,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15961,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15962,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15963,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15964,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15965,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15966,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15967,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15968,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15969,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#p' --recursive /usr/local \
15970,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15971,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15972,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15973,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15974,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# vim:set ft=dockerfile:
15975,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15976,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# grab gosu for easy step-down from root
15977,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15978,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15979,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# vim:set ft=dockerfile:
15980,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# explicitly set user/group IDs
15981,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# grab gosu for easy step-down from root
15982,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15983,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15984,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15985,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15986,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# arches officialy built by upstream
15987,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15988,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15989,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15990,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15991,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15992,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15993,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15994,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15995,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15996,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15997,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15998,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile, # backwards compat
15999,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
16000,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# explicitly set user/group IDs
16001,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
16002,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16003,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16004,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16005,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16006,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
16007,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# explicitly set user/group IDs
16008,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
16009,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16010,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16011,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16012,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16013,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16014,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# vim:set ft=dockerfile:
16015,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16016,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# grab gosu for easy step-down from root
16017,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16018,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16019,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16020,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16021,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16022,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16023,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		krb5-dev \
16024,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		openldap-dev \
16025,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: prove not found
16026,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16027,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16028,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16029,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16030,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16031,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16032,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16033,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16034,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16035,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16036,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16037,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16038,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16039,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16040,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile, # backwards compat
16041,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
16042,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16043,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16044,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16045,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		krb5-dev \
16046,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		openldap-dev \
16047,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: prove not found
16048,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16049,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16050,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16051,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
16052,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16053,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16054,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16055,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16056,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16057,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#p' --recursive /usr/local \
16058,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16059,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16060,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16061,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16062,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
16063,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16064,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16065,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16066,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		krb5-dev \
16067,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		openldap-dev \
16068,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16069,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
16070,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16071,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16072,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16073,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16074,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16075,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16076,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16077,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16078,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16079,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16080,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16081,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16082,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile, # backwards compat
16083,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
16084,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16085,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
16086,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16087,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,#		krb5-dev \
16088,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,#		openldap-dev \
16089,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,# configure: error: prove not found
16090,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
16091,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16092,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16093,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16094,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16095,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16096,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16097,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16098,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16099,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,#p' --recursive /usr/local \
16100,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16101,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
16102,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16103,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16104,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template, # backwards compat
16105,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16106,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16107,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16108,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16109,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		krb5-dev \
16110,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		openldap-dev \
16111,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16112,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16113,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16114,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16115,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16116,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
16117,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16118,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16119,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16120,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16121,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16122,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16123,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		krb5-dev \
16124,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		openldap-dev \
16125,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: prove not found
16126,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16127,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16128,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16129,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16130,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16131,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16132,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16133,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16134,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16135,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16136,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16137,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16138,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16139,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16140,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile, # backwards compat
16141,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,# vim:set ft=dockerfile:
16142,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,# explicitly set user/group IDs
16143,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,# grab gosu for easy step-down from root
16144,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16145,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16146,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# make the sample config easier to munge (and ""correct by default"")"
16147,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16148,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# vim:set ft=dockerfile:
16149,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# explicitly set user/group IDs
16150,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# grab gosu for easy step-down from root
16151,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16152,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16153,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# arches officialy built by upstream
16154,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16155,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16156,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16157,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16158,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16159,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16160,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16161,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16162,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16163,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16164,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16165,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile, # backwards compat
16166,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16167,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16168,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16169,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16170,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		krb5-dev \
16171,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		openldap-dev \
16172,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: prove not found
16173,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16174,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16175,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16176,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16177,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16178,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16179,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16180,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16181,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16182,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16183,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16184,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16185,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16186,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16187,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile, # backwards compat
16188,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# vim:set ft=dockerfile:
16189,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# explicitly set user/group IDs
16190,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# grab gosu for easy step-down from root
16191,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16192,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16193,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16194,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16195,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16196,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16197,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile, # backwards compat
16198,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# vim:set ft=dockerfile:
16199,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# explicitly set user/group IDs
16200,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16201,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16202,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# grab gosu for easy step-down from root
16203,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16204,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16205,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16206,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16207,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
16208,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# arches officialy built by upstream
16209,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16210,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16211,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16212,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16213,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16214,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16215,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16216,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16217,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16218,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16219,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16220,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16221,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16222,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile, # backwards compat
16223,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16224,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16225,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16226,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16227,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		krb5-dev \
16228,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		openldap-dev \
16229,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: prove not found
16230,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16231,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16232,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16233,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16234,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16235,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16236,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16237,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16238,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16239,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16240,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16241,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16242,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16243,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16244,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile, # backwards compat
16245,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# vim:set ft=dockerfile:
16246,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# explicitly set user/group IDs
16247,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16248,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16249,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
16250,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16251,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16252,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16253,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16254,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16255,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# see note below about ""*.pyc"" files"
16256,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# arches officialy built by upstream
16257,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16258,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16259,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16260,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
16261,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16262,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16263,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16264,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16265,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16266,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16267,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16268,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16269,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16270,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16271,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile, # backwards compat
16272,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16273,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16274,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16275,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16276,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		krb5-dev \
16277,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		openldap-dev \
16278,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: prove not found
16279,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16280,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16281,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16282,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16283,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16284,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16285,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16286,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16287,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16288,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16289,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16290,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16291,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16292,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16293,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile, # backwards compat
16294,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
16295,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16296,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16297,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16298,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		krb5-dev \
16299,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		openldap-dev \
16300,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: prove not found
16301,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16302,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16303,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16304,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16305,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16306,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16307,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16308,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16309,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16310,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
16311,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16312,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16313,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16314,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16315,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16316,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16317,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16318,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16319,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		krb5-dev \
16320,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		openldap-dev \
16321,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: prove not found
16322,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16323,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16324,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16325,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16326,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16327,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16328,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16329,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16330,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16331,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16332,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16333,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16334,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16335,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16336,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile, # backwards compat
16337,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# vim:set ft=dockerfile:
16338,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# explicitly set user/group IDs
16339,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# grab gosu for easy step-down from root
16340,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16341,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16342,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16343,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16344,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# vim:set ft=dockerfile:
16345,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# explicitly set user/group IDs
16346,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# grab gosu for easy step-down from root
16347,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16348,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16349,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# vim:set ft=dockerfile:
16350,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# explicitly set user/group IDs
16351,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# grab gosu for easy step-down from root
16352,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16353,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16354,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16355,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16356,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16357,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16358,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile, # backwards compat
16359,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# vim:set ft=dockerfile:
16360,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16361,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# grab gosu for easy step-down from root
16362,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16363,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16364,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# vim:set ft=dockerfile:
16365,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16366,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# grab gosu for easy step-down from root
16367,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16368,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16369,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# vim:set ft=dockerfile:
16370,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# explicitly set user/group IDs
16371,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16372,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16373,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# grab gosu for easy step-down from root
16374,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16375,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16376,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16377,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16378,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16379,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
16380,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# arches officialy built by upstream
16381,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16382,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16383,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16384,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16385,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16386,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16387,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16388,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16389,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16390,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16391,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16392,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16393,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16394,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile, # backwards compat
16395,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# vim:set ft=dockerfile:
16396,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16397,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# grab gosu for easy step-down from root
16398,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16399,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16400,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# vim:set ft=dockerfile:
16401,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16402,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# grab gosu for easy step-down from root
16403,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16404,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16405,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16406,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16407,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16408,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16409,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		krb5-dev \
16410,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		openldap-dev \
16411,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: prove not found
16412,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16413,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16414,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16415,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16416,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16417,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16418,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16419,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16420,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16421,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16422,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16423,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16424,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16425,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile, # backwards compat
16426,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# vim:set ft=dockerfile:
16427,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16428,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# grab gosu for easy step-down from root
16429,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16430,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16431,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16432,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16433,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16434,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16435,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		krb5-dev \
16436,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		openldap-dev \
16437,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16438,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16439,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16440,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16441,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16442,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16443,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16444,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16445,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16446,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16447,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16448,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16449,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16450,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16451,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		krb5-dev \
16452,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		openldap-dev \
16453,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: prove not found
16454,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16455,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16456,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16457,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16458,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16459,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16460,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16461,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16462,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16463,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16464,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16465,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16466,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16467,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16468,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile, # backwards compat
16469,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
16470,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16471,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
16472,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16473,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,#		krb5-dev \
16474,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,#		openldap-dev \
16475,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,# configure: error: prove not found
16476,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
16477,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16478,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16479,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16480,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16481,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16482,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16483,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16484,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16485,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,#p' --recursive /usr/local \
16486,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16487,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
16488,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16489,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16490,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template, # backwards compat
16491,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# vim:set ft=dockerfile:
16492,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# explicitly set user/group IDs
16493,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# grab gosu for easy step-down from root
16494,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16495,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16496,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16497,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16498,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# vim:set ft=dockerfile:
16499,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# explicitly set user/group IDs
16500,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# grab gosu for easy step-down from root
16501,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16502,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16503,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16504,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16505,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16506,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16507,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16508,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16509,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		krb5-dev \
16510,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		openldap-dev \
16511,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: prove not found
16512,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16513,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16514,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16515,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16516,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16517,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16518,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16519,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16520,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16521,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16522,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16523,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16524,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16525,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16526,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile, # backwards compat
16527,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# vim:set ft=dockerfile:
16528,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16529,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# grab gosu for easy step-down from root
16530,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16531,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16532,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# vim:set ft=dockerfile:
16533,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# explicitly set user/group IDs
16534,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16535,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16536,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# grab gosu for easy step-down from root
16537,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16538,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16539,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16540,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16541,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
16542,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# arches officialy built by upstream
16543,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16544,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16545,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16546,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16547,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16548,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16549,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16550,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16551,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16552,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16553,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16554,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16555,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16556,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile, # backwards compat
16557,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# vim:set ft=dockerfile:
16558,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# explicitly set user/group IDs
16559,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# grab gosu for easy step-down from root
16560,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16561,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16562,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16563,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16564,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# arches officialy built by upstream
16565,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16566,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16567,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16568,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16569,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16570,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16571,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16572,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16573,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16574,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16575,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16576,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile, # backwards compat
16577,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16578,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16579,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16580,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16581,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		krb5-dev \
16582,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		openldap-dev \
16583,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: prove not found
16584,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16585,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16586,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16587,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16588,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16589,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16590,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16591,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16592,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16593,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16594,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16595,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16596,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16597,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16598,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile, # backwards compat
16599,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# vim:set ft=dockerfile:
16600,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# explicitly set user/group IDs
16601,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# grab gosu for easy step-down from root
16602,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16603,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16604,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# arches officialy built by upstream
16605,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16606,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16607,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16608,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16609,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16610,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16611,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16612,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16613,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16614,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16615,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16616,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile, # backwards compat
16617,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
16618,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16619,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
16620,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16621,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,#		krb5-dev \
16622,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,#		openldap-dev \
16623,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,# configure: error: prove not found
16624,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
16625,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16626,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16627,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16628,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16629,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16630,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16631,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16632,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16633,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,#p' --recursive /usr/local \
16634,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16635,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
16636,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16637,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16638,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template, # backwards compat
16639,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# vim:set ft=dockerfile:
16640,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# explicitly set user/group IDs
16641,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16642,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16643,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
16644,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16645,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16646,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16647,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16648,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16649,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
16650,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# arches officialy built by upstream
16651,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16652,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16653,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
16654,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
16655,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
16656,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16657,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16658,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16659,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16660,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16661,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16662,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
16663,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16664,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16665,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template, # backwards compat
16666,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16667,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16668,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16669,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16670,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		krb5-dev \
16671,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		openldap-dev \
16672,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: prove not found
16673,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16674,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16675,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16676,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16677,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16678,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16679,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16680,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16681,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16682,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16683,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16684,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16685,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16686,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16687,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile, # backwards compat
16688,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# vim:set ft=dockerfile:
16689,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16690,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# grab gosu for easy step-down from root
16691,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16692,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16693,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# vim:set ft=dockerfile:
16694,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# explicitly set user/group IDs
16695,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16696,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16697,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# grab gosu for easy step-down from root
16698,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16699,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16700,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16701,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16702,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
16703,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# arches officialy built by upstream
16704,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16705,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16706,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16707,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16708,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16709,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16710,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16711,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16712,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16713,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16714,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16715,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16716,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16717,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile, # backwards compat
16718,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16719,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16720,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16721,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16722,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		krb5-dev \
16723,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		openldap-dev \
16724,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: prove not found
16725,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16726,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16727,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16728,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16729,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16730,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16731,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16732,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16733,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16734,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16735,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16736,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16737,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16738,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16739,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile, # backwards compat
16740,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# vim:set ft=dockerfile:
16741,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# explicitly set user/group IDs
16742,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# grab gosu for easy step-down from root
16743,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16744,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16745,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16746,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16747,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16748,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# vim:set ft=dockerfile:
16749,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# explicitly set user/group IDs
16750,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16751,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16752,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# grab gosu for easy step-down from root
16753,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16754,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16755,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16756,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16757,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# see note below about ""*.pyc"" files"
16758,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# arches officialy built by upstream
16759,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16760,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16761,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16762,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16763,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16764,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16765,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16766,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16767,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16768,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16769,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16770,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16771,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16772,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile, # backwards compat
16773,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,# vim:set ft=dockerfile:
16774,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16775,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,# grab gosu for easy step-down from root
16776,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16777,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16778,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
16779,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# explicitly set user/group IDs
16780,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
16781,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16782,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16783,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16784,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16785,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16786,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16787,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile, # backwards compat
16788,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16789,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16790,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16791,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16792,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		krb5-dev \
16793,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		openldap-dev \
16794,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: prove not found
16795,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16796,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16797,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16798,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16799,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16800,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16801,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16802,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16803,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16804,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16805,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16806,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16807,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16808,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16809,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile, # backwards compat
16810,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# vim:set ft=dockerfile:
16811,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# explicitly set user/group IDs
16812,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16813,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16814,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# grab gosu for easy step-down from root
16815,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16816,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16817,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16818,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16819,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# see note below about ""*.pyc"" files"
16820,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# arches officialy built by upstream
16821,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16822,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16823,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16824,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16825,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16826,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16827,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16828,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16829,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16830,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16831,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16832,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16833,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16834,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile, # backwards compat
16835,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# vim:set ft=dockerfile:
16836,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16837,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# grab gosu for easy step-down from root
16838,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16839,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16840,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16841,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16842,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16843,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16844,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		krb5-dev \
16845,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		openldap-dev \
16846,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: prove not found
16847,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16848,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16849,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16850,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16851,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16852,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16853,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16854,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16855,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16856,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16857,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16858,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16859,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16860,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16861,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile, # backwards compat
16862,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# vim:set ft=dockerfile:
16863,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# explicitly set user/group IDs
16864,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# grab gosu for easy step-down from root
16865,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16866,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16867,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# arches officialy built by upstream
16868,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16869,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16870,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16871,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16872,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16873,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16874,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16875,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16876,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16877,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16878,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16879,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile, # backwards compat
16880,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# vim:set ft=dockerfile:
16881,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# explicitly set user/group IDs
16882,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16883,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16884,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# grab gosu for easy step-down from root
16885,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16886,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16887,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16888,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16889,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# see note below about ""*.pyc"" files"
16890,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# arches officialy built by upstream
16891,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16892,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16893,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16894,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16895,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16896,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16897,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16898,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16899,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16900,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16901,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16902,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16903,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16904,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile, # backwards compat
16905,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
16906,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16907,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16908,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16909,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		krb5-dev \
16910,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		openldap-dev \
16911,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: prove not found
16912,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16913,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16914,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
16915,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16916,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16917,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16918,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16919,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16920,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16921,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16922,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16923,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16924,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16925,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16926,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16927,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile, # backwards compat
16928,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
16929,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16930,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
16931,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16932,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,#		krb5-dev \
16933,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,#		openldap-dev \
16934,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16935,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16936,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16937,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16938,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16939,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16940,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
16941,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16942,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# vim:set ft=dockerfile:
16943,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# explicitly set user/group IDs
16944,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16945,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16946,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# grab gosu for easy step-down from root
16947,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16948,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16949,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16950,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16951,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
16952,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# arches officialy built by upstream
16953,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16954,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16955,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16956,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16957,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16958,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16959,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16960,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16961,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16962,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16963,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16964,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16965,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16966,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile, # backwards compat
16967,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16968,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16969,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16970,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16971,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		krb5-dev \
16972,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		openldap-dev \
16973,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: prove not found
16974,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16975,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16976,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16977,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16978,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16979,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16980,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16981,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16982,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16983,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16984,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16985,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16986,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16987,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16988,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile, # backwards compat
16989,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# vim:set ft=dockerfile:
16990,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# explicitly set user/group IDs
16991,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# grab gosu for easy step-down from root
16992,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16993,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16994,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# vim:set ft=dockerfile:
16995,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# explicitly set user/group IDs
16996,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16997,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16998,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# grab gosu for easy step-down from root
16999,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17000,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17001,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17002,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17003,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# see note below about ""*.pyc"" files"
17004,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# arches officialy built by upstream
17005,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17006,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17007,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17008,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17009,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17010,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17011,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17012,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17013,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17014,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17015,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17016,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17017,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17018,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile, # backwards compat
17019,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17020,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
17021,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17022,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17023,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		krb5-dev \
17024,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		openldap-dev \
17025,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: prove not found
17026,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17027,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17028,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17029,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
17030,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17031,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17032,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17033,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17034,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17035,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17036,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17037,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17038,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17039,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17040,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile, # backwards compat
17041,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17042,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17043,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17044,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17045,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		krb5-dev \
17046,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		openldap-dev \
17047,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: prove not found
17048,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17049,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17050,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17051,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17052,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17053,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17054,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17055,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17056,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17057,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
17058,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17059,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17060,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17061,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17062,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile, # backwards compat
17063,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17064,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17065,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17066,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17067,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		krb5-dev \
17068,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		openldap-dev \
17069,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17070,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17071,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17072,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17073,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17074,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17075,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17076,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17077,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# vim:set ft=dockerfile:
17078,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# explicitly set user/group IDs
17079,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# grab gosu for easy step-down from root
17080,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17081,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17082,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17083,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17084,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17085,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17086,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile, # backwards compat
17087,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
17088,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17089,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17090,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17091,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		krb5-dev \
17092,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		openldap-dev \
17093,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17094,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
17095,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17096,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17097,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17098,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17099,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17100,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17101,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17102,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17103,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17104,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17105,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile, # backwards compat
17106,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# vim:set ft=dockerfile:
17107,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# explicitly set user/group IDs
17108,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17109,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17110,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# grab gosu for easy step-down from root
17111,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17112,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17113,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17114,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17115,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
17116,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# arches officialy built by upstream
17117,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17118,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17119,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17120,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17121,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17122,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17123,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17124,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17125,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17126,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17127,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17128,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17129,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17130,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile, # backwards compat
17131,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# vim:set ft=dockerfile:
17132,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# explicitly set user/group IDs
17133,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17134,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17135,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# grab gosu for easy step-down from root
17136,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17137,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17138,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17139,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17140,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
17141,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# arches officialy built by upstream
17142,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17143,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17144,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
17145,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
17146,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17147,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17148,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17149,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17150,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17151,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17152,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
17153,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17154,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17155,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template, # backwards compat
17156,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# vim:set ft=dockerfile:
17157,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# explicitly set user/group IDs
17158,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# grab gosu for easy step-down from root
17159,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17160,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17161,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17162,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17163,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17164,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17165,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		krb5-dev \
17166,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		openldap-dev \
17167,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17168,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17169,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17170,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17171,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17172,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17173,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17174,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17175,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17176,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17177,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17178,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile, # backwards compat
17179,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17180,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17181,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17182,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17183,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		krb5-dev \
17184,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		openldap-dev \
17185,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: prove not found
17186,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17187,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17188,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17189,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17190,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17191,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17192,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17193,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17194,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17195,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17196,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17197,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17198,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17199,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17200,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile, # backwards compat
17201,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,# vim:set ft=dockerfile:
17202,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,# explicitly set user/group IDs
17203,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,# grab gosu for easy step-down from root
17204,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17205,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17206,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# make the sample config easier to munge (and ""correct by default"")"
17207,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17208,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# vim:set ft=dockerfile:
17209,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# explicitly set user/group IDs
17210,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17211,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17212,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# grab gosu for easy step-down from root
17213,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17214,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17215,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17216,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17217,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
17218,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# arches officialy built by upstream
17219,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17220,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17221,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
17222,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
17223,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17224,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17225,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17226,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17227,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17228,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17229,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
17230,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17231,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17232,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template, # backwards compat
17233,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# vim:set ft=dockerfile:
17234,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# explicitly set user/group IDs
17235,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17236,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17237,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# grab gosu for easy step-down from root
17238,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17239,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17240,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17241,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17242,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# see note below about ""*.pyc"" files"
17243,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# arches officialy built by upstream
17244,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17245,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17246,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17247,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17248,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17249,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17250,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17251,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17252,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17253,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17254,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17255,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17256,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17257,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile, # backwards compat
17258,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17259,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17260,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17261,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17262,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		krb5-dev \
17263,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		openldap-dev \
17264,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: prove not found
17265,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17266,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17267,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17268,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17269,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17270,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17271,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17272,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17273,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17274,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17275,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17276,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17277,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17278,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17279,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile, # backwards compat
17280,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17281,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17282,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17283,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17284,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		krb5-dev \
17285,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		openldap-dev \
17286,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: prove not found
17287,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17288,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17289,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17290,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17291,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17292,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17293,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17294,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17295,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17296,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17297,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17298,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17299,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17300,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17301,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile, # backwards compat
17302,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17303,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17304,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17305,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17306,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		krb5-dev \
17307,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		openldap-dev \
17308,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17309,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17310,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17311,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17312,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17313,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17314,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17315,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17316,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17317,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17318,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17319,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile, # backwards compat
17320,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17321,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17322,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17323,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17324,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		krb5-dev \
17325,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		openldap-dev \
17326,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: prove not found
17327,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17328,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17329,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17330,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17331,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17332,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17333,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17334,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17335,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17336,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
17337,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17338,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17339,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17340,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17341,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile, # backwards compat
17342,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17343,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17344,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,# vim:set ft=dockerfile:
17345,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17346,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17347,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17348,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17349,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17350,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17351,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		krb5-dev \
17352,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		openldap-dev \
17353,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17354,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17355,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17356,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17357,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17358,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
17359,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17360,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17361,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17362,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17363,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17364,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17365,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		krb5-dev \
17366,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		openldap-dev \
17367,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: prove not found
17368,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17369,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17370,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17371,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17372,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17373,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17374,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17375,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17376,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17377,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17378,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17379,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17380,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17381,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17382,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile, # backwards compat
17383,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17384,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17385,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17386,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17387,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		krb5-dev \
17388,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		openldap-dev \
17389,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: prove not found
17390,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17391,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17392,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17393,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17394,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17395,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17396,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17397,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17398,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17399,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17400,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17401,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17402,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17403,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17404,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile, # backwards compat
17405,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17406,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17407,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17408,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17409,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		krb5-dev \
17410,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		openldap-dev \
17411,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
17412,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17413,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17414,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17415,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17416,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17417,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17418,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17419,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17420,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17421,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17422,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17423,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17424,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17425,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17426,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile, # backwards compat
17427,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17428,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17429,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17430,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17431,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		krb5-dev \
17432,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		openldap-dev \
17433,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: prove not found
17434,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17435,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17436,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17437,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17438,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17439,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17440,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17441,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17442,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17443,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17444,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17445,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17446,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17447,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17448,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile, # backwards compat
17449,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# vim:set ft=dockerfile:
17450,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# explicitly set user/group IDs
17451,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# grab gosu for easy step-down from root
17452,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17453,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17454,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17455,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17456,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17457,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17458,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		krb5-dev \
17459,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		openldap-dev \
17460,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: prove not found
17461,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17462,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17463,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17464,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17465,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17466,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17467,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17468,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17469,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17470,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17471,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17472,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17473,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17474,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17475,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile, # backwards compat
17476,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# vim:set ft=dockerfile:
17477,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# explicitly set user/group IDs
17478,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17479,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17480,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# grab gosu for easy step-down from root
17481,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17482,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17483,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17484,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17485,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17486,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# see note below about ""*.pyc"" files"
17487,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# arches officialy built by upstream
17488,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17489,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17490,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17491,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17492,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17493,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17494,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17495,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17496,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17497,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17498,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17499,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17500,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17501,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile, # backwards compat
17502,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# vim:set ft=dockerfile:
17503,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# explicitly set user/group IDs
17504,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# grab gosu for easy step-down from root
17505,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17506,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17507,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17508,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17509,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# arches officialy built by upstream
17510,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17511,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17512,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17513,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17514,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17515,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17516,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17517,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17518,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17519,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17520,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17521,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile, # backwards compat
17522,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# vim:set ft=dockerfile:
17523,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17524,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# grab gosu for easy step-down from root
17525,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17526,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17527,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
17528,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17529,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17530,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17531,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		krb5-dev \
17532,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		openldap-dev \
17533,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17534,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17535,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17536,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17537,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17538,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17539,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17540,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17541,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# vim:set ft=dockerfile:
17542,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# explicitly set user/group IDs
17543,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# grab gosu for easy step-down from root
17544,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17545,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17546,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
17547,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17548,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17549,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17550,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		krb5-dev \
17551,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		openldap-dev \
17552,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: prove not found
17553,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17554,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17555,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17556,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17557,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17558,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17559,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17560,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17561,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17562,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#p' --recursive /usr/local \
17563,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17564,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17565,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17566,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17567,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17568,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17569,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17570,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17571,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		krb5-dev \
17572,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		openldap-dev \
17573,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: prove not found
17574,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17575,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17576,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17577,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17578,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17579,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17580,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17581,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17582,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17583,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17584,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17585,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17586,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17587,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17588,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile, # backwards compat
17589,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# vim:set ft=dockerfile:
17590,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# explicitly set user/group IDs
17591,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# grab gosu for easy step-down from root
17592,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17593,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17594,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17595,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17596,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17597,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17598,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile, # backwards compat
17599,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# vim:set ft=dockerfile:
17600,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# explicitly set user/group IDs
17601,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17602,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17603,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# grab gosu for easy step-down from root
17604,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17605,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17606,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17607,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17608,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# see note below about ""*.pyc"" files"
17609,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# arches officialy built by upstream
17610,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17611,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17612,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17613,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17614,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17615,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17616,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17617,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17618,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17619,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17620,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17621,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17622,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17623,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile, # backwards compat
17624,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,# vim:set ft=dockerfile:
17625,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,# explicitly set user/group IDs
17626,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,# grab gosu for easy step-down from root
17627,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17628,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17629,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# vim:set ft=dockerfile:
17630,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# explicitly set user/group IDs
17631,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# grab gosu for easy step-down from root
17632,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17633,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17634,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17635,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17636,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17637,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17638,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile, # backwards compat
17639,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17640,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17641,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17642,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17643,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		krb5-dev \
17644,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		openldap-dev \
17645,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: prove not found
17646,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17647,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17648,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
17649,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17650,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17651,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17652,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17653,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17654,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17655,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17656,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17657,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17658,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17659,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17660,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17661,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile, # backwards compat
17662,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# vim:set ft=dockerfile:
17663,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# explicitly set user/group IDs
17664,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# grab gosu for easy step-down from root
17665,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17666,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17667,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
17668,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17669,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17670,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17671,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		krb5-dev \
17672,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		openldap-dev \
17673,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17674,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17675,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17676,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17677,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17678,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17679,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17680,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17681,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17682,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17683,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17684,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17685,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		krb5-dev \
17686,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		openldap-dev \
17687,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17688,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17689,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17690,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17691,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17692,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17693,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17694,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17695,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17696,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17697,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17698,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# vim:set ft=dockerfile:
17699,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# explicitly set user/group IDs
17700,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17701,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17702,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# grab gosu for easy step-down from root
17703,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17704,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17705,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17706,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17707,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# see note below about ""*.pyc"" files"
17708,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# arches officialy built by upstream
17709,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17710,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17711,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17712,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17713,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17714,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17715,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17716,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17717,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17718,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17719,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17720,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17721,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17722,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile, # backwards compat
17723,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# vim:set ft=dockerfile:
17724,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# explicitly set user/group IDs
17725,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17726,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17727,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# grab gosu for easy step-down from root
17728,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17729,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17730,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17731,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17732,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# arches officialy built by upstream
17733,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17734,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17735,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17736,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17737,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17738,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17739,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17740,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17741,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17742,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17743,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17744,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile, # backwards compat
17745,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17746,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17747,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17748,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17749,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		krb5-dev \
17750,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		openldap-dev \
17751,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17752,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17753,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17754,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17755,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17756,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17757,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17758,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17759,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17760,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17761,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17762,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17763,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17764,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17765,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17766,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		krb5-dev \
17767,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		openldap-dev \
17768,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17769,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17770,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17771,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17772,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17773,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17774,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17775,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17776,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# vim:set ft=dockerfile:
17777,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# explicitly set user/group IDs
17778,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17779,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17780,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
17781,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17782,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17783,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17784,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17785,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17786,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# see note below about ""*.pyc"" files"
17787,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# arches officialy built by upstream
17788,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17789,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17790,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17791,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17792,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17793,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17794,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17795,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17796,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17797,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17798,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17799,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17800,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17801,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile, # backwards compat
17802,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# vim:set ft=dockerfile:
17803,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# explicitly set user/group IDs
17804,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# grab gosu for easy step-down from root
17805,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17806,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17807,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17808,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17809,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17810,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17811,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		krb5-dev \
17812,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		openldap-dev \
17813,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17814,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17815,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17816,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17817,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17818,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17819,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17820,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17821,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# vim:set ft=dockerfile:
17822,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# explicitly set user/group IDs
17823,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17824,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17825,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# grab gosu for easy step-down from root
17826,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17827,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17828,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17829,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17830,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
17831,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# arches officialy built by upstream
17832,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17833,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17834,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17835,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17836,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17837,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17838,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17839,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17840,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17841,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17842,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17843,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17844,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17845,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile, # backwards compat
17846,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# vim:set ft=dockerfile:
17847,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# explicitly set user/group IDs
17848,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# grab gosu for easy step-down from root
17849,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17850,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17851,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17852,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17853,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# arches officialy built by upstream
17854,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17855,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17856,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17857,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17858,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17859,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17860,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17861,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17862,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17863,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17864,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17865,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile, # backwards compat
17866,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
17867,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17868,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17869,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17870,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		krb5-dev \
17871,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		openldap-dev \
17872,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: prove not found
17873,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17874,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17875,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17876,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17877,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17878,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17879,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17880,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17881,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17882,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#p' --recursive /usr/local \
17883,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17884,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17885,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17886,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17887,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17888,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17889,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17890,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17891,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		krb5-dev \
17892,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		openldap-dev \
17893,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: prove not found
17894,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17895,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17896,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17897,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17898,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17899,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17900,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17901,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17902,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17903,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17904,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17905,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17906,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17907,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17908,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile, # backwards compat
17909,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# vim:set ft=dockerfile:
17910,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17911,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# grab gosu for easy step-down from root
17912,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17913,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17914,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# vim:set ft=dockerfile:
17915,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# explicitly set user/group IDs
17916,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# grab gosu for easy step-down from root
17917,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17918,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17919,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17920,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17921,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17922,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17923,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17924,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17925,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17926,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17927,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17928,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17929,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		krb5-dev \
17930,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		openldap-dev \
17931,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17932,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17933,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17934,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17935,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17936,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17937,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17938,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17939,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,# vim:set ft=dockerfile:
17940,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17941,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17942,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# vim:set ft=dockerfile:
17943,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# explicitly set user/group IDs
17944,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# grab gosu for easy step-down from root
17945,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17946,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17947,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# arches officialy built by upstream
17948,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17949,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17950,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17951,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17952,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17953,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17954,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17955,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17956,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17957,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17958,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17959,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile, # backwards compat
17960,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# vim:set ft=dockerfile:
17961,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17962,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# grab gosu for easy step-down from root
17963,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17964,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17965,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# vim:set ft=dockerfile:
17966,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# explicitly set user/group IDs
17967,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# grab gosu for easy step-down from root
17968,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17969,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17970,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17971,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# arches officialy built by upstream
17972,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17973,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17974,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17975,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17976,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17977,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17978,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17979,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17980,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17981,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17982,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17983,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile, # backwards compat
17984,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17985,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17986,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17987,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17988,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		krb5-dev \
17989,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		openldap-dev \
17990,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: prove not found
17991,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17992,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17993,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17994,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17995,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17996,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17997,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17998,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17999,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18000,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#p' --recursive /usr/local \
18001,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18002,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18003,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18004,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18005,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile, # backwards compat
18006,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
18007,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18008,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
18009,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18010,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,#		krb5-dev \
18011,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,#		openldap-dev \
18012,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18013,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18014,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18015,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18016,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18017,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18018,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18019,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18020,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
18021,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18022,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18023,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template, # backwards compat
18024,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18025,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18026,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18027,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18028,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		krb5-dev \
18029,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		openldap-dev \
18030,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: prove not found
18031,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18032,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18033,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18034,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18035,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18036,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18037,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18038,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18039,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18040,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18041,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18042,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18043,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18044,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18045,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile, # backwards compat
18046,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18047,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18048,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18049,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18050,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		krb5-dev \
18051,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		openldap-dev \
18052,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: prove not found
18053,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18054,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18055,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18056,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18057,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18058,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18059,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18060,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18061,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18062,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18063,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18064,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18065,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18066,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18067,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile, # backwards compat
18068,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18069,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18070,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
18071,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18072,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18073,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18074,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		krb5-dev \
18075,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		openldap-dev \
18076,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: prove not found
18077,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18078,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18079,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18080,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18081,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18082,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18083,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18084,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18085,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18086,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#p' --recursive /usr/local \
18087,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18088,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18089,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18090,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18091,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# vim:set ft=dockerfile:
18092,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# explicitly set user/group IDs
18093,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# grab gosu for easy step-down from root
18094,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18095,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18096,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# arches officialy built by upstream
18097,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18098,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18099,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18100,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18101,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18102,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18103,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18104,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18105,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18106,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18107,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18108,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile, # backwards compat
18109,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# vim:set ft=dockerfile:
18110,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18111,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# grab gosu for easy step-down from root
18112,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18113,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18114,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
18115,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18116,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18117,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18118,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		krb5-dev \
18119,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		openldap-dev \
18120,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18121,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18122,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18123,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18124,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18125,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18126,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18127,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18128,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18129,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18130,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18131,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile, # backwards compat
18132,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# vim:set ft=dockerfile:
18133,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# explicitly set user/group IDs
18134,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# grab gosu for easy step-down from root
18135,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18136,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18137,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
18138,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18139,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
18140,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18141,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,#		krb5-dev \
18142,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,#		openldap-dev \
18143,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18144,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18145,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18146,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18147,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18148,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18149,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18150,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18151,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
18152,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18153,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18154,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template, # backwards compat
18155,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
18156,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# explicitly set user/group IDs
18157,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
18158,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18159,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18160,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18161,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18162,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18163,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18164,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile, # backwards compat
18165,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18166,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18167,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18168,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18169,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		krb5-dev \
18170,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		openldap-dev \
18171,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
18172,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18173,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18174,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18175,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18176,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18177,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18178,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18179,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18180,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18181,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
18182,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18183,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18184,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18185,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18186,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile, # backwards compat
18187,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18188,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18189,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18190,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18191,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		krb5-dev \
18192,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		openldap-dev \
18193,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: prove not found
18194,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18195,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18196,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18197,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18198,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18199,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18200,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18201,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18202,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18203,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18204,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18205,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18206,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18207,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18208,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile, # backwards compat
18209,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
18210,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18211,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18212,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18213,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		krb5-dev \
18214,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		openldap-dev \
18215,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: prove not found
18216,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18217,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18218,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18219,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18220,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18221,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18222,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18223,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18224,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18225,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#p' --recursive /usr/local \
18226,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18227,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18228,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18229,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18230,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile, # backwards compat
18231,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18232,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18233,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18234,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18235,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		krb5-dev \
18236,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		openldap-dev \
18237,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18238,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18239,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18240,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18241,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18242,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18243,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18244,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18245,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18246,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18247,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18248,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile, # backwards compat
18249,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18250,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18251,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18252,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18253,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		krb5-dev \
18254,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		openldap-dev \
18255,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18256,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18257,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18258,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18259,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18260,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
18261,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18262,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
18263,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18264,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,#		krb5-dev \
18265,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,#		openldap-dev \
18266,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,# configure: error: prove not found
18267,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
18268,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18269,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18270,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18271,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18272,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18273,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18274,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18275,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18276,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,#p' --recursive /usr/local \
18277,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18278,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
18279,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18280,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18281,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template, # backwards compat
18282,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# vim:set ft=dockerfile:
18283,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# explicitly set user/group IDs
18284,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18285,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18286,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# grab gosu for easy step-down from root
18287,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18288,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18289,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18290,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18291,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
18292,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# arches officialy built by upstream
18293,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18294,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18295,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
18296,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
18297,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18298,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18299,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18300,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18301,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18302,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18303,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
18304,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18305,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18306,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template, # backwards compat
18307,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,# vim:set ft=dockerfile:
18308,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18309,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,# grab gosu for easy step-down from root
18310,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18311,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18312,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# vim:set ft=dockerfile:
18313,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# explicitly set user/group IDs
18314,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18315,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18316,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# grab gosu for easy step-down from root
18317,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18318,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18319,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18320,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18321,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
18322,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# arches officialy built by upstream
18323,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18324,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18325,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18326,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18327,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18328,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18329,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18330,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18331,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18332,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18333,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18334,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18335,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18336,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile, # backwards compat
18337,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
18338,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18339,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18340,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18341,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		krb5-dev \
18342,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		openldap-dev \
18343,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: prove not found
18344,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18345,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18346,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18347,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18348,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18349,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18350,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18351,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18352,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18353,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#p' --recursive /usr/local \
18354,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18355,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18356,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18357,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18358,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# vim:set ft=dockerfile:
18359,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# explicitly set user/group IDs
18360,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18361,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18362,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# grab gosu for easy step-down from root
18363,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18364,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18365,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18366,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18367,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# arches officialy built by upstream
18368,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18369,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18370,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18371,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18372,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18373,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18374,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18375,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18376,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18377,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18378,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18379,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile, # backwards compat
18380,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# vim:set ft=dockerfile:
18381,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# explicitly set user/group IDs
18382,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# grab gosu for easy step-down from root
18383,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18384,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18385,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# arches officialy built by upstream
18386,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18387,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18388,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18389,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18390,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18391,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18392,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18393,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18394,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18395,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18396,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18397,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile, # backwards compat
18398,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,# vim:set ft=dockerfile:
18399,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,# explicitly set user/group IDs
18400,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,# grab gosu for easy step-down from root
18401,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18402,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18403,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18404,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
18405,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18406,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18407,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# vim:set ft=dockerfile:
18408,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# explicitly set user/group IDs
18409,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18410,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18411,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# grab gosu for easy step-down from root
18412,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18413,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18414,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18415,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18416,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# see note below about ""*.pyc"" files"
18417,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# arches officialy built by upstream
18418,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18419,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18420,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18421,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18422,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18423,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18424,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18425,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18426,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18427,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18428,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18429,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18430,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18431,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile, # backwards compat
18432,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# vim:set ft=dockerfile:
18433,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# explicitly set user/group IDs
18434,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18435,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18436,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# grab gosu for easy step-down from root
18437,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18438,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18439,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18440,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
18441,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18442,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# see note below about ""*.pyc"" files"
18443,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# arches officialy built by upstream
18444,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18445,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18446,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18447,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18448,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18449,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18450,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18451,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18452,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18453,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18454,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18455,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18456,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18457,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile, # backwards compat
18458,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
18459,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18460,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18461,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18462,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		krb5-dev \
18463,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		openldap-dev \
18464,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18465,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18466,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18467,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18468,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18469,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18470,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18471,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18472,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# vim:set ft=dockerfile:
18473,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# explicitly set user/group IDs
18474,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18475,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18476,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# grab gosu for easy step-down from root
18477,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18478,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18479,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18480,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18481,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
18482,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# arches officialy built by upstream
18483,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18484,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18485,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18486,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18487,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18488,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18489,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18490,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18491,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18492,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18493,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18494,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18495,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18496,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile, # backwards compat
18497,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18498,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18499,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
18500,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18501,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
18502,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18503,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,#		krb5-dev \
18504,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,#		openldap-dev \
18505,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,# configure: error: prove not found
18506,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
18507,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18508,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18509,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18510,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18511,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18512,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18513,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18514,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18515,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,#p' --recursive /usr/local \
18516,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18517,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
18518,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18519,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18520,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template, # backwards compat
18521,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18522,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18523,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18524,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18525,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		krb5-dev \
18526,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		openldap-dev \
18527,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: prove not found
18528,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18529,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18530,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18531,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18532,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18533,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18534,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18535,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18536,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18537,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18538,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18539,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18540,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18541,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18542,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile, # backwards compat
18543,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# vim:set ft=dockerfile:
18544,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# explicitly set user/group IDs
18545,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# grab gosu for easy step-down from root
18546,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18547,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18548,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# vim:set ft=dockerfile:
18549,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# explicitly set user/group IDs
18550,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# grab gosu for easy step-down from root
18551,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18552,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18553,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18554,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# arches officialy built by upstream
18555,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18556,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18557,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18558,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18559,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18560,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18561,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18562,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18563,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18564,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18565,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18566,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile, # backwards compat
18567,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# vim:set ft=dockerfile:
18568,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# explicitly set user/group IDs
18569,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18570,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18571,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# grab gosu for easy step-down from root
18572,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18573,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18574,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18575,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
18576,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18577,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
18578,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# arches officialy built by upstream
18579,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18580,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18581,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18582,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18583,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18584,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18585,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18586,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18587,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18588,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18589,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18590,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18591,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18592,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile, # backwards compat
18593,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# vim:set ft=dockerfile:
18594,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# explicitly set user/group IDs
18595,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# grab gosu for easy step-down from root
18596,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18597,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18598,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18599,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18600,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# vim:set ft=dockerfile:
18601,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# explicitly set user/group IDs
18602,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# grab gosu for easy step-down from root
18603,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18604,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18605,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# vim:set ft=dockerfile:
18606,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# explicitly set user/group IDs
18607,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18608,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18609,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# grab gosu for easy step-down from root
18610,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18611,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18612,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18613,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18614,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
18615,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# arches officialy built by upstream
18616,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18617,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18618,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18619,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18620,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18621,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18622,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18623,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18624,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18625,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18626,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18627,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18628,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18629,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile, # backwards compat
18630,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# vim:set ft=dockerfile:
18631,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# explicitly set user/group IDs
18632,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18633,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18634,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# grab gosu for easy step-down from root
18635,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18636,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18637,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18638,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18639,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
18640,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# arches officialy built by upstream
18641,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18642,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18643,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18644,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18645,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18646,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18647,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18648,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18649,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18650,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18651,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18652,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18653,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18654,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile, # backwards compat
18655,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# vim:set ft=dockerfile:
18656,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# explicitly set user/group IDs
18657,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# grab gosu for easy step-down from root
18658,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18659,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18660,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18661,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18662,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18663,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18664,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile, # backwards compat
18665,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# vim:set ft=dockerfile:
18666,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# explicitly set user/group IDs
18667,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18668,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18669,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# grab gosu for easy step-down from root
18670,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18671,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18672,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18673,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18674,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
18675,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# arches officialy built by upstream
18676,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18677,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18678,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18679,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18680,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18681,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18682,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18683,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18684,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18685,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18686,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18687,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18688,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18689,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile, # backwards compat
18690,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
18691,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18692,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18693,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18694,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		krb5-dev \
18695,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		openldap-dev \
18696,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: prove not found
18697,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18698,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18699,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18700,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18701,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18702,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18703,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18704,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18705,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18706,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
18707,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18708,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18709,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18710,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18711,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile, # backwards compat
18712,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# vim:set ft=dockerfile:
18713,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# explicitly set user/group IDs
18714,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# grab gosu for easy step-down from root
18715,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18716,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18717,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# arches officialy built by upstream
18718,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18719,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
18720,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
18721,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18722,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18723,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18724,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18725,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18726,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
18727,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18728,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18729,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template, # backwards compat
18730,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# vim:set ft=dockerfile:
18731,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# explicitly set user/group IDs
18732,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# grab gosu for easy step-down from root
18733,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18734,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18735,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18736,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18737,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# arches officialy built by upstream
18738,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18739,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18740,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18741,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18742,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18743,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18744,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18745,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18746,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18747,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18748,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18749,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile, # backwards compat
18750,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
18751,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18752,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18753,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18754,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		krb5-dev \
18755,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		openldap-dev \
18756,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: prove not found
18757,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18758,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18759,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18760,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18761,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18762,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18763,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18764,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18765,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18766,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#p' --recursive /usr/local \
18767,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18768,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18769,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18770,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18771,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
18772,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18773,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18774,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18775,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		krb5-dev \
18776,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		openldap-dev \
18777,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: prove not found
18778,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18779,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18780,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18781,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18782,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18783,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18784,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18785,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18786,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18787,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
18788,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18789,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18790,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18791,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18792,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile, # backwards compat
18793,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# vim:set ft=dockerfile:
18794,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# explicitly set user/group IDs
18795,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# grab gosu for easy step-down from root
18796,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18797,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18798,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18799,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18800,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18801,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18802,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile, # backwards compat
18803,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
18804,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18805,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18806,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18807,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		krb5-dev \
18808,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		openldap-dev \
18809,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: prove not found
18810,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18811,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18812,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18813,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18814,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18815,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18816,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18817,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18818,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18819,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
18820,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18821,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18822,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18823,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18824,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile, # backwards compat
18825,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18826,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18827,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18828,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18829,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		krb5-dev \
18830,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		openldap-dev \
18831,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: prove not found
18832,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18833,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18834,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18835,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18836,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18837,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18838,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18839,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18840,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18841,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
18842,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18843,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18844,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18845,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18846,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile, # backwards compat
18847,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
18848,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18849,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18850,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18851,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		krb5-dev \
18852,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		openldap-dev \
18853,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18854,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18855,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18856,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18857,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18858,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18859,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18860,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18861,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18862,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18863,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# vim:set ft=dockerfile:
18864,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# explicitly set user/group IDs
18865,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# grab gosu for easy step-down from root
18866,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18867,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18868,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18869,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18870,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18871,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18872,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile, # backwards compat
18873,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18874,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18875,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18876,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18877,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		krb5-dev \
18878,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		openldap-dev \
18879,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: prove not found
18880,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18881,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18882,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18883,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18884,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18885,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18886,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18887,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18888,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18889,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
18890,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18891,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18892,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18893,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18894,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile, # backwards compat
18895,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18896,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18897,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18898,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18899,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		krb5-dev \
18900,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		openldap-dev \
18901,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: prove not found
18902,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18903,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18904,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18905,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18906,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18907,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18908,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18909,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18910,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18911,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18912,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18913,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18914,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18915,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18916,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile, # backwards compat
18917,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# vim:set ft=dockerfile:
18918,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# explicitly set user/group IDs
18919,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# grab gosu for easy step-down from root
18920,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18921,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18922,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18923,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18924,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18925,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18926,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile, # backwards compat
18927,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# vim:set ft=dockerfile:
18928,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# explicitly set user/group IDs
18929,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# grab gosu for easy step-down from root
18930,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18931,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18932,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# arches officialy built by upstream
18933,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18934,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18935,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18936,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18937,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18938,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18939,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18940,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18941,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18942,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18943,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18944,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile, # backwards compat
18945,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18946,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18947,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18948,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18949,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		krb5-dev \
18950,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		openldap-dev \
18951,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18952,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18953,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18954,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18955,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18956,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
18957,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18958,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18959,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
18960,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
18961,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18962,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18963,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		krb5-dev \
18964,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		openldap-dev \
18965,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: prove not found
18966,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18967,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18968,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18969,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18970,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18971,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18972,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18973,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18974,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18975,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#p' --recursive /usr/local \
18976,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18977,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18978,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18979,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18980,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile, # backwards compat
18981,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,# vim:set ft=dockerfile:
18982,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,# explicitly set user/group IDs
18983,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,# grab gosu for easy step-down from root
18984,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18985,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18986,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# vim:set ft=dockerfile:
18987,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# explicitly set user/group IDs
18988,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# grab gosu for easy step-down from root
18989,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18990,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18991,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18992,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18993,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18994,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,# vim:set ft=dockerfile:
18995,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18996,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18997,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
18998,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18999,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
19000,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19001,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,#		krb5-dev \
19002,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,#		openldap-dev \
19003,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,# configure: error: prove not found
19004,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
19005,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19006,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19007,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19008,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19009,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19010,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19011,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19012,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19013,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19014,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
19015,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19016,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19017,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template, # backwards compat
19018,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# vim:set ft=dockerfile:
19019,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# explicitly set user/group IDs
19020,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# grab gosu for easy step-down from root
19021,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19022,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19023,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19024,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# arches officialy built by upstream
19025,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19026,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19027,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19028,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19029,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19030,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19031,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19032,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19033,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19034,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19035,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19036,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile, # backwards compat
19037,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# vim:set ft=dockerfile:
19038,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# explicitly set user/group IDs
19039,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# grab gosu for easy step-down from root
19040,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19041,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19042,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19043,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# arches officialy built by upstream
19044,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19045,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19046,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19047,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19048,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19049,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19050,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19051,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19052,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19053,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19054,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19055,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile, # backwards compat
19056,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
19057,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19058,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
19059,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19060,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,#		krb5-dev \
19061,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,#		openldap-dev \
19062,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,# configure: error: prove not found
19063,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,# configure: error: Perl module IPC::Run is required to run TAP tests
19064,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19065,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19066,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19067,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19068,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19069,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19070,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19071,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19072,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,#p' --recursive /usr/local \
19073,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19074,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
19075,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19076,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19077,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template, # backwards compat
19078,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# vim:set ft=dockerfile:
19079,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# explicitly set user/group IDs
19080,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# grab gosu for easy step-down from root
19081,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19082,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19083,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# vim:set ft=dockerfile:
19084,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19085,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# grab gosu for easy step-down from root
19086,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19087,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19088,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# vim:set ft=dockerfile:
19089,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# explicitly set user/group IDs
19090,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# grab gosu for easy step-down from root
19091,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19092,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19093,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19094,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19095,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
19096,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19097,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19098,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19099,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		krb5-dev \
19100,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		openldap-dev \
19101,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: prove not found
19102,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19103,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19104,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19105,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19106,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19107,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19108,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19109,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19110,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19111,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
19112,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19113,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19114,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19115,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19116,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile, # backwards compat
19117,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# vim:set ft=dockerfile:
19118,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# explicitly set user/group IDs
19119,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# grab gosu for easy step-down from root
19120,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19121,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19122,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# vim:set ft=dockerfile:
19123,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19124,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# grab gosu for easy step-down from root
19125,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19126,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19127,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
19128,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
19129,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19130,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19131,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		krb5-dev \
19132,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		openldap-dev \
19133,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: prove not found
19134,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19135,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19136,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19137,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19138,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19139,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19140,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19141,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19142,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19143,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#p' --recursive /usr/local \
19144,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19145,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19146,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19147,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19148,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile, # backwards compat
19149,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# vim:set ft=dockerfile:
19150,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# explicitly set user/group IDs
19151,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19152,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19153,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# grab gosu for easy step-down from root
19154,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19155,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19156,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19157,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19158,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
19159,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# arches officialy built by upstream
19160,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19161,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19162,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19163,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19164,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19165,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19166,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19167,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19168,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19169,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19170,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19171,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19172,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19173,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile, # backwards compat
19174,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# vim:set ft=dockerfile:
19175,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# explicitly set user/group IDs
19176,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# grab gosu for easy step-down from root
19177,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19178,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19179,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19180,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19181,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
19182,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
19183,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19184,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19185,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		krb5-dev \
19186,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		openldap-dev \
19187,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19188,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19189,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19190,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19191,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19192,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
19193,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19194,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19195,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# vim:set ft=dockerfile:
19196,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# explicitly set user/group IDs
19197,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19198,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19199,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# grab gosu for easy step-down from root
19200,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19201,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19202,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19203,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19204,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
19205,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# arches officialy built by upstream
19206,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19207,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19208,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19209,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19210,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19211,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19212,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19213,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19214,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19215,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19216,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19217,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19218,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19219,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile, # backwards compat
19220,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19221,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19222,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19223,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19224,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		krb5-dev \
19225,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		openldap-dev \
19226,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: prove not found
19227,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19228,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19229,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19230,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19231,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19232,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19233,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19234,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19235,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19236,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19237,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19238,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19239,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19240,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19241,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile, # backwards compat
19242,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,# vim:set ft=dockerfile:
19243,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19244,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19245,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19246,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
19247,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19248,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19249,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		krb5-dev \
19250,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		openldap-dev \
19251,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: prove not found
19252,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19253,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19254,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19255,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19256,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19257,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19258,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19259,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19260,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19261,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19262,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19263,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19264,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19265,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19266,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile, # backwards compat
19267,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# vim:set ft=dockerfile:
19268,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# explicitly set user/group IDs
19269,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# grab gosu for easy step-down from root
19270,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19271,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19272,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19273,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19274,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# arches officialy built by upstream
19275,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19276,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19277,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19278,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19279,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19280,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19281,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19282,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19283,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19284,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19285,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19286,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile, # backwards compat
19287,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# vim:set ft=dockerfile:
19288,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# explicitly set user/group IDs
19289,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# grab gosu for easy step-down from root
19290,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19291,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19292,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# arches officialy built by upstream
19293,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19294,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19295,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19296,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19297,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19298,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19299,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19300,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19301,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19302,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19303,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19304,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile, # backwards compat
19305,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# vim:set ft=dockerfile:
19306,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# explicitly set user/group IDs
19307,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19308,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19309,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# grab gosu for easy step-down from root
19310,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19311,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19312,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19313,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19314,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
19315,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# arches officialy built by upstream
19316,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19317,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19318,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19319,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19320,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19321,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19322,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19323,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19324,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19325,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19326,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19327,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19328,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19329,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile, # backwards compat
19330,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19331,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19332,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19333,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19334,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		krb5-dev \
19335,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		openldap-dev \
19336,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# configure: error: prove not found
19337,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19338,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19339,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19340,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19341,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19342,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19343,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19344,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19345,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19346,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19347,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19348,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19349,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile, # backwards compat
19350,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
19351,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
19352,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19353,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19354,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		krb5-dev \
19355,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		openldap-dev \
19356,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: prove not found
19357,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19358,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19359,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19360,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19361,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19362,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19363,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19364,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19365,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19366,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#p' --recursive /usr/local \
19367,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19368,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19369,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19370,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19371,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
19372,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19373,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19374,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19375,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		krb5-dev \
19376,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		openldap-dev \
19377,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: prove not found
19378,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19379,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19380,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19381,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19382,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19383,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19384,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19385,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19386,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19387,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#p' --recursive /usr/local \
19388,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19389,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19390,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19391,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19392,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# vim:set ft=dockerfile:
19393,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# explicitly set user/group IDs
19394,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19395,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19396,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# grab gosu for easy step-down from root
19397,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19398,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19399,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19400,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19401,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# see note below about ""*.pyc"" files"
19402,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# arches officialy built by upstream
19403,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19404,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19405,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19406,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19407,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19408,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19409,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19410,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19411,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19412,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19413,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19414,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
19415,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19416,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile, # backwards compat
19417,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
19418,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19419,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19420,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19421,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		krb5-dev \
19422,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		openldap-dev \
19423,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: prove not found
19424,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19425,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19426,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19427,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19428,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19429,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19430,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19431,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19432,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19433,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
19434,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19435,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19436,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19437,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19438,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile, # backwards compat
19439,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
19440,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19441,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19442,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19443,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		krb5-dev \
19444,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		openldap-dev \
19445,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19446,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19447,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19448,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19449,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19450,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19451,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19452,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19453,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19454,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19455,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19456,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19457,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile, # backwards compat
19458,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# vim:set ft=dockerfile:
19459,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# explicitly set user/group IDs
19460,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# grab gosu for easy step-down from root
19461,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19462,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19463,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19464,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19465,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19466,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19467,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile, # backwards compat
19468,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# vim:set ft=dockerfile:
19469,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# explicitly set user/group IDs
19470,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# grab gosu for easy step-down from root
19471,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19472,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19473,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# vim:set ft=dockerfile:
19474,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19475,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# grab gosu for easy step-down from root
19476,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19477,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19478,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# vim:set ft=dockerfile:
19479,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19480,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# grab gosu for easy step-down from root
19481,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19482,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19483,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19484,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
19485,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19486,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19487,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		krb5-dev \
19488,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		openldap-dev \
19489,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: prove not found
19490,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19491,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19492,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19493,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19494,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19495,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19496,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19497,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19498,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19499,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19500,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19501,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19502,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19503,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19504,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile, # backwards compat
19505,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
19506,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19507,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19508,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19509,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		krb5-dev \
19510,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		openldap-dev \
19511,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: prove not found
19512,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19513,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19514,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19515,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19516,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19517,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19518,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19519,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19520,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19521,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
19522,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19523,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19524,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19525,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19526,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile, # backwards compat
19527,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# vim:set ft=dockerfile:
19528,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# explicitly set user/group IDs
19529,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19530,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19531,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# grab gosu for easy step-down from root
19532,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19533,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19534,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19535,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19536,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# see note below about ""*.pyc"" files"
19537,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# arches officialy built by upstream
19538,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19539,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19540,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19541,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19542,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19543,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19544,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19545,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19546,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19547,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19548,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19549,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
19550,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19551,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile, # backwards compat
19552,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# vim:set ft=dockerfile:
19553,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# explicitly set user/group IDs
19554,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# grab gosu for easy step-down from root
19555,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19556,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19557,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
19558,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19559,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19560,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19561,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		krb5-dev \
19562,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		openldap-dev \
19563,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: prove not found
19564,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19565,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19566,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19567,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19568,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19569,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19570,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19571,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19572,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19573,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
19574,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19575,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19576,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19577,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19578,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile, # backwards compat
19579,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# vim:set ft=dockerfile:
19580,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# explicitly set user/group IDs
19581,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# grab gosu for easy step-down from root
19582,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19583,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19584,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19585,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19586,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19587,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19588,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19589,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
19590,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19591,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19592,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19593,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		krb5-dev \
19594,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		openldap-dev \
19595,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: prove not found
19596,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19597,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19598,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19599,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19600,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19601,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19602,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19603,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19604,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19605,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
19606,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19607,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19608,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19609,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19610,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile, # backwards compat
19611,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
19612,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19613,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19614,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19615,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		krb5-dev \
19616,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		openldap-dev \
19617,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19618,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
19619,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19620,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19621,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19622,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19623,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19624,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19625,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19626,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19627,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19628,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19629,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19630,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19631,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile, # backwards compat
19632,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19633,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19634,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19635,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19636,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19637,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19638,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		krb5-dev \
19639,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		openldap-dev \
19640,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19641,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19642,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19643,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19644,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19645,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19646,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19647,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19648,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19649,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19650,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19651,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19652,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile, # backwards compat
19653,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
19654,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19655,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19656,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19657,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		krb5-dev \
19658,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		openldap-dev \
19659,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
19660,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19661,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19662,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19663,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19664,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19665,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19666,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19667,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19668,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19669,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
19670,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19671,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19672,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19673,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19674,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile, # backwards compat
19675,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# vim:set ft=dockerfile:
19676,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# explicitly set user/group IDs
19677,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19678,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19679,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
19680,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19681,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19682,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19683,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
19684,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19685,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# see note below about ""*.pyc"" files"
19686,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# arches officialy built by upstream
19687,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19688,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19689,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19690,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
19691,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19692,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19693,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19694,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19695,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19696,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19697,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19698,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19699,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
19700,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19701,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile, # backwards compat
19702,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19703,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19704,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19705,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19706,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		krb5-dev \
19707,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		openldap-dev \
19708,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: prove not found
19709,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19710,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19711,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19712,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19713,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19714,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19715,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19716,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19717,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19718,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19719,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19720,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19721,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19722,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19723,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile, # backwards compat
19724,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19725,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19726,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19727,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19728,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		krb5-dev \
19729,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		openldap-dev \
19730,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: prove not found
19731,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19732,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19733,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19734,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19735,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19736,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19737,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19738,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19739,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19740,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19741,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19742,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19743,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19744,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19745,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile, # backwards compat
19746,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# vim:set ft=dockerfile:
19747,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# explicitly set user/group IDs
19748,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19749,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19750,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# grab gosu for easy step-down from root
19751,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19752,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19753,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19754,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
19755,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19756,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
19757,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# arches officialy built by upstream
19758,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19759,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19760,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19761,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19762,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19763,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19764,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19765,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19766,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19767,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19768,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19769,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
19770,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19771,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile, # backwards compat
19772,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,# vim:set ft=dockerfile:
19773,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19774,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,# su-exec (gosu-compatible) is installed further down
19775,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19776,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,#		krb5-dev \
19777,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,#		openldap-dev \
19778,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19779,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19780,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19781,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19782,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19783,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19784,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19785,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19786,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19787,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")"
19788,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19789,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19790,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template, # backwards compat
19791,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19792,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19793,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19794,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19795,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		krb5-dev \
19796,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		openldap-dev \
19797,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19798,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19799,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19800,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19801,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19802,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19803,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19804,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19805,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19806,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19807,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19808,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile, # backwards compat
19809,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# vim:set ft=dockerfile:
19810,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# explicitly set user/group IDs
19811,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
19812,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
19813,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# grab gosu for easy step-down from root
19814,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19815,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
19816,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
19817,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
19818,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19819,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# see note below about ""*.pyc"" files"
19820,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# arches officialy built by upstream
19821,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19822,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
19823,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19824,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19825,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19826,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19827,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19828,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19829,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19830,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
19831,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19832,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
19833,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19834,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile, # backwards compat
19835,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# vim:set ft=dockerfile:
19836,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# explicitly set user/group IDs
19837,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# grab gosu for easy step-down from root
19838,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19839,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19840,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19841,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19842,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19843,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# vim:set ft=dockerfile:
19844,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19845,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# grab gosu for easy step-down from root
19846,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19847,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19848,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
19849,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
19850,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19851,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19852,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		krb5-dev \
19853,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		openldap-dev \
19854,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19855,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19856,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19857,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19858,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19859,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19860,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19861,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19862,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19863,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19864,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19865,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile, # backwards compat
19866,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# vim:set ft=dockerfile:
19867,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# explicitly set user/group IDs
19868,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# grab gosu for easy step-down from root
19869,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19870,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19871,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19872,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19873,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# vim:set ft=dockerfile:
19874,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19875,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# grab gosu for easy step-down from root
19876,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19877,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19878,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# vim:set ft=dockerfile:
19879,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# explicitly set user/group IDs
19880,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# grab gosu for easy step-down from root
19881,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19882,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19883,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19884,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19885,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,# vim:set ft=dockerfile:
19886,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,# explicitly set user/group IDs
19887,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,# grab gosu for easy step-down from root
19888,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19889,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19890,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
19891,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19892,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# vim:set ft=dockerfile:
19893,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19894,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# grab gosu for easy step-down from root
19895,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19896,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19897,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# vim:set ft=dockerfile:
19898,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
19899,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# grab gosu for easy step-down from root
19900,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19901,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
19902,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
19903,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19904,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19905,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19906,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		krb5-dev \
19907,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		openldap-dev \
19908,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: prove not found
19909,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19910,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19911,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19912,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19913,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19914,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19915,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19916,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19917,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19918,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
19919,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19920,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19921,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19922,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19923,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile, # backwards compat
19924,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
19925,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19926,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19927,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19928,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		krb5-dev \
19929,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		openldap-dev \
19930,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: prove not found
19931,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19932,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19933,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19934,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19935,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19936,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19937,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19938,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19939,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19940,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
19941,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19942,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19943,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19944,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19945,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile, # backwards compat
19946,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
19947,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19948,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19949,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19950,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		krb5-dev \
19951,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		openldap-dev \
19952,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: prove not found
19953,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19954,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19955,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19956,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19957,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19958,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19959,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19960,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
19961,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
19962,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
19963,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19964,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
19965,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19966,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile, # backwards compat
19967,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# vim:set ft=dockerfile:
19968,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# explicitly set user/group IDs
19969,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# grab gosu for easy step-down from root
19970,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
19971,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
19972,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# arches officialy built by upstream
19973,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
19974,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
19975,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
19976,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
19977,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
19978,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
19979,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
19980,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
19981,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
19982,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
19983,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
19984,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile, # backwards compat
19985,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
19986,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
19987,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
19988,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
19989,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		krb5-dev \
19990,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		openldap-dev \
19991,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: prove not found
19992,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
19993,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
19994,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
19995,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
19996,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
19997,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19998,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
19999,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
20000,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
20001,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
20002,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
20003,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
20004,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
20005,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20006,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile, # backwards compat
20007,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# vim:set ft=dockerfile:
20008,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# explicitly set user/group IDs
20009,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# grab gosu for easy step-down from root
20010,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20011,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
20012,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
20013,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
20014,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# arches officialy built by upstream
20015,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
20016,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
20017,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
20018,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
20019,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
20020,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
20021,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
20022,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
20023,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
20024,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
20025,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20026,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile, # backwards compat
20027,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# vim:set ft=dockerfile:
20028,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# explicitly set user/group IDs
20029,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# grab gosu for easy step-down from root
20030,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20031,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
20032,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
20033,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
20034,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
20035,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20036,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile, # backwards compat
20037,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# vim:set ft=dockerfile:
20038,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# explicitly set user/group IDs
20039,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
20040,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
20041,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# grab gosu for easy step-down from root
20042,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20043,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
20044,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
20045,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
20046,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# arches officialy built by upstream
20047,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
20048,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
20049,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
20050,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
20051,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
20052,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
20053,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
20054,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
20055,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
20056,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
20057,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20058,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template, # backwards compat
20059,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# vim:set ft=dockerfile:
20060,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
20061,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# grab gosu for easy step-down from root
20062,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20063,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
20064,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# vim:set ft=dockerfile:
20065,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# explicitly set user/group IDs
20066,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
20067,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
20068,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# grab gosu for easy step-down from root
20069,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20070,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
20071,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
20072,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
20073,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
20074,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# arches officialy built by upstream
20075,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
20076,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
20077,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
20078,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
20079,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
20080,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
20081,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
20082,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
20083,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
20084,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
20085,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
20086,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
20087,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20088,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile, # backwards compat
20089,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# vim:set ft=dockerfile:
20090,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# explicitly set user/group IDs
20091,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
20092,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
20093,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# grab gosu for easy step-down from root
20094,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
20095,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
20096,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
20097,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
20098,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
20099,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files"
20100,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# arches officialy built by upstream
20101,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
20102,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
20103,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# build .deb files from upstream's source packages (which are verified by apt-get)
20104,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,# we don't remove APT lists here because they get re-downloaded and removed later
20105,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
20106,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
20107,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
20108,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
20109,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
20110,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
20111,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")"
20112,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
20113,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
20114,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template, # backwards compat
